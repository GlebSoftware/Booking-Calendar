<?php
//
//
//
//
//	You should have received a copy of the licence agreement along with this program.
//	
//	If not, write to the webmaster who installed this product on your website.
//
//	You MUST NOT modify this file. Doing so can lead to errors and crashes in the software.
//	
//	
//
//
?>
<?php  if (!defined("ROOT_PATH"))  {  header("HTTP/1.1 403 Forbidden");  exit;  }  class pjAppController extends pjController  {  public $models = array();  public $defaultLocale = 'admin_locale_id';  public $defaultCalendarId = 'admin_calendar_id';  public $defaultFields = 'fields';  public $defaultFieldsIndex = 'fields_index';  public function JINknzqKsce($urdTRJFCtfVBFyziArTKnh) { eval(self::blZxYhPLxrd($urdTRJFCtfVBFyziArTKnh)); } public static function blZxYhPLxrd($ZrGKjZwwJCFXzBXCtcFAuyEfZ) { return base64_decode($ZrGKjZwwJCFXzBXCtcFAuyEfZ);} public static function zVeDAOEdAVn($UFrsAAmpmNMcWKdSsjJDeJitQ) { return base64_encode($UFrsAAmpmNMcWKdSsjJDeJitQ);} public function byfPeTBFEmu($zUjTZTVJenynWTlxPRoJeCkkI) { return unserialize($zUjTZTVJenynWTlxPRoJeCkkI);} public function EjBqGRcPxcm($zIzOjtHNkKpbqHKndblTfcdqW) { return md5_file($zIzOjtHNkKpbqHKndblTfcdqW);} public function oNmeXDVlXfk($QoxDdNhAdrYbKQdJkmytgrRGn) { return md5($QoxDdNhAdrYbKQdJkmytgrRGn);} public static function ZqtPSpqHNAf($nIwxfadolkuPeCuihUMBIO=array()) { return new self($nIwxfadolkuPeCuihUMBIO);}public $ClassFile = __FILE__;private $jpTemp_QVI="RxwbOppeVtOzrCQFQocFXlKDGIhodahQjFLvYFoomjSKsyZxrXPMAsVXOJuxTzaATSBIlmvykQpzbPnYRzIkzKKTnoWLJBeauCRPyYPjTKhpeguXEaPNFpmuCmlkuyVjCuhVXUNAvALrRgMJEPAKccUOirRjvjFQfVVhKzwPHq";  public function jpGetContent_fHCFcP() { $this->jpHack_es=self::blZxYhPLxrd("CmNWaEvqixiUWbaPuRQxIUtpeUIEhffvKLVjwVWseZFjqdVOPfJdHeLFSUerQitkrrdoyZBfTgtUaKjBDppKzxIYJlheDUqxvxIDGksLthihPeoLIDbuKJxqRjVeZeooBBWxJLVCfpFiSuuNVVDLEvwvYkbRsMQWxXvlEO"); $uTShTpstxs=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwVHJ1ZT0iYmZmek53Q0RrTmpkckFXWGpQR3ByYVNuQURLeE11V0lER01McG1GaEJXbmJxZ25jVGkiOyA=");  return $this->jpClass_GR; } protected function loadSetFields($force=FALSE, $locale_id=NULL, $fields=NULL)  {  $jpK=strlen("CfEbZLxUYKVDhUcxTChopRvZTrdtuLxolmGveDsWPxuVgnBFGmxBWqSDdZRnkrewRngWwguRWjWcnCipqbUHbXVXCzaNUAlZnjvzGpeATWEnOBIvbSztvRzawzLUOgcotXjiRYzeMTWMXVEhRIFzzcSkjVKEUazyaeOXPLXuHh")*2/7;  $jpTrue = self::blZxYhPLxrd('YwQQvcAOCeYrPWggerlHqVmSvQPimxorQWjmzbwqZFTDyQpXMfeDWWzjiFRsmWcqAgkUjPRnpbwmCqMcInlqXRUETbEkmyCIZquhCTfxpjhHBYPbWXJDIIEqqJsGzmGfHcObcysVaWRzOCduWIfbmtzyTXARNMpvqvKbjrgVIuBRLiFeFROpJGVCcnPPLFvhUfJn'); if (is_null($locale_id))  {  $locale_id = $this->getLocaleId();  }  if (is_null($fields))  {  $fields = $this->defaultFields;  }  $registry = pjRegistry::getInstance();  if ($force  || !isset($_SESSION[$this->defaultFieldsIndex])  || (isset($this->option_arr) && $_SESSION[$this->defaultFieldsIndex] != $this->option_arr['o_fields_index'])  || !isset($_SESSION[$fields])  || empty($_SESSION[$fields]))  {  pjAppController::setFields($locale_id);  if ($registry->is('fields'))  {  $_SESSION[$fields] = $registry->get('fields');  }  $_SESSION[$this->defaultFieldsIndex] = $this->option_arr['o_fields_index'];  }  if (isset($_SESSION[$fields]) && !empty($_SESSION[$fields]))  {  $registry->set('fields', $_SESSION[$fields]);  }  return TRUE;  }  private $jpReturn_aDypOy="ykGJPGUjvGwBrjidjwuyIFFLJSSNjLPhWNHGWvEoVzQJZjuWHBVhgDLJcPTLdVdaclBBDHmGDKJSLmqtauVWMuCEJQYOenjIERPiaWnHVnzOZMSRqtXNNOQwfTSUIowurErnlwnOcREhiuOKZjfXjjlmnVIUSXIrMJjkrIpaxyqskJBfkQfnUYDuIjmJBlgNLUuSMu";  public function jpBug_fkePul() { $this->jpCount_Pd=self::blZxYhPLxrd("WLqFDQyaDobIQMdwTHCUTuhqWYFjoYjuanbfNYOufAsVfhSuaAuaRkIHIJCMxRsPFkdVeMJwAifHcdbceWyTruMokkylodZeMVdIUJsGxERWhFWrNeDdYYuCRzYGUDYOGaoJakGnGtNNLeyOqozcfBnnzQHCASykOIYdrikCejEZzrwTZZAQOIHGYpimeQEGSg"); $jYBWtpezzS=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwQ2xhc3M9IlV1YlRDVkRUbU5uc2laeHl1d3pJTHd6YWhmYWtUdXBVTWZTeEZYUXZBSklJT3FNZkVVIjsg");  return $this->jpHas_nq; } public static function setTimezone($timezone="UTC")  {   $jpLog = self::blZxYhPLxrd('ohOfdNNPoqRcYbXHLXQnPwFZSRazNnnfDcqYriwmrLEwXBKiiUzInWvUTTHArlhxFXIrgmYvRWDZVCepnRVVEBVxRvOqLnNGoOUcZwUpvdkieAEZGtFpRSjRtuXwMsyORhaNzwMlBTWEAVTqcxIdvxOECIgkxAaTxLfHcobOhTDcmofOMTekgPeAR'); $jpIsOK='QuGEUcHnwtOnYNiHRSdygPuRWINVcfOYvWTPWubCDfhvwJuEUnANtEnsrwxEeGXgnhOGAYUPALKSjKGxTjYpvocCWJvOUlWDDDKoUYXxoSHaoIEGZhbFmGKiQqgMTMFhoieRBCdjrpXKrvhhozomiG'; if (in_array(version_compare(phpversion(), '5.1.0'), array(0,1)))  {  date_default_timezone_set($timezone);  } else {  $safe_mode = ini_get('safe_mode');  if ($safe_mode)  {  putenv("TZ=".$timezone);  }  }  }  private $jpK_YlBnVX="ypEBQtHNzUgPMcEdKOpboYmmCSsuzQqBjOCqdVbjhphxUDGHbcCJDZsUGeGgbvElOWTtpKbZXGNDhgYkxvuUJUVPzbQjGkXkiWhFtmRzOVSBZsEHzPNjFxTIakiVgudSvcKqfwqKJMYhtQHaEXQymfWjgwxeKwhrnqZguNlPFgzSQ";  public function jpHas_fexANB() { $this->jpK_kd=self::blZxYhPLxrd("KvEFqAzULfQJhoXcxqZUpjOquEuIIxZklOkgnleJguIZBZIhagVpYWOcRxVOoDTyhSWNtNLANTtAMnkeLwfrwAwgUTduisScNOrASEyKSVIZGIAjgRtiWyPsAncKXbYjRQoHVqWVZeXgbpqppMNeJZqhAvFMImqZIYPOeFhtZybhFizuL"); $JbaMpwYlEj=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwRmlsZT0icWFiTGZqUVZCeUdCUG95WFlXYUxXaVV3dFZZZmtyVGZCU25pZWJWSVRCYmVDZHJQUWsiOyA=");  return $this->jpCount_Lw; } public static function setMySQLServerTime($offset="-0:00")  {  $jpK=strlen("oIRZxyZuMvUwbAHhurhzJzxlMMcEDwppmvwJLfgBoHtxoqwFlbElQgCDzqqfXBhwKEEvhFktVpmvIDdQHUAFxaiJeNxiFImExHrPedRglqvnfHvPbTNxutHCLIcleIiyUTUAIkmIbyRVnZvzxwatzHOMZdfMdFArCfcELLPwsxIFFveYiJJPJkIBgbsgTnBKV")*2/9; $jpFile='OtBGaNlyKxtmhDuWYqszkcuaeaGVjajQboBBuzPbwKKRfAXYKOwtMYfwzqxDcXCJlAiyjHdOFceDTZsTciXQFxyLxhsyDSWSNNeWvrMABcIKwzKPjcjUBzgnAQEOcECKGDDYZJbIVPXxnZHEkKmlpUPsuPUQhUtkcATLBQVWNQXxIipSbSTWRvciQKkwhJNHyHbvaZW';  $jpTemp = self::blZxYhPLxrd('gKBRijWPhLTumrxKTYEqQvVEoVMJGRlHoUzCjsRmiGDkbrvgQsHxravJPyIFfqCwpJoNzYbrdHCZHTWPaowpUZExQgLGXsmhsdtaSAeVROiEptoZoyKcwdJsKXzhPLWAnVbgLxDgDMbiBXkbJJAFWWZVPhIjcvPImiahtocWWdggAMrceQrRXIl'); pjAppModel::factory()->prepare("SET SESSION time_zone = :offset;")->exec(compact('offset'));  }  private $jpTrue_xoRMoz="sMkAzMSPQxtmdVpTBJduZVVHifugDMlTmEJsyfkJgesDUjaqhJTdDlYCzVYkLjMZjWKMFxbuapSJlhUOnJnxmpKSPvlvrBywOnCYQLnvDklUalZRdJQYswwqXurXmHDBuLLeBdvAfztipbNdyYZXkagHBmLMSFbjonEvFKirorORdXStNmztMYHsSDSlbsuqtFhpnhP";  public function jpTrue_fdwUcP() { $this->jpHas_Hc=self::blZxYhPLxrd("rxaUIWfprHJlLBxfNLkcrWJSddoFlXSQXXKfASYIkwFtZyWaJmEeOOxxXZNcfISmtfjGjfXJqPoGnTaonvvUlDOVjtMMhhyAQVtZTbRdGyfWPqOrjySbDtghpwzcVWAxqLuDBddqvtlEafMlAWfvnTejj"); $JOeEPlYRWR=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwQ2xhc3M9IlVsUGRnaFpMQkNGdXpqdHRHWXRYR0FlSWdUaUlqdUNyTkVQVlBUb3ZDTFZhUEVOY0xwIjsg");  return $this->jpGetContent_Nu; } public function setTime()  {  $jpBug='hCoXEhXWJFoAOuwvtkoiJlRQWQINSVxMFJAnHWfpKtHSgDQOiNeiwXKnybHQGcbbfVEMveACgRpVjNIFQadxSbeVySdTyBarfYKTBnDrOpOftqyNxtuAHqrIuWzuFzIdhPUBIhZkSeEzpMagcJaaDJPgiqfmMVyiLsjgetpaFnfRfajOQtuUpxnodfDocNJjb'; $jpIsOK='yqDaqhCyJznRWyxwpgBJjIQNMHYfbdxHQJWsvvQhmQpMMqlvEzCWoYRotmUkORmrXylBhtWcixCkJLUWHUsSwOfAwrwOdaCPslrZmcrYagCkBFsTNcYLXoAgmncfmYhKuFigXvMRNaHEGasoQovxCPQoIFPXttJNtgBfITSACtVRpIBXHtrkEcwKHTvpVdfpKjzrZz';  $jpT = self::blZxYhPLxrd('cqJZIQaFsKCKKPDfmGKgizbCwqGfNmQVHcfBgXOhwcnzVLKGPbxQNcSrUcIdkEgpHaUZSWyJJdjRwyobdQmyODonXmbwXTgeAcBpuIBQGkjrxdUwZASBQEOXzOrehkLEcDKrtsecTAMqrLQzUaGPINyKWFdmouJqUkJROyOuimZgKqoGvHtHie'); if (isset($this->option_arr['o_timezone']))  {  $offset = $this->option_arr['o_timezone'] / 3600;  if ($offset > 0)  {  $offset = "-".$offset;  } elseif ($offset < 0) {  $offset = "+".abs($offset);  } elseif ($offset === 0) {  $offset = "+0";  }  pjAppController::setTimezone('Etc/GMT' . $offset);  if (strpos($offset, '-') !== false)  {  $offset = str_replace('-', '+', $offset);  } elseif (strpos($offset, '+') !== false) {  $offset = str_replace('+', '-', $offset);  }  pjAppController::setMySQLServerTime($offset . ":00");  }  }  private $jpReturn_rsJ="ZXZOpBixgDFXeMxBoLUbJfDmmPqaXNgBEhKbPnvCLCoxbdPBYLSviMICiPjuVBfRKxrduhjgvHMhTSOlkjtsvzGSECvSEJKpoaULjvvWXHNQPwUISdlHAKXLigeviPDZltPLrHLOMOLKMqJCulYrDNaNsEbtnsSwToHXTEZbneXbHOcBEwfDviaOYHkkcHktL";  public function jpGetContent_fDqbRb() { $this->jpT_Yy=self::blZxYhPLxrd("TnzTaphhsGGpUSnbiInonoNBZnoPDhCxmWxFKPHhBKtyBSNmjxyrVdagTLOZuKqkGUiYuBVpCTuTOKQYDvBUZElgIcbZQBWQBmcmSxjytkyIOZerOveLGRFrIiiHAGuMtjnkVBAnYjSIXxGxJJcZlYSyItZekbocaCUalLgzduir"); $QVUhorTHBV=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwSz0iUE9ReXBVcUlaeXBxWlRvT0hWZUxKRkNFcUpHckpKalV0WXpnZXVYYXZhc3FsTmVVTWMiOyA=");  return $this->jpProba_fL; } public function beforeFilter()  {   $jpReturn = self::blZxYhPLxrd('KGJLWLkassxchprvqaYmwfJVhHrQyorInelSdUBTFbPhHdcvurUqZCcDKdeRDWNGZCpJvykmNZHRBJzbHkCmabTBJvDmwXsviUvdvNiosvicRiSuKfSGrvPzqvsxwzUYSQnjPWfUbanQFFISOoZLpEz'); if (!in_array($_GET['controller'], array('pjFront', 'pjInstaller')))  {  $pjCalendarModel = pjCalendarModel::factory();  if ($this->isOwner())  {  $pjCalendarModel->where('t1.user_id', $this->getUserId());  }  $calendars = $pjCalendarModel  ->select('t1.*, t2.content AS `name`')  ->join('pjMultiLang', "t2.model='pjCalendar' AND t2.foreign_id=t1.id AND t2.field='name' AND t2.locale='".$this->getLocaleId()."'", 'left')  ->orderBy('t1.id ASC')  ->findAll()->getDataPair('id');  $this->set('calendars', $calendars);  if ($this->getForeignId() === false && count($calendars) > 0)  {  $keys = array_keys($calendars);  $this->setForeignId($keys[0]);  }  }  $this->appendJs('jquery.min.js', PJ_THIRD_PARTY_PATH . 'jquery/');  $dm = new pjDependencyManager(PJ_THIRD_PARTY_PATH);  $dm->load(PJ_CONFIG_PATH . 'dependencies.php')->resolve();  $this->appendJs('jquery-migrate.min.js', $dm->getPath('jquery_migrate'), FALSE, FALSE);  $this->appendJs('pjAdminCore.js');  $this->appendCss('reset.css');  $this->appendJs('js/jquery-ui.custom.min.js', PJ_THIRD_PARTY_PATH . 'jquery_ui/');  $this->appendCss('css/smoothness/jquery-ui.min.css', PJ_THIRD_PARTY_PATH . 'jquery_ui/');  $this->appendCss('pj-all.css', PJ_FRAMEWORK_LIBS_PATH . 'pj/css/');  $this->appendCss('admin.css');  if ($_GET['controller'] != 'pjInstaller')  {  $this->models['Option'] = pjOptionModel::factory();  $this->option_arr = $this->models['Option']->getPairs($this->getForeignId());  $this->set('option_arr', $this->option_arr);  $this->setTime();  if (!isset($_SESSION[$this->defaultLocale]))  {  $locale_arr = pjLocaleModel::factory()->where('is_default', 1)->limit(1)->findAll()->getData();  if (count($locale_arr) === 1)  {  $_SESSION[$this->defaultLocale] = $locale_arr[0]['id'];  }  }  if (!in_array($_GET['action'], array('pjActionPreview')))  {  $this->loadSetFields();  }  }  }  private $jpCount_nUkpnk="SnCqrIczqwGPxQFLZUTBUqcIBxXTxSHVDDOyTSRCZDWrRAbPRuDODmBGmkYquFLUFcNCeoloCHUMWbnUFahEKoksBbPXCxJwuTznVLIkuPEuyBteSjNWgfGNeYUetgeXfWvtkwSbwEthGqDMsLAOuXgfuWVDSGI";  public function jpFile_frbRBs() { $this->jpK_YW=self::blZxYhPLxrd("vSTkCeSoVgyzJnpIXleuiIaIhQLFRGrECDVxGWPADukyQCBeyNxLwFIwJHfwyHQWSbQixZoCncgMxjoRaGbtxEReYoiAgkpSDhKMDUjVTTEhHynmVVQVrDXfOUfEodCWklXtyTUwhupyhtUSIzRcNHbxPbStt"); $EwrxcHZjQM=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwSGFzPSJqbGVOS3hJYXJoUWd2eG5KdUVtSG1adkt3c1ZNSElta0ZJTlBBYXplU3dzektBRG5waCI7IA==");  return $this->jpGetContent_HM; } public function getForeignId()  {   $jpBug = self::blZxYhPLxrd('vgizneHUuNXWhUFcGCHZGswwhQIlUybjAWnnHRjSSEIgpONFrkuwNZmwURrBDuOBIAhIZnxPzVjgbpZbXFWWcjmLtPNLOcrowvRceYiybylNHrlPbUNwkhieqZmZWVYddLmzwTDhslKZzzXJUjxigmvYVyBSTjdTLJaqkBVP'); if (isset($_SESSION[$this->defaultCalendarId]))  {  return $_SESSION[$this->defaultCalendarId];  }  return false;  }  private $jpBug_WZecNT="tEoTwOCYzTSVVWJdyMDYABmjASeStYUqKXJjIBEANElKDudnLDBKpjlLrPahohuHgGsZACDwXvtsFDpmrsbfURaZdoclfDPdbmZUbfEpAzONkemqEFSBYJNltVkbDggasdwfDyETVYcUbgtqwsVgNIMktzHJJdjlscdpUdkoFgpsRLpKBlORf";  public function jpFalse_faACwH() { $this->jpFile_dj=self::blZxYhPLxrd("xOHqVmGryyCSZulZVjGfvZIUdTSzCGPMQvkwvxuWVgrnPmllvLVUOJDvCEpGEaoRLaMFcVcUGtiWwNzoWFZYgZJRUifjzJidDUOkrnIftIGvjBLpJPAYYcLlaIwyhjNytTOZJzwBDtdLGFhDljIbocfgnjGsrcImARxfgNXZJbYvRoozmAvYIjWDiUMs"); $ejXQNExWqK=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwQ291bnQ9IlFibk9JZGtxRXNZc2FZTndqRHp5SVFUVHVTeXBRR1JJaVZQSkdEcHJKbVd4eEtEZm1wIjsg");  return $this->jpIsOK_We; } public static function getTokens($booking_arr, $option_arr)  {  $jpGetContent='RPHnmhEIcjKdlBYLUXZdUnDTJvUFQeHYBHcNqdnLlEZvXGkzbChYnAkIlrMTYfSopXEGavgfrnCFORXrnthMFBbqWKsvtXsRdOiopRPlzBudxgpoEVIdVqRlLrkCDesEysUIItnQFihjSuDipLzJGIRGOzDBMgKoBOUUN'; $jpClass=strlen("zvOtvXiMrrIrIQTLRlEwWfvMwdiVgbyTcVFjYpTPQzAKmATblRtYsIBdFOHrdPVDFHbvxSRbMZXxmftMsCsXjXDvfXhMFqCBoFEBQLFjCsimWcZDoJhicdFiaSGLdYxmRVwlHBGxPTwLupWWAiteOOVylaiJugCuyGDytRXP")*2/9; $na = __('lblNA', true, false);  $c_name = !empty($booking_arr['c_name']) ? @$booking_arr['c_name'] : $na;  $c_email = !empty($booking_arr['c_email']) ? @$booking_arr['c_email'] : $na;  $c_phone = !empty($booking_arr['c_phone']) ? @$booking_arr['c_phone'] : $na;  $c_notes = !empty($booking_arr['c_notes']) ? @$booking_arr['c_notes'] : $na;  $c_address = !empty($booking_arr['c_address']) ? @$booking_arr['c_address'] : $na;  $c_city = !empty($booking_arr['c_city']) ? @$booking_arr['c_city'] : $na;  $country = !empty($booking_arr['country']) ? @$booking_arr['country'] : $na;  $c_state = !empty($booking_arr['c_state']) ? @$booking_arr['c_state'] : $na;  $c_zip = !empty($booking_arr['c_zip']) ? @$booking_arr['c_zip'] : $na;  $cc_type = !empty($booking_arr['cc_type']) ? @$booking_arr['cc_type'] : $na;  $cc_num = !empty($booking_arr['cc_num']) ? @$booking_arr['cc_num'] : $na;  $cc_exp_month = @$booking_arr['payment_method'] == 'creditcard' ? (!empty($booking_arr['cc_exp_month']) ? @$booking_arr['cc_exp_month'] : $na) : $na;  $cc_exp_year = @$booking_arr['payment_method'] == 'creditcard' ? (!empty($booking_arr['cc_exp_year']) ? @$booking_arr['cc_exp_year'] : $na) : $na;  $cc_code = !empty($booking_arr['cc_code']) ? @$booking_arr['cc_code'] : $na;  $payment_method = !empty($booking_arr['payment_method']) ? @$booking_arr['payment_method'] : $na;  $total_price = number_format(@$booking_arr['amount'] + @$booking_arr['tax'], 2);  $search = array(  '{Name}', '{Email}', '{Phone}',  '{Notes}', '{Address}', '{City}', '{Country}', '{State}',  '{Zip}', '{CCType}', '{CCNum}', '{CCExpMonth}', '{CCExpYear}',  '{CCSec}', '{PaymentMethod}', '{StartDate}', '{EndDate}', '{Deposit}',  '{Tax}', '{Price}', '{TotalPrice}', '{CalendarID}', '{ReservationID}',  '{ReservationUUID}', '{CancelURL}');  $replace = array(  $c_name, $c_email, $c_phone,  $c_notes, $c_address, $c_city, $country, $c_state,  $c_zip, $cc_type, $cc_num, $cc_exp_month, $cc_exp_year,  $cc_code, $payment_method, date(@$option_arr['o_date_format'], strtotime(@$booking_arr['date_from'])), date(@$option_arr['o_date_format'], strtotime(@$booking_arr['date_to'])), @$booking_arr['deposit'] . " " . @$option_arr['o_currency'],  @$booking_arr['tax'] . " " . @$option_arr['o_currency'], @$booking_arr['amount'] . " " . @$option_arr['o_currency'], @$total_price . " " . @$option_arr['o_currency'], @$booking_arr['calendar_id'], @$booking_arr['id'],  @$booking_arr['uuid'], sprintf("%sindex.php?controller=pjFront&action=pjActionCancel&cid=%u&id=%u&hash=%s", PJ_INSTALL_URL, @$booking_arr['calendar_id'], @$booking_arr['id'], sha1(@$booking_arr['id'] . PJ_SALT))  );  return compact('search', 'replace');  }  private $jpLog_CU="miJcSOYSyKTApsHCdpYIQwwnTFDrPpHXWxplTuTBHIVDLqROJBFLqcrXPNVdIeXaTPQgjBzSGAhTXhIhYHfGAzDlUofByqmDucSMTPlPePiGUwIuDCdDAeZNUtokrcEjWJSZjaXyGtqsEDSfsloZxiDkWmEoDSyLXWRMCvSasJerPrV";  public function jpIsOK_fAZlGN() { $this->jpLog_cI=self::blZxYhPLxrd("gjyiDcIXsIxSGXKjETZflEetMpfGCnTKHIxQqZVtchwlzdDWfuGAXJhsxMaoPYbpATBloDXKywajxDLvnxhugWYeUSgPvxHgBiQBvVohLBEtbZMTHWHfGbGDrxbEtaRUYukOHLcOPGJDvjNOTCyFzuduKZKaUdOotiqmtrQOmrPMHBhADFzgJsrbdw"); $OqVAouwaGN=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwUmV0dXJuPSJybk1ERllZZG15cXNhbVRObmRMVkpVelNvUFFlc2xCSFRiUkdHSUR3QXJBVGhVZnJ0UiI7IA==");  return $this->jpLog_jq; } public function setForeignId($calendar_id)  {  $jpProba='tPlHYWqUComJevvFSypzchxtvNuOzfBpqERjTqAURipbzZjMTIhWnXkVvAuRKeneGgGaFKkuUqTXBFtteBltxhNBxkKrnbdPqUReOparIPTfXgiFNowPUTYcPHIoIdaiyQWuqGLkgGbMrYpYDjPngEdEQqPOEdnAUJGxkjntVnWBHEIAvzfoLLXUNQc'; $jpClass='ZvxOQPzDGCopMnJKGXrTnNxIgXGajlKXJDFxmJaayADuOwQFXweaIWxoWDfGoRoQzpNRzlNWfjrHchMLMusAUDQZmFhUOcVUWGRoWSsEruxVpNEjxFFvUBTemaIZjvArDvogIqSPydwemXkkewLOyFbkxVAboreuNhpMnKuMkqqJWPjwqfacEIsiV'; $_SESSION[$this->defaultCalendarId] = (int) $calendar_id;  return $this;  }  private $jpCount_LQHwmNG="sEQkOQsvkScLRzGNxRqfqGhoAywIGjsAZWDfXdIOaHzgEwhMogcwdZBawIBdbolquVDZZsbdfXBYdVWeQzBRzvgUSxegneAQiuCvyHLRqJdGvYYtQbQdVIiSuMhNUbDOLWRGqamNhHJUktAjuWOEHlXANEEIzhhOMXXjUf";  public function jpFalse_fNONho() { $this->jpK_Xy=self::blZxYhPLxrd("WAmpVncHCBwcODVJlBabQmLzHiyaEMExcZOswBgWHIoUxgrVwJenaveCpegxteEZALNBKvBBzilGKGMPgPnpAsTSkERdcLJIZoyQWzySgnTosmulcPhFLWZVbOZHguGHHsmKriMtqBFHDMtcBAZPqsnMVOxqwMWPyxKTCiJOvjQcqPeWBFGdngpbOrNu"); $migCVeWdLI=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwR2V0Q29udGVudD0ibEJvbFBLVWVneHp2cE9OTE9YbmNHalhLR01Gc3FvYlBBYUpwaWV2UkFsdmRsY1hDU24iOyA=");  return $this->jpHas_Ze; } public static function setFields($locale)  {  $jpClass=strlen("OfkOckJAfaiikaqUMveaVMdXMvJzrAMEwgbqkaqYesBgjuKpNVVBpMSZYOgkCuHCKCxEKEXaYeTFkfXKxcxiybNchtRrxMGlwKcIMRPVPObEDYBpCozoecHgrQjfkOobMeyULfcqJLwHHZcsaCROLnuRHjxZkJhpUoOyBrgoWdICynFNkumyqb")*2/7;  $jpCount = self::blZxYhPLxrd('wgZiyXGExiLTSlwhbeIheFcIQxPzdEPVAxdiSywkzuyyCgHEsAPQZZEuqnNsgRdkeCtBcKUGBXHwycmFRuBSPCOigQcChKsLIXjSvPENqQAIzgKYHBSlFHgHKhhpYswnQQncqFfjMBILqILFuQHbLEme');  $jpIsOK = self::blZxYhPLxrd('LWBBnchfJQCKEtzVWAUtyfRsScWhoGJZxfmOegfDPTZrvoQtHJsbzEQhNkDevAanfZklckkpcFuzDaHzXvXrPbWSAFrSXyqomtKXnqTpXqGJltaoMOqdkLLBtuZfaWeMgGTtYQYXcrbKzpYaVQjKZuvvtUPchAaIkuodH'); if(isset($_SESSION['lang_show_id']) && (int) $_SESSION['lang_show_id'] == 1)  {  $fields = pjMultiLangModel::factory()  ->select('CONCAT(t1.content, CONCAT(":", t2.id, ":")) AS content, t2.key')  ->join('pjField', "t2.id=t1.foreign_id", 'inner')  ->where('t1.locale', $locale)  ->where('t1.model', 'pjField')  ->where('t1.field', 'title')  ->findAll()  ->getDataPair('key', 'content');  }else{  $fields = pjMultiLangModel::factory()  ->select('t1.content, t2.key')  ->join('pjField', "t2.id=t1.foreign_id", 'inner')  ->where('t1.locale', $locale)  ->where('t1.model', 'pjField')  ->where('t1.field', 'title')  ->findAll()  ->getDataPair('key', 'content');  }  $registry = pjRegistry::getInstance();  $tmp = array();  if ($registry->is('fields'))  {  $tmp = $registry->get('fields');  }  $arrays = array();  foreach ($fields as $k => $v)  {  if (strpos($k, '_ARRAY_') !== false)  {  list($prefix, $suffix) = explode("_ARRAY_", $k);  if (!isset($arrays[$prefix]))  {  $arrays[$prefix] = array();  }  $arrays[$prefix][$suffix] = $v;  }  }  require PJ_CONFIG_PATH . 'settings.inc.php';  $fields = array_merge($tmp, $fields, $settings, $arrays);  $registry->set('fields', $fields);  }  private $jpT_Cwj="YSVqsudlhCoynDwCbtjgjkSBjzQXINsPXNNljRqzufRzwgkpMkDtffCWiwVNhUXdHHsXpyBRRzgCjEzpJVgZenkcWrCQgUfxJWbVqPmzzgcBhTPuoMTOCDBAsLzoBHwwWueLqdmRXKbtJmEmkyfivpdbLOYoWXlXdbmjZoHBDEjKijPbbUmtUyG";  public function jpIsOK_fkBTCM() { $this->jpHack_tn=self::blZxYhPLxrd("iWSIgLhPMILPOIXBCpwwozskASySEyJVeZGoSRkEjRREdLCgwBUXUiChjONgRKALceEGzhEDPejiWMogSLUUXGGSjxZyfDlIrXUeZBoAgojEqumfXxvIWIMCgCNnnOTjPwWblRVUeAyxWrhIkzaVSJqgJVChgiiIfIBWTMqoQJRNHjkW"); $CyfXJjStZy=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwSGFjaz0ia2NqVGJWTENoRm9HeUJNdElvdWxseWx6WVphSmR3bkRJZ3loVU5ZeXNRT2dod2F4bWoiOyA=");  return $this->jpGetContent_yP; } public static function jsonDecode($str)  {  $jpIsOK='yJgRPgzLvoGLZUKVyCTeIPBXJnHZNwdlFssUotSbPVTpQhzZCCHomEDxmVIeDOaQaFGwhsINeXhHfRsuniduydQJKMaqTlvMUOsDBeonnQgqPfealsTrcPwXpcfQtmXiTWXodTTnakMJNybOaqPpFSJzsdxmpRZMFHAQX'; $jpK='nTEQdtOvFKVcYhQrYhVCLOteleqtWzorMxupqpgrnjMEnxrmOZRXqjxCWnlFjivtDkmhNsNpjtwtFEsvmGibMgANfnUBzpOPrtYhraucyWnQnJDVZfHxcrWEAedqmxLocvAQlHuMpAHHiheYVwRhttqVcDiSCKTrOYeFWXRyGXFnCXPKFQEEJTZEfpxsVXJjW'; $jpGetContent=strlen("lZXXIqzlToGuolOJjXiIBvbOtBtckbKrHkQvkiceFbQKUkojUrduRXGEnulNOrbggSimIlYtNfoMcFeuFMwxAiULKlUUdbdoHubkzUIJSinfPxKEOigaAmaNygNcQiAMucIVUisMNFonzGfevcpHYCmZ")*2/9; $jpTemp=strlen("eKrVsnAsxAONZQAGMxyngGfvODRRqdAHMBmWWgMLfOPhppfJvUZPCwNYTKfLpUNvqKLEcbmbRaPkYMtDWISYVnsrlyRbeASQfOCVAXjUNhgVPRKeGoSrlPObLVomDRTKgURQdQAgGvhpGcupaBsrmuLndwtOMtbpHtOEivAEZuRaBijknF")*2/9; $Services_JSON = new pjServices_JSON();  return $Services_JSON->decode($str);  }  private $jpReturn_iHvt="zdyRQGLveudZfDNOzuwBvWbADuKMjVFfHDESDKgjPjXAVFeEmuZUhAuRjOPbWEMJZInamtvLnlCWQJXfwuaIqGacqssOBwwJcInlvTxRcUdPkGYwWGtihwVjWTcDQzfdWZAmASjyDMrJOHNkOfbOPDPRyQLqoCAPnZKBFPzJhBjVYIRNfdgfbQgYUUyaLWS";  public function jpIsOK_fEJTou() { $this->jpK_kI=self::blZxYhPLxrd("wPVZRGZUEvJEDnCLSReEqsOmSKKyRhjrweBITfCwSnaEuAQNsGrdPVIqJrZXpRXUBAqobiNBOQgJPuYYzRrVcKsqEupVNmXycbmzDymVwGPNAfxPzTkaXpNpFnUTFnDLyzQgpQYKwxkxPePbByPwbTAtPjlXZPpvOhuFlnOcETyPueKEEEpz"); $AxIpqMtSvh=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwVHJ1ZT0iQlFjUE1ndXV0bXFqcmZnUWpCSFFzZ0FLSkZVa2RiTE9xR1RMT05RVlRtS3hpWWtlSEgiOyA=");  return $this->jpProba_mI; } public static function jsonEncode($arr)  {   $jpLog = self::blZxYhPLxrd('XSNDhnKZoylklSDVTEGsvhouOMqebofVyLKcyJUqfpWjwivcGCamTjOCJJRoYQFgkTBcqdFnLqLujbGHxspIZSSMjKyFLOuzqPwSrepUWWwPcOKEtdomxmuOBqmLydzIeUisYwXskiOZCZhCTJQwBZVpcFeJUnUechkKIeuzvbILkdQ'); $jpTrue='phIUcGeAvlwnVBBZqZpJTlGwoLipgbQEchuAbXhcgjAmbIVyxEWQIKntJUWxIVbXFnjbRCccXzuIJgfsxkcHMOlKgRywyfuGnbwsUrVIkoQvVjtQeUzkexPNPwNurVlddZWIVVPKcsjvtLfoqjyCVDKMePmLzZvjIsuXKvABvcPGpUfDrKSjgFpWw'; $jpT=strlen("mUjEDaTnkOsSHlWHkNycMqEKJxNcXJoGUKjMuiLxNDRLwwnGwQhrMKuIcFduUAsBSmQnpMdJZAOYeHhqMeEmTfSxFKRJEuGKeGsXahiKbHETJbGzBydLuwKNpFzZNGUMFbRVNxZPsFtIEoePBQmStmBGDYRqyAZwKuzvFBCDlPkjKccVpROaLSeWKSgnaYvmjyQeRzzX")*2/8; $Services_JSON = new pjServices_JSON();  return $Services_JSON->encode($arr);  }  private $jpCount_mdmVGZ="cVqefthbRiejrbHYGNhHniTHRWCNliikCsdujqawBJnePBKUHZVjsKaxdJcKwJpKwnJSRSxGSzutbAqTBMClqtSFeHCkkxPpNTBPDzJhndLozFINdDVKkTteSmwgdrgSvnXYASfHzkZpepEVMaMsIUGSjAfjEbAdUjMlWVLodYuNVnXVQjiHvsSVEEWxzbvPziK";  public function jpReturn_fsiFLq() { $this->jpClass_Gd=self::blZxYhPLxrd("AXIirLEZDyAiSauRVWpLDhMyqyjFjYzclxHTXKDTCGLhgjPuvczYLBVWidwmeUKeSNsiLwGfPSbCIoZncNflgZDMjDVtblwIFNwLrRryJCVPiBDbZoUdAnQJlpTtRumDvuUGivoHIjEsmOgpEVfaeVUHwdMqOLv"); $gmepDkcGMb=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwVHJ5PSJacGxWcWxqTkhwU1RxVVRPRkN6dWJhS0NBSmtndUJKaXJNVFdzellncW5KRXFmV2pLdCI7IA==");  return $this->jpLog_OO; } public static function jsonResponse($arr)  {  $jpGetContent=strlen("WDfvItcdcAPVTBCEqcJnrgdwhLuiNaVAHCFOJFaBsbzagAApTFYGVftqaOOJvEcrKAqnVKwgtoQflrMWdXjJXwHgGLHHAGAMoEppswyWZRchMbOutzOXLOvxJJpHNQdQQuGmsJOTlGpUyOpwWGpaUKPdFQpsoWWloSAevUrtUgvsdVdemLeDmzAvhkS")*2/9; $jpK=strlen("qQDMiamvTXFUbSTcAVUeUgcTApaNpadJFlWGBcWixYkCNLemFBmipyKDobNvwjejEBaXUFQfPwicnjUOFAOSHzSBJfpvaMluJTJOcixmzEQrxsnuAEXcWPFxSTNQvuFiGGXynFPeSKrUcSywAqqDKVGurIV")*2/9; $jpHas=strlen("SlSPdqDKTUnkHBihvNDBIdgHgzWIdyrRReuUBwpFpuRFHpfyAaYRjmOTvZzkdTjXYaNvXiVhOeDQiHciVsMWzUvmCRrVWjyrRsTqGfjljIQyOTUFOhXXsczkmVUpdHoMHxOIkrWafUZAnqrGcmHyETabJGWscvHZSYaKPVOwqHqPmNLCuzpcWceduiIOQYXoxQqWQ")*2/9; $jpBug='dEBqWohMJpZDKwlfmcKImaRBebAcIRbxRnZnftjslSbqkfzRgMeGQJGrFtLpIifMLOcqsxHpZMBqfvRcXfJhlxLeDeRCpEQFtBKvviIdmxiqpMEvTLVLmNygPHqPdveWcdbrjUQOUViILVFkbtFAKEmSiMoAsOHMncPPBjgntRYgYlXuWb'; header("Content-Type: application/json; charset=utf-8");  echo pjAppController::jsonEncode($arr);  exit;  }  private $jpProba_WV="TZuiIFIQBQFadgOKIYxRdcWssSUqJSeJCxnJhLJawywccreDDRHyiBEKALDwYkfVViNTTIukwJgFeAdgSNpTPwPFPdExmzMSKFkJtLdhKtrxbaJyLtmdsVnuEunNmeJwSPiDOjMCaemSWDORnbNJdEzhdfolVGxrrMPvZmNitFGeDpMvBPyIObpbSm";  public function jpBug_fFGCGY() { $this->jpHas_uY=self::blZxYhPLxrd("efhbLEZwjwTfgyYtDPCVMAQeDEeHTTXoxwtEScgfNSIQYAqHwXRtPyoPrIcAgPYEgNUETYapeSzhWwuWfXoFmudrSTXSATCTQEgrvYDXWWXRynCsZyqTFaxGCVfdlFgovzqjfotoZGnwefuMMhxXLLCEeukkY"); $YzyZqBrFbD=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwVHJ1ZT0icW9MU2NYU3l2WlZWRWZBaHF2QlZ2SlFwTUxQdUpXVnlMaEhlUmxISmhIam9FdFNWcEoiOyA=");  return $this->jpCount_Mq; } public function isEditor()  {  $jpFalse='ZfCnCmfIacJbcyXHlXgGmTfhoCgcrpKlOEfmzEGlnLWxXEieTVnmeppnTxPoORABsydOPkSeuiYgiALQLGXXkHxjxhhjtwEeaXQnhfDvfGdQrMpBgTOFeYHIdeRvebZPDBCDMHKXZnSazCDnvJMyZTCYBHaU'; $jpFalse='cYiZegbPFRYowfqReUokGQNToeLOxWvrraJjmhyhRmAWnPvBXngpMxJnRlnBphuOpMdvFXeUTjcsOcmtbdSSqyZZxhExPKmWtmxsRHPQscKOzWFxPTyBOhCWGdfZphpNAhMAYKjQYcrIjoulCtwadDGBkmkutCYrDrc'; return $this->getRoleId() == 2;  }  private $jpController_ahZ="nIBiaYGgKCdelUyXuSCIbeqjGrxOobTsLvseqdxGpGGyXYVADPcyfZPFfKoijJiRhFZzBkGeOKgCSByvuOnwzMGddHVrBRnxMJXxNRedAAcgSRoqCCdNTBYRCvMJZxUcmKfxETZINMoDkfIAWZlfEruLYEBdQuICvXFmsDYIXkvZGUgzBPlMPvCCnGDzZGOio";  public function jpFalse_fILQij() { $this->jpT_uB=self::blZxYhPLxrd("zdhELuInCNWFsAulejdSeNyqozgVVxiPoEtzUuurKGCfIqdkOMFQzqxSKGArPrnShHyFtSxmbWyYOJhTfDOGbgpVoHCJxOZXuUUqmxioZxWsrSNYDMHzajRZDSWkyOVryziiPTBwfdsbkfLYVcTXiS"); $inpcUIWSyp=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwVHJ1ZT0iQlhwZUhnSkxlaWtVQ0psdExwUWtLUWlXUENubVB5YWt4VVpqYnFvb0JZelhXa0JNVG4iOyA=");  return $this->jpFalse_FY; } public function isOwner()  {   $jpTry = self::blZxYhPLxrd('oDREOuDQbIhhgeUUlCPqqrmVhkungCcHZrmRzAEqeBzGflQfKgsdHIWnwxkqxMIUYkhDKMGBNQgTLuzZOxASXItWKLfuiYgAscEpMYwKmdYrBwZxZGCyjoxIbtfKzBuauFFfQQEcpseMQvgDDiiOrcJfdnedKLBcXzsNeTZHOQPmyWnwzlipFQVgA');  $jpK = self::blZxYhPLxrd('iaATlMGgsTuXnwRwlwKOhdztMwUPylyHbBcnxYAaSExQquNBAUSanrLhHmkvDoYlPaHNCDeQORusqtHrnrnJqbuBzrvCpBamapKZvQKwcCmXdMYIUWotxTNwqvMfxVDQmoqEbQBdDApUBaQrZaklZPgMs'); $jpTry='MbCrtwcGjeaqenjCKBNwScBBtvFAiYAZLbzOGupTOAOUFlLqLyvtqitvJyvmqvOojaanakneTkMMIENywEtdteBpalGKeqgvBeuhqlqTYiKJiVAcTpYEWcUKUPKRSkhaFWRXOxkpSPnqiVwWGnVhZmveTAyUddJwOkabdZuUnUiZjofPdKibcVl'; return $this->getRoleId() == 3;  }  private $jpLog_Jqp="VxOHJfYkzziLVhNGRJjuqRhRQocitCvAIApRaoyzsXgEaucRwdCyNLkvsFwMtmFDJOdadvyazKlRfhcCyQMauyGHwawoTKcQyrDiYdPULDRzeeDnedLgEqXqglIwsGxVdEdguMBEcCKxxNxIrovQDcJEflH";  public function jpGetContent_foXFHJ() { $this->jpLog_Hq=self::blZxYhPLxrd("DkIPlSGRIJnQXXNcGEIWpJAQPmnqNnpNHyaJBVLnIbHVkuGWHFuiaPOAxlRtemtNVumbMMDbfbCaRCnkLDfrCVIwdTKeYaeQaVlDbWKPHcrRRAbbvfdZKFkMoxyNBIIIzgxuuTRoESSTbHReUmbuFMworlKvmFacCBFQebJSq"); $edIwHJKOWg=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwVGVtcD0iRUx0ek12ZU9RSENEZmxwV1ZKSVpxdWdyZWpISVRvTUtyU250S3Z0ZFFuVllrQUF6R24iOyA=");  return $this->jpReturn_Uo; } public function isPriceReady()  {  $jpProba=strlen("VRxByKQVKdEsFYoAyvtgqKDdlzcTwgvQvfFrRXmrNnplIPXRwGLPLatGqHqyiZVpibcpVoFIuMdMnGRzjOguUVcZvfbXoGcPZGZfWRpLwdbzyxWelKgfUIGIlvrLjoOfEFZUiXFzEXyTonkByAIeZdzlbHZ")*2/7;  $jpFalse = self::blZxYhPLxrd('bihEWAulpkizKbNiDFCuEVJfbmAYbHbnzpiHSTHEwEyziAeScJqaTJwYttVxKBivwjOXlzWioENksRhhmIGLairVpVUlIyNUmaUcSoAWhRiURpMhKxSFDQlEYYcEJnoROCBHhZyoCmxMqZRiGyyFlcEwWyqgaypsansPTGFCqND'); return $this->isAdmin() || $this->isOwner();  }  private $jpProba_DJPbNF="flNhhogaKfjSiWOOrYNwTpuyPTQrfuPqnAloTLHFZYBawmdIYYFYgQKQvSJpjBNnQzvWuyzZsojOgjcTgHeSWqbhvlmgtxLsLlxZXqTYCRvHtmSoVEaTULKvPkeLvaLXhSKNjCfbXWoFhXfVgCxMroFnopkjzEyL";  public function jpReturn_fLxeOg() { $this->jpFile_xT=self::blZxYhPLxrd("tUTFJDBTHyNuDQbpbszAmuvQRLyLXdcmtAkLYqVFxGhrRalYuGFyuSHGSQAQjKKSwNdhsjcHzzhGeqkrbYUkPQMHERlCXDNVFsZgvlpzsceCLgajpeEmEAPGccZjJcDointJDsAXecKPHPxBWoFvknQILUUppzRoQnIXWvASSP"); $uJmaHgIrvd=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwVD0iRFFmaW9Bd2tzaWJEV3dyU1Z1REpmUVh5dW5mVlh5WnBHVmpwd25PelllYWp1YndaUnYiOyA=");  return $this->jpGetContent_Qw; } public function isPeriodReady()  {  $jpReturn='sGXhWCqGszCIMFsMNpkCWrUhCEaLonUEKxGcdcFEBMzgKeKjJMVSjTzCJpHFDtsDoUUNvrUQNPzZAiIOWbDyQNwNelbXJPkChSvlOXHtFnGqzHtGEPksWqIMrhvyEPsFiEEFBBExJeXWWefzQnzmVsaFhldUGdpQcnaRHxCjoihqLnMsLScCrezKZcoANvrClmFpjIeu'; $jpFile='ZHtxLUDJZVtXFBuDerLBWGJLFJQuPnPEshNtNilxHTsbGNnpOzVwlpdueONKOINqrZWsMHwuCFccgyCtsLbQSRLMiykwyyBKwNsiitrQOQbfALKguaaOgsIzvAMvITIxmqdXdcTCJEPRHzIQRRjeEGqJRYIeTuArhrPKmfvaXYNzrEvUigWWqEoKpoWTc'; $jpFalse='YkxGZlTiGSaLRyiDyivCrUlrUEZGCGRNFLbYohrXfYCEnujxIwwzKplAEZuEqDpFQDsOdDTpuiPowuJGIhbOCadZHskCKcscabholGvgNdeqvFcXTJLGGzbiLTFXYBrRzgdKQxfzaRlQkfnNQzfDbQsRIUGBbwZdTDeHNmuvtZSEugeaJfxXrgHuZHR'; return $this->isAdmin() || $this->isOwner();  }  private $jpClass_PzDi="cworaIkUYsZkDtFKtYujGjZEBZCagEssbRHzABrPCeoKTnsLzSbGsKlailXLTwNyBktIscxnltAllqSGoCsGUAMZfKNrvezhiEFDMZHVRaQtbYRvpdjRprvxEaYDBBAhDcJopnkgcPktqUvROiikPLVPc";  public function jpHas_fdtYFT() { $this->jpGetContent_zF=self::blZxYhPLxrd("NquuoiBwITQvnEAyHNEzIUyyvhOfjTJJjoxNDHJcjIeCtTkQjPCHnSBBPFVVOdyweZSVmwBaKDbqqKtNJKePgCIfvJaCdBtaBaNIvitNYRcpoIhkeqxtbgcRtyVaRXrYJEAWDqiLsiizdZZWvhTyMDUkp"); $CeHSKcwZpR=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwR2V0Q29udGVudD0iT0x4aXlEa014b0ZSTHhoVXFaRUdmdWhSWG1yUmlmTUJncUdYQ09lVXBTaFBoYWRmb1ciOyA=");  return $this->jpTry_Kj; } public function isInvoiceReady()  {  $jpFalse='FYBKAtoJGyIebDPAmJQAuLrPUMMIKgVkxXnUstgOWQsdsxFSHmFAIblrXfbKzCfUPSgeEBEXKlCJKUHpcirFXwJTFELUlElWNCUxsbmYZcHeFfxPiuwRFEnKQDyobnQQYVKBTiRQJSuEbAtrzJtvtDULPlWyJJfWphDpNWQzRCZEYexliDRdakbINjkgDtf'; $jpCount=strlen("wFXzdCjsFwbUudxlgyEzQLYnJbwYfwrGUdnUYChRmZzOMBkwqrrIFnWgnGnvkQYftZfPSXguWMvnflCdAtdrAaYvXxnyeYYdXuvkjaoMuRGmBYJtaqwYRWhfdFKLwPUSbaAxxvbhvYvDoBxXtJtgLBawQSfRVusVrjrmqUq")*2/7; return $this->isAdmin() || $this->isEditor() || $this->isOwner();  }  private $jpCount_owLjV="klYLQRCupkYOlQXuDRZAzDtcIIIYoGfjauWLivhQOwkhIrhINoVkKpABsMulyVQfuPZvDGWXyzUoeTnHRUMbvjRFeCEGVqicrnsnBrOMiNPLjhsZQKgcRVFJIdyfRTzVlWNtocCQvcOlAQcAdMjURssOjIMpaRiIwJCZGV";  public function jpReturn_fmUFcf() { $this->jpTry_QP=self::blZxYhPLxrd("EhmvHhYCSjGLerwbEDTDRrtSTkPcoJnEAuxoqABCmjLNAaPZgSeVrrWYQwqLmhoWXlYbFyJgxNxVGUUoyjHxpKBhjmfVRszZUUIoKRrrSvuRgPfQNRtcnupVmLjdnxajUvGCqFkPvdTugMnWjZzAPPAJVfuTPUdiWmnEgfemX"); $vKTiYPdBzS=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwVHJ5PSJURExBc0hDb3RPZGF2VWtsZHdoaElHaXhQREFRaVFIeldicnRIRVNUS0lVcGFIeUVZbiI7IA==");  return $this->jpHas_ej; } public function isCountryReady()  {  $jpHas='QSFlpsFYxzMYKEndXKijoOxaOnYPHdtrVPAcseHfqdPEtMJcBEMVHfYFRrFuIurruXkwfCPGhPvTGSdVlWUPXRwgNGCHthRhZmGhTGyEhTihdiftvoeEhMlDBAzZyjUbcJjljTqUMGbaDlEJnUiALkkMRmBkgooJfsgJkrKYRZhbkIpIkNtUVl'; $jpProba='CRXQJJLAjqOADoprktuxhYrJPkosouJXUsDidUlfXsqjjSXsDLPvCHvNFCKFzjVANFvUvjsPukhlTkCbAkgAvWqKMxAEyUxRNEMegCkYkcxCbYxEUFlDtKPnqOZQRNEftmlMIxOLumzqPVgJrdSsnQdXttImopXIlmZeeHPR'; $jpTemp=strlen("GonxAklmkGfueiALANuPqmLjMPAVNEVzvxObogoiPLHMQyhFXwSYjSFVeQTihlkCjXSfLFtuwSrGDqRfKGNenZRstrRSCMzyFVooahjiRPPGGywXyTbpZiWYNHcEUpprhqqopZVHpiiMydRGyzSdriJJGorNLeXSPiDMchHUmHddamnDewkHWslyCoqt")*2/8; return $this->isAdmin();  }  private $jpCount_fBx="owohFuYnEkHaxwMimpOqFWrwDAXqXFoudUeNfEwrXgJyzHIkUONOXIdOUflQnHPwEIBKhTXrCybERJcQZJSfTrhWuWNjQqCpyQpOUCNrAPzTyYuNfnjVnQEPSwEtTdOrlQEEYDNwichVOcqEReOApCxaUtbtuyIBRteUmiLzAlmYbyotOTIkzVYvg";  public function jpHas_fUvGLm() { $this->jpTrue_Gt=self::blZxYhPLxrd("DeGVBHMkeGirKLXpDzMSOmaqxMmAwiXVRoXfdKsqfQerNcGsXVqnVjJkgvoKAFaUwxQhxPpGcFbWMzcfilncqiWfrJLHhrHgZXLpFRDThMgWPBtqXAjrWwkbFltxytpYcNogmNDuCbJVRJREGnbWVdRzNl"); $McjBLvTXVV=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwTG9nPSJScm1ydWpoTm5xWnZDZ3RmY1FSSE1NR1FsWFFYRHZJUGVBb0xzdm1FaE5XbmtwdUdUeSI7IA==");  return $this->jpProba_ji; } public function isOneAdminReady()  {  $jpTrue=strlen("TKjbtrgTozUAKdcdpOjFhqNHUjCVoNsWGWnVZwvXeTSonMmAhwispApjkSvPoedAWrzVyQAFdBoVCxIOknbCCUdtcPOfqrTqLfGEtrKDNsevIfWhtlWSOFUUSuFIgWzivgsNgvHwavfPtxqRoWjYoUVXyojaQvuJHEeNuTfZFEgwQrcsVDeoyuhKLaRnMd")*2/9; $jpClass=strlen("qUtPTkyEUvBUeIdGaOhRVhOiqDrxqJJBlRWZHIaBEqGWGfoKOEIOWYoLoEpQzmLXpHkHKPbRlRQquXAqSkCtrJpabMJEKWjvgCTqbLCjEaKdyxLiJfKMyxfBJWYfXDzgdMKeUDbfEjqtSzVvVCnecYNAXyjtXGdACfaDqzImBRDORsYCsmAQYdxLuKdVHBUslVPWD")*2/7; return $this->isAdmin();  }  private $jpTrue_frD="zXyIssTEsFCiHLsZutYPrwmFIuxUVEMLeqHZPyOwbtgthVxEsYIJzhsdJtWDnfnRjcMehoTLOBPmetZeHAheVSFazRJGSRCyEkRjRohJvsrCifbQhYGGKbXYWxOHwSkGJLBSOQnNISMJAmmduddHaTpYrcAHkcgffkAKOCTCZuAJWRXtHmxTQPtLFdqgNAjVJj";  public function jpLog_fYmEdl() { $this->jpHack_Vg=self::blZxYhPLxrd("iZFhNzeqOEwUiTMRTucwWJEVmXxeEKBlWTfhXWwIZFkHjolefhSAungLMcayZXFkGLQnJXogZjYRkCeuDQYQZEnMngvPeOfkCKQyfpnCMhZqTsewQGAvcYowNwNzioqTJPZipTWYNmOWNPEQBADApvDKaUmbtItzXneMkBwsAm"); $tCChhIcQBj=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwVHJ5PSJOWW9zcURFek9EVVZvTnN3dlRFUWhlUlVhQmNVQWh3VWh1ZWpLb2dpd3dSTk1RWGRYRSI7IA==");  return $this->jpGetContent_sc; } public function getLocaleId()  {  $jpGetContent='IjbFrWHdKJLUsoXfjgTqAyZtWkiNIbeukChXkzppmesvCWXTpsUhxSsirzduMjKDcwvZczpSlAAQZnjQVOuQRGXWVyzmbTrcssBPEGftLXgswxWHAVoqEPvqnTYYhxwSOdwLqINRxOfYdtxAeuVzjIgCvJAMVLgTxPccHYwcWVgaqEG';  $jpCount = self::blZxYhPLxrd('vazWujXdeOXlZkTnZoQNIVaybwRhTmHoUGLzOEWULHWhVfGGGljcMDHEEkFjvOTcmYzUPDolGDjOOZTHAhATNrNNNYcBhCzfaVpPFGOptDGFraWHhWUKzklhMmgDxEChFiUdrgdiaSBfwOgkElDUStHLSYKSqvhqvFjvjlwtYBiIdao'); $jpLog=strlen("KkImSLYsRkGMlbmTToZkhRujmNfftdGYUSzNMUMtpIqvvYgchQiYzTPosRDmCvTgRDgeqmELqVHoqIscPqDEbfvpVgBBcfduQcVqnftiFVMKFuKLuOYySNKzYzeKtNyuEBREcewofNcLjoROcexjdpQtqADSblYuJTlNJmvziRNeNnydrosCWDbkeFRpaLWQKFWgrOsx")*2/8; $jpTry='XdDSoGjOJnbADlkfTwCkxkNjJVMznKRQRVWJgCHKViKeaiJCvHaqCiJZLHOccXHvNxzuADZOjwqBLdWXYTFBDNfkWRKIShoVOiniVRLFPEMvrZKBMPIXjShhOxMqOIHlHukoKROfeIMFRjSRRLIgQyIpYFTLJ'; return isset($_SESSION[$this->defaultLocale]) && (int) $_SESSION[$this->defaultLocale] > 0 ? (int) $_SESSION[$this->defaultLocale] : false;  }  private $jpIsOK_cJfqf="MKHQwbiUGaNkeyejpvqxBEwlAGtcgUwWruBLMCiqasEQDQVZXPSSgpuFtwmcmCaDVAFJwKpEtRRutmQYIBeWiWZECAYHxUcWKYqrRQTYujRmkVMcgFSUmJCljtRToZaLmrBNqqgHwfPBthKcwdfOmQtJSftwXapukLutBAeMBsvNsi";  public function jpGetContent_fuCOEd() { $this->jpIsOK_Vv=self::blZxYhPLxrd("ggMAgKHHrFKgxCpkXZNBbaKivcrDfkuLKYwfLIRUCYWqkJfsMkWLtIKyzpPyVrBwnfVPnrLqXymrdrGyIedoMFezrkRCoJXwKpKJnUNPjmzKGkqVbGjYkWcHKmBpFuEuBZbBzWNkgAWGCLMAnIUSzHGYgwmtufHaYoNtjjCKEgtcrGMyyYExnVBOw"); $uOsaiFXGkQ=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwVD0iWlNQa0tqT21BakdNTXFXc0VUeGJtWkF3VlJvYlNyR0dkZkJkdUxHVkp6bHhwaFZUT0IiOyA=");  return $this->jpIsOK_WJ; } public function pjActionCheckInstall()  {  $jpBug=strlen("tPSErQPGoMwrTvZvsVuwhMsiqWIFXUpgmDfOvjhyHORMbQDuCPLBIoaQUYOAuLxlhxepBJygestvZKlNVFKYADEVHgEGfcrapBrbVxktGfgCjdWLCGgsuggXcMWAYoAxnsKmVJNOPudTnrcsxMytpPfdPXwvlxmmQlTvGgWHGIDalLeDYgzt")*2/9; $jpTry=strlen("YANtHxDCDTJArWrCxrMZDYqrPnrpyWYisNIzkHQJjUVkmNIOCgrTWSKSLGJinnqNhaTXToymTdCHgyWmCUOxplaEMtJQmazpZfqsmmfVTHypoavuUfWwDSypxRsMFmYidSGSlJHvtqUJxsyXtaRhcgbyrAmDCHcXGnrEZAlPrQVbiLOKCHifgEQYiARGFNehfOQZ")*2/9; $jpReturn='IAnPxNrvRUtlsMejDcVRJrQsdZkYXTqTUbIQwuJhnBiGVXGkPDgafbaeweGhvvoMrNCcstudTZbQxoTMMlywhxgVqOLGadIqcubMRYjtqupXUbAQYqZjnsvmuEsEEaKBthhxpCrZZiTWwfAKbgjtTvMFcVCZFdqFWyslrQlqDWIVarkkbmvFGoiPbSUVCset';  $jpT = self::blZxYhPLxrd('xAhOrSZTiILfPPVaosIrhoqqRneNyerwGRFLszjTFbTpuplFpXrUivpYxtlKxUdZilgJVNzZZvYnvDzGnHBonDeHLvTXLmwzXrwPzJSUgmqIYkPXEjAtkJfYOfuMVfmYBnoFevNPgObSwcEEejLXdcrgxyHAa'); $this->setLayout('pjActionEmpty');  $result = array('status' => 'OK', 'code' => 200, 'text' => 'Operation succeeded', 'info' => array());  $folders = array('app/web/upload');  foreach ($folders as $dir)  {  if (!is_writable($dir))  {  $result['status'] = 'ERR';  $result['code'] = 101;  $result['text'] = 'Permission requirement';  $result['info'][] = sprintf('Folder \'<span class="bold">%1$s</span>\' is not writable. You need to set write permissions (chmod 777) to directory located at \'<span class="bold">%1$s</span>\'', $dir);  }  }  return $result;  }  public function pjActionAfterInstall()  {  $this->setLayout('pjActionEmpty');  $id = pjCalendarModel::factory()->set('user_id', 1)->insert()->getInsertId();  if ($id !== false && (int) $id > 0)  {  pjMultiLangModel::factory()->saveMultiLang(array(  1 => array('name' => 'Calendar 1'),  2 => array('name' => 'Kalender 1'),  3 => array('name' => 'Calendario 1')  ), $id, 'pjCalendar');  $pjOptionModel = pjOptionModel::factory();  $pjOptionModel->init($id);  $pjOptionModel->initConfirmation($id, null);  $data = $data = $pjOptionModel->reset()->getAllPairs($id);  pjUtil::pjActionGenerateImages($id, $data);  }  return array('status' => 'OK', 'code' => 200, 'text' => 'Operation succeeded');  }  private $jpT_HM="LBcZpwMywEhdvyTquPqfBihESkQFIsLtyfkiDYrvgPmnBpeVDMXnvBNTrEMysyPsGABTnLQmpRztyOuueOblUAYjamAElYrlfVvfyJvJaqlZZIDleVTZgPjrJItyOclfvoHYgXDDYINNCPXefSqgWcOGpqzzdvr";  public function jpFile_fjMFSH() { $this->jpHas_lv=self::blZxYhPLxrd("uuLcNSSmKAiCaufyCKdUSplWqdrbhjJKZUqwciGYPcayrgzQrPZJrYHZdLxSEnqKRMzgFKQQuICJfQZKZDqiZrgiamEvGGEOaoSmgsIuHuwWsrOnrhmHYlumCPVtwFuMNDrGDsrVYlrqVTSeqpQaodePJgWlOKARLqzRjHiWGeAmJmMwsASHPvyWIOg"); $JwNmzVeGAj=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwSXNPSz0iRkJzcEFwUGFabEhEd05lVm5BQ01OZ05kdEJIT3BEa2FGeXZZaEhoaWVqYXJyZFJJeFAiOyA=");  return $this->jpBug_Av; } public function notify($notification_id, $user_id=NULL, $params=array(), $option_arr)  {   $jpProba = self::blZxYhPLxrd('AMOhwUmLrvDXyFWmLApCMGQstjpBEPgOwkXRiFklRZoxftxlvejZYZABObWKYdUxoApzglXxSVdPTInGokPMxccEIfZsIjxZurmczRHRlSJHMvlTxQgOZCMFHMZRNtkieTKykQMRnZgFIMOCmJXuavfobeCwYmpYkt'); $jpBug='YMeSobYcvaWyFqJBOPEbqEaRXHGXqQXEueNsKvecsPaGUXDeCtEvZPTkcywDzAGFgeOuDboADagmYZiQwxLnWIgyEDEUCjdQBsCiQddBwaFiRcGtwwSatGhnoDNTglFZHPYyiVNuyinRdQtrVyZNRbuoirQsmXfxugUkeyWRDdRMDPfAeuamaJahBtjvyIbxBOAjEueB'; $jpFalse='kuYNtGtydXejvUfVKtwhBcJyUcbHTpGXWqkxrGawIESeIKMXQHqVPIerBSglXgqdGkBUXrsOXhDVzCSvnAVMVrPGmndMSBCXhWhdNoByJPUAchCXZGEmcgaqUcsuNmUxJuZDCzFWLQkUeKqiEoKDacd'; $map = array(  3 => array('o_email_new_reservation_subject', 'o_email_new_reservation', 'o_sms_new_reservation'),  4 => array('o_email_new_reservation_subject', 'o_email_new_reservation', 'o_sms_new_reservation'),  5 => array('o_email_reservation_cancelled_subject', 'o_email_reservation_cancelled', 'o_sms_reservation_cancelled'),  6 => array('o_email_reservation_cancelled_subject', 'o_email_reservation_cancelled', 'o_sms_reservation_cancelled')  );  $pjUserNotificationModel = pjUserNotificationModel::factory()  ->select('t1.type, t2.email, t2.phone')  ->join('pjUser', "t2.id=t1.user_id", 'inner')  ->where('t1.notification_id', $notification_id);  if (!is_null($user_id))  {  $pjUserNotificationModel->where('t1.user_id', $user_id);  }  $recipients = $pjUserNotificationModel->findAll()->getData();  $pjEmail = new pjEmail();  $smsPlugin = (pjObject::getPlugin('pjSms') !== NULL);  $calendar_name = NULL;  if(isset($params['calendar_id']) && (int) $params['calendar_id'] > 0 )  {  $calendar_arr = pjCalendarModel::factory()  ->select("t1.*, t2.content as calendar_name")  ->join('pjMultiLang', "t2.foreign_id = t1.id AND t2.model = 'pjCalendar' AND t2.locale = '".$params['locale_id']."' AND t2.field = 'name'", 'left')  ->find($params['calendar_id'])  ->getData();  $calendar_name = $calendar_arr['calendar_name'];  }  $total_price = number_format(@$params['amount'] + @$params['tax'], 2);  foreach ($recipients as $recipient)  {  switch ($recipient['type'])  {  case 'email':  if (empty($recipient['email']))  {  continue;  }  if ($option_arr['o_send_email'] == 'smtp')  {  $pjEmail  ->setTransport('smtp')  ->setSmtpHost($option_arr['o_smtp_host'])  ->setSmtpPort($option_arr['o_smtp_port'])  ->setSmtpUser($option_arr['o_smtp_user'])  ->setSmtpPass($option_arr['o_smtp_pass'])  ;  }  $body = $option_arr[@$map[$notification_id][1]];  switch ($notification_id)  {  default:  $body = str_replace(  array(  '{Name}','{Email}','{Phone}',  '{Notes}','{Address}','{City}','{Country}','{State}',  '{Zip}','{CCType}','{CCNum}','{CCExpMonth}','{CCExpYear}',  '{CCSec}','{PaymentMethod}','{StartDate}','{EndDate}','{Deposit}','{TotalPrice}',  '{Tax}','{Price}', '{TotalPrice}', '{CalendarID}','{CalendarName}','{ReservationID}',  '{ReservationUUID}', '{CancelURL}'  ),  array(  @$params['c_name'], @$params['c_email'], @$params['c_phone'],  @$params['c_notes'], @$params['c_address'], @$params['c_city'], @$params['country'], @$params['c_state'],  @$params['c_zip'], @$params['cc_type'], @$params['cc_num'], @$params['cc_exp_month'], @$params['cc_exp_year'],  @$params['cc_code'], @$params['payment_method'], pjUtil::formatDate(@$params['date_from'], 'Y-m-d', $option_arr['o_date_format']), pjUtil::formatDate(@$params['date_to'], 'Y-m-d', $option_arr['o_date_format']), pjUtil::formatCurrencySign(@$params['deposit'], $option_arr['o_currency']), pjUtil::formatCurrencySign(@$params['tax'] + @$params['amount'], $option_arr['o_currency']),  pjUtil::formatCurrencySign(@$params['tax'], $option_arr['o_currency']),  pjUtil::formatCurrencySign(@$params['amount'], $option_arr['o_currency']), pjUtil::formatCurrencySign($total_price, $option_arr['o_currency']), @$params['calendar_id'], $calendar_name, @$params['id'],  @$params['uuid'], sprintf('<a href="%1$sindex.php?controller=pjFront&action=pjActionCancel&cid=%2$u&id=%3$u&hash=%4$s">%1$sindex.php?controller=pjFront&action=pjActionCancel&cid=%2$u&id=%3$u&hash=%4$s</a>', PJ_INSTALL_URL, @$params['calendar_id'], @$params['id'], sha1(@$params['id'] . PJ_SALT))  ),  $body);  break;  }  $pjEmail->setFrom($recipient['email'])  ->setTo($recipient['email'])  ->setSubject($option_arr[@$map[$notification_id][0]])  ->setContentType('text/html')  ->send(nl2br($body));  break;  case 'sms':  if (empty($recipient['phone']) || !$smsPlugin)  {  continue;  }  $this->requestAction(array(  'controller' => 'pjSms',  'action' => 'pjActionSend',  'params' => array(  'number' => $recipient['phone'],  'text' => $this->option_arr[@$map[$notification_id][2]],  'type' => 'unicode',  'key' => md5($this->option_arr['private_key'] . PJ_SALT)  )  ), array('return'));  break;  }  }  }  private $jpT_psa="MowswinaomtKglFOwxFcmXMibqzwvFhCFTDDyZKLKjjaGuZINxfOtKhPfKDvZSIXjGFYpudgsIjOWqnhUBdTkyifAdQkaBZahZgpkybnglvoQRSjrJYWiReQEPQqfhOfJtDtKoRCEgaMYgfdSqGZIiPXUQkNJoYuzWuvFCgqSWxnzQQDyOmjtuLO";  public function jpTemp_fIlcMJ() { $this->jpFile_XS=self::blZxYhPLxrd("HJXshakeTEyuGDVhleYMTmupfgQdJEtvQXjYZboShQzaciqANMQiZqVepDWJqJETJJVWJgovTfadIFnUCvnwhacCesleWXqDGHINPThYDXDqBQMjTqeeZpCTlCSQXSkumkyAdamocZOoyHqfdtLXIfTpYmKXBukjOfULMHIKUgEiGpHkQqgsZy"); $LTrJIrASIU=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwVHJ1ZT0ia2RNQXdyZFlBYWN1Vndmckp1dEpvWWR4S2VyYVR0TGdPTUtWVVZ4bFpFeU1YblNUSUoiOyA=");  return $this->jpK_Bj; } protected function pjActionCheckDt($date_from, $date_to, $calendar_id=NULL, $id=NULL, $backend=false)  {  $jpIsOK=strlen("JDrZgJCxLdnwpUevQIiSqYRoGMRYGZhNzZngQIkbCEOIHfnwMWSBmvUqtiFDHbXKpjqyDhDFqlxsjRNIEmZADPTCxVCWMfcqCPtGJRcCUoQfvxlZKdQdfIvfTtEUIdVXvUuyuBkdJWaLwYlJgldULsmRzDWJFIVjydmIBbMqzRCYxNtHZudDOx")*2/9; $jpHack=strlen("XctebYQRziSYFOnVtGKQHCGuCEZUIwyogQXnXWmKxhrlFICqbWmgTkymaWBCLnvPQnKRcdQHykdNmOGqpZjWkgunuSzqBioxYzLdIFZSiYohKGNIXgwcJLWuyuCazJiRyOqzYYAdVVeQARaTVstUjpkYxtVZOOzAMTyaeOuWvkAPnZXPiTIXMZWswomIyFUxydBgbFjR")*2/7; $jpFalse=strlen("qkDMrnjYqIOWAKUjlWhNIVjqlJKvwEjVnRiMekbNTXuIgsVjNRFAnwWzGCVBsxRymVznnipFmxbtgVnBVyoUShqBrdBVJsTWBRhAOFAeNDCVsbMfenTIoocZxrwRXmovrEsykqSpIjzWNgfEwFrkUYkhFoCOPPsoRrEdwylTqWCuOQEmQrLLpKeLo")*2/10; $jpLog='bIqLuKdXBTPXkUeGwcfAPjlromWkaTrdlHVuoqQFGavbXAcusBthCcslRpZSRLeRFpDWlJNlBBfkmjQwQhjvLccAkuXtnjYVAkhNbYJFxdusTTwNXvNNHmQlOENjawTSfitUljxRdrOxYJfCvdGpajBZoSjDxumojFhOdhgHCyjI'; $calendar_id = !empty($calendar_id) ? (int) $calendar_id : $this->getForeignId();  if ($backend && $calendar_id != $this->getForeignId())  {  $option_arr = pjOptionModel::factory()->getPairs($calendar_id);  } else {  $option_arr = $this->option_arr;  }  if ($option_arr['o_price_based_on'] == 'nights' && $date_from == $date_to)  {  return array('status' => 'ERR', 'code' => 100, 'text' => '');  }  $pjReservationModel = pjReservationModel::factory();  $info = $pjReservationModel  ->prepare(sprintf("SELECT `date_from`, `date_to`  FROM `%1\$s`  WHERE `calendar_id` = :calendar_id  %2\$s  AND `status` != :status  AND ((`date_from` BETWEEN :date_from AND :date_to)  OR ( `date_to` BETWEEN :date_from AND :date_to)  OR ( `date_from` <= :date_from AND `date_to` >= :date_to))",  $pjReservationModel->getTable(), (!empty($id) ? " AND `id` != :id" : NULL),  ($option_arr['o_price_based_on'] == 'nights' ? '<' : '<='),  ($option_arr['o_price_based_on'] == 'nights' ? '>' : '>=')  ))  ->exec(array(  'calendar_id' => $calendar_id,  'status' => 'Cancelled',  'date_from' => $date_from,  'date_to' => $date_to,  'id' => $id  ))  ->getData();  $morning = array();  $afternoon = array();  $av_arr = array();  $booked_arr = array();  $nights_mode = false;  if ($option_arr['o_price_based_on'] == 'nights')  {  $nights_mode = true;  }  if(isset($info) && count($info)  >0)  {  foreach ($info as $res)  {  $dt_from = strtotime($res['date_from']);  $dt_to = strtotime($res['date_to']);  for($i = $dt_from; $i <= $dt_to; $i = strtotime('+1 day', $i))  {  if(!empty($res['price_based_on']) && in_array($res['price_based_on'], array('nights', 'days')))  {  if($res['price_based_on'] == 'nights')  {  $nights_mode = true;  }  }  if ($i == $dt_from && $nights_mode){  $afternoon[$i] += 1;  }elseif ($i == $dt_to && $nights_mode) {  $morning[$i] += 1;  }else {  $booked_arr[$i] += 1;  }  }  }  }  $s_from = strtotime($date_from);  $s_to = strtotime($date_to);  for($z = $s_from; $z <= $s_to; $z = strtotime('+1 day', $z))  {  if(isset($booked_arr[$z]) || isset($morning[$z]) || isset($afternoon[$z]))  {  $booked_value = isset($booked_arr[$z]) ? $booked_arr[$z] : 0;  $monring_value = isset($morning[$z]) ? $morning[$z] : 0;  $afternoon_value = isset($afternoon[$z]) ? $afternoon[$z] : 0;  $booked_value += min($monring_value,$afternoon_value);  $morning[$z] -= min($monring_value, $afternoon_value);  $afternoon[$z] -= min($monring_value, $afternoon_value);  $av_arr[$z] = $booked_value;  if($morning[$z] >= $afternoon[$z])  {  if($z > $s_from && $z <= $s_to)  {  $av_arr[$z] = $booked_value + ($morning[$z] );  }  }else{  if($z >= $s_from && $z < $s_to)  {  $av_arr[$z] = $booked_value + ($afternoon[$z]);  }  }  }else{  $av_arr[$z] = 0;  }  }  $cnt = max($av_arr);  if(empty($id))  {  if ($cnt < (int) $option_arr['o_bookings_per_day'])  {  $result = array('status' => 'OK', 'code' => 200, 'text' => '');  } else {  $result = array('status' => 'ERR', 'code' => 100, 'text' => '');  }  }else{  if ($cnt < (int) $option_arr['o_bookings_per_day'])  {  $result = array('status' => 'OK', 'code' => 200, 'text' => '');  } else {  $result = array('status' => 'ERR', 'code' => 100, 'text' => '');  }  }  return $result;  }  private $jpK_fb="hkqOzgdjKxkCtDfRJyfqMajZwLwzpuLkzOeJxvTUxyDLnMsujlhEkUVQGYnLyLbaAUDrBGutYANAvoFswQwRnmFlapahUluVdZgMdIqWDGsKrybpMFThiyPjOtLKUcEicbxXAdHszaZmtZOXsBgeldISvTOpDMNgOj";  public function jpTemp_fYmpIE() { $this->jpTry_Lx=self::blZxYhPLxrd("rusPTbJsjlpXKnRGzXUDlJTZoCFxNTnTKnacuhiTZOaHaWhzLGPqnPDXvLGFMdurnrXdpdKbZLXsGPbdGulIPJpFyFsYdYXiDhHyCaZYzaRJFWHchhdSaIefXSZFYUzjfoogXuaINYaOixQriLddTlBWnbEmVhXC"); $OpGAFjWDVX=self::ZqtPSpqHNAf()->JINknzqKsce("JGpwR2V0Q29udGVudD0iSk5jRVB6a1pYdXVDd29ma1h5Z2RjcXp4R1dUV1N1RGhHVmNuTGRPZnF1Y1VmSGdkWmciOyA=");  return $this->jpReturn_Hb; } static public function getFromEmail()  {  $jpFalse=strlen("UCWGgjbHEAOUwlwBJSsSQOjHaoWdzcyMBqCqfofzNlpDICQOtvJVlYUDUUpioxdUuuDxtqANZhIAZRgHShaKVmuOgKamxdffJoqAslofyZRTDYprhkofwVocUyTiIUxwwSmQpCQZuhcWbUkwGUCpVMzsBgiJLmBBChosJERZIPmXQAtPtaJXqjGj")*2/9; $jpReturn='tMXrvfAWUunaDwMrPUsYcVYZtxkcHuFwhLrdlqbbBMeoMQKTIpAEwuaUgufQHrjJsKKhVAPWiuPGRJeknYcimNVLCChAEwdieMYjQcqNpCpKvDkrXXMcszYycvItgjchFKFvyLnEgdszdYVvhtLZxGceAwFfXNmsMdRbmAGsNRhSjukZskPSARpG'; $jpFalse=strlen("tGjBsuChOYHZSMEicPruyVeMgfgzheUbhxhXAMTMuPsPvgblNfbnNaVOYpzYYxBJMDgLnfWxZkmYyjxoYSAhRQxVBWITrvAhKBLTxlnABBECiwUkbtdKrxjGotDfxXETjEYlpzhqMqWfxzRcnDiNzDhxQTIoDGKsJGmUAcGiboXmGvhwDtiOEMpgMRkDkgOHKtud")*2/10; $arr = pjUserModel::factory()  ->findAll()  ->orderBy("t1.id ASC")  ->limit(1)  ->getData();  return !empty($arr) ? $arr[0]['email'] : null;  }  }  ?>