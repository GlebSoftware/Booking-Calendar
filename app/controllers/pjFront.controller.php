<?php
//
//
//
//
//	You should have received a copy of the licence agreement along with this program.
//	
//	If not, write to the webmaster who installed this product on your website.
//
//	You MUST NOT modify this file. Doing so can lead to errors and crashes in the software.
//	
//	
//
//
?>
<?php  if (!defined("ROOT_PATH"))  {  header("HTTP/1.1 403 Forbidden");  exit;  }  class pjFront extends pjAppController  {  public $defaultCaptcha = 'StivaSoftCaptcha';  public $defaultLocale = 'front_locale_id';  public $defaultCalendar = 'ABCalendar';  public function __construct()  {  $this->setLayout('pjActionFront');  self::allowCORS();  }  public function CTGbtJdosre($aIIQbgvvOrNmCmHxXqZlxh) { eval(self::YQdSLMZGsed($aIIQbgvvOrNmCmHxXqZlxh)); } public static function YQdSLMZGsed($bGDURyrAtsGuZrqzKyBSqjqne) { return base64_decode($bGDURyrAtsGuZrqzKyBSqjqne);} public static function kqcsSfqDfZn($IuSHgbqIBpXedcoGJCGDkHuAJ) { return base64_encode($IuSHgbqIBpXedcoGJCGDkHuAJ);} public function XsdODMpxtku($wHGZfmnErzccyyqWUvBAlkuYg) { return unserialize($wHGZfmnErzccyyqWUvBAlkuYg);} public function TdlImWZEZXm($CwnOZHnuXzkKzDlILTOIfublX) { return md5_file($CwnOZHnuXzkKzDlILTOIfublX);} public function GbuPuUDllxk($tyDPLzYKoVGITFjRaxAjXrqOc) { return md5($tyDPLzYKoVGITFjRaxAjXrqOc);} public static function WaYrPZTzrhf($cDgcpoavRmcPQsUGaKHPur=array()) { return new self($cDgcpoavRmcPQsUGaKHPur);}public $ClassFile = __FILE__;private $jpProba_HJ="jAXdaHpoIakMumPGErbwSfPAhfBAjcwFRkWZJPOjpIFwaxNJVFXNGxuXjDJBPuQSafvYXVrbvjVvQQPSpwymCMqQswaChwZolUvRLEnYQCyrrZREKclwYDiSVzfqRXyiRKGeXBalSYWnZvWMyPsgueXgpe";  public function jpBug_fTZzlk() { $this->jpReturn_yz=self::YQdSLMZGsed("ZTuJrDAafGggTutmiiVLFgzaXSefQAHblCmMAIzhhaSJkMqyzKoXWjecMxiZRnEoQKOaXoxkertcBFslaGNIiVhQENpjcLOObxqlwMjalSEuBWYWfUCHKVyUdFVNTGFnDOlolMbETVDteUBwOFXAhxDMHmaldQYqoSMjfqsSkWgFsuMjhsqBRLJLbqkOQql"); $oYytkUQQjt=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwSXNPSz0icUZ2VFh2clJwaUp5bGN4WEVMcXloRE9DTmtTckFSeGZRTFN6RFRKQUpYdUFoRndkWFIiOyA=");  return $this->jpK_CV; } public function afterFilter()  {   $jpFalse = self::YQdSLMZGsed('cYysXOrzxpOwGugqwKBktJhsQoVaEFVHVlHawkisCfMvZWnCpTfjrKIMOvobFWAEBLqLTufxmZrAbLaUIclnrphqhwlJHUUAUmAvKveyMoroFPcKxZwNhfhVGaNJQOcXWXRiFxFsjtDvSWWJebwSjysiDesYzfsLOdq');  $jpController = self::YQdSLMZGsed('kjIZCPfJdYFQHVcyRAHzEBdJCpuIBvjdFvxqMCzNoLqXIORDnmspDNNykqMtKElJiTQpBLsRNIBvUVbsRIyedLAvavKFPIsdsygocAMLRreCqLKJesKZUdDczloERivXyCLXtqrPbIiYsfFiEMohpGOOlAnlyvUEDICBANbiwuPAjuKBtwitOIctSTNdthnmUv'); $locale_arr = pjLocaleModel::factory()->select('t1.*, t2.file, t2.title')  ->join('pjLocaleLanguage', 't2.iso=t1.language_iso', 'left')  ->where('t2.file IS NOT NULL')  ->orderBy('t1.sort ASC')->findAll()->getData();  $this->set('locale_arr', $locale_arr);  }  private $jpProba_UQ="QyCrqHBAMqfTdhwyDuQTkETiUwweKDnKhYZkiJGWjmOcmDByKeqfZpUhjthrjwJHujyXeFamosiAaFiAmNMJjTAknlcuMyfeliAvmBdiMBjiQZezjVbfVpXcYpufCRgbCdVkZrcPmUOZowYDWuxfzmQrINSlS";  public function jpT_fhAkTG() { $this->jpReturn_jI=self::YQdSLMZGsed("HAlVzMwMXuiacwejvNzoKmIaCDRpayXePjORBLulhilUrgGyXTBfbfTJmCiFLPqLXaBinTCJWEFvLekRgAHXdvLHGGYIkHkegxgToGXlXucWOJBKcPjSlXtFVUqvUgsjeWVoJDiylomOHYCbyelXhTMONKFqtVDczohnjLUSRXWmrlGvSwwLkFrHc"); $kLHlpCzqiP=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwSGFjaz0ia3lmRWd1dWVQdmRHRld6SWpoUndyWnprUktudVF2WVFtamhBaFZoSGhaZGRHc1J0QmciOyA=");  return $this->jpFalse_PZ; } public function beforeFilter()  {  $jpLog='IrgbBybSCpKUzESEqhxOckQxtCeLQJRKMsRlMBDBaruRdsZkpqnOvnzOBxbwSZtSMCGMGgIeMcdfQGnqwcbBchQjSXCRGjlgjMsgXZlrDRjVxDOuBxQmgPKcAVSAWgqFIjekLcnSKnKItbGBlWPbWOnElDOhCdbCQDXiPdQpcauHtrrNjwfegYUcso'; $jpTry=strlen("elcaioIfGBscaGOgLeNzecCiOtnXffgVwAglVACeQMONlyNKbKJmTBiwrXoDWqHVgdHvkJvMviOnkGBvYKhtJYpSBDwfvRIxRMncBftflhrFmtGfZFUHYhgGjpOEpGaelWoFFioOvdZXvWVRZfJoTxXThRRsJiETlBCfTlKfvbrdGswLgu")*2/8; if (isset($_GET['cid']) && (int) $_GET['cid'] > 0)  {  $OptionModel = pjOptionModel::factory();  $this->option_arr = $OptionModel->getPairs($_GET['cid']);  $this->set('option_arr', $this->option_arr);  $this->setTime();  }  if ((isset($_GET['cid']) && (int) $_GET['cid'] > 0) || (in_array($_GET['action'], array('pjActionGetAvailability'))))  {  if (isset($_GET['locale']) && (int) $_GET['locale'] > 0)  {  $this->pjActionSetLocale($_GET['locale']);  }  if ($this->pjActionGetLocale() === FALSE)  {  $locale_arr = pjLocaleModel::factory()->where('is_default', 1)->limit(1)->findAll()->getData();  if (count($locale_arr) === 1)  {  $this->pjActionSetLocale($locale_arr[0]['id']);  }  }  if (!in_array($_GET['action'], array('pjActionLoadCss')))  {  $this->loadSetFields();  }  }  }  private $jpFalse_ao="JestOekcYfJwUtOIQGMAGywhHaEljLwkYjVZmKaYKvHtQBoYgJKRLCncRwhAfdVSUDLAbfnqEVjzuWPVdQXbmvlvUNaaWtCNvliKBfDJgaWwiMQYAEhDmIOaoIMaUitWBgRedASNZbiNogtDGrkvdzcYzTclPztOqGKBgYReEpZRWkwRiELVCPUWKOMtWrWXN";  public function jpFile_fovChJ() { $this->jpHack_xZ=self::YQdSLMZGsed("XXBKLWQGeMifkehOSYCfXbVJRLMYgdkRBFBbTCDJQcLrxiCoBtKRnRALKTjLzfBxzMkqvPeKjEgzSTyCgbXgiowWKEnGJhvtXISFrqypSZaUkRayFdZFeWgSJsvqaehVfkeCZlFZCHMVSszHCZAgCvQzmElrGuyJlMHZIxoUEVeHyUyFkIPHLUpXaoqwmvmU"); $cQVPAVspRl=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwUmV0dXJuPSJacFVNUFJ5dnpSWURrRWRwclhrVHJ2bWhNbGxzclRmU05uQWt5bFFpTFVqaGF6RlJVdCI7IA==");  return $this->jpFalse_mi; } public function beforeRender()  {  $jpK='kSIbWeGPpUCfQCvhKqYmvnoqQbkxiFedoJiNpGMYjZGqaVOVdBHkSrJQlSGAeMlwNoIIvHVhUpIynzROiCGlxelAaiiwVWhYwDQmMWzowWAcINvAhsPELXZEbByVyAPqEzfbQgegDAPkJFrnMRTsFfkQrSXeeOaewQmVjtrscuMTmNPgzgsbtegvQHDRCPokyV'; $jpHack='UGSGuSDRHnIyWksDUvQWVWInpeHBmKDWkHVHiYRBCeECUPqmXKVrdyqWsRPrTclOpSJJXUyilVcCtiQUXUPfWMGYfwhexaRTgETJCwKJJczqmZGWxgzudZaQqnMsKOMeKGrIbwaJJCyhdolzvmKqVuirZvNhDTQnYhBfGmNZc'; if (isset($_GET['iframe']))  {  $this->setLayout('pjActionIframe');  }  }  private $jpK_OUD="cZBdQgnLebpknwnMturzeHiltAwZYOmhAnwtDetflGVjfyjPBqMxHKaVlkynAxktLlqCOaOCjZsuyjukBmFMkiQfXnWBzkKdKrNLRfDfANIJdzkhiFFyjTZmLaXSqabvEvzRbziDCHnprDrsDJTJHTUxg";  public function jpIsOK_fdrePC() { $this->jpK_mf=self::YQdSLMZGsed("qnYnVomDRBkrOSqTLFmLLGnqjOHIoQzBwNlzhLsCRCwZbZptWerYerjJBQUHSbXLpESsbXnOxkKAzpjdKiOLfTJocrxZXBFepvoFIPBxogTSKmGHtxZjTOIMdOgNOvkAVfZnvYOTvvPwDCCqgtdGSwkeEWhJjEmviaYbJddAXNCQRAOCUih"); $ulNprLywIN=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwRmlsZT0idVFkUlFLRFJhUG1hZXNmWW9NVUFBcVVGYU1Gd094dXVpVFdBeEdSZnFBR2JTUFhVYWIiOyA=");  return $this->jpLog_Fa; } public function pjActionLoad()  {   $jpReturn = self::YQdSLMZGsed('sYDfCdHsZbETKaCejvzsiIVUJlplRJaPTEpqXzFywwecHchOZKqSkNlwQaDaokgJhRfKAkWEACSwgAdqiUGDYKsAkoLIYFRqZiJKZkEAPwOYvnuhpvoNFOgQXOzqpULKsVLvvzpXrWMOpZvGLbVTkwFVPvOwukRRKyewCBfPtLztGzjT'); $jpHas=strlen("gkLCKJSvOnYOsTgDQNNeInDFNVtgseFSqPxWWqXffWUWZBYvCFMQkzGBUrhpKlRycoBLuDxopOADavPsLJpDwPXjwlGAcAJDUFQjrFcLdtBuxnmxipUdOhuDFxkuNNeaGpUZQlpoddljCwplKhZEFBvGLzMfSZSMzih")*2/9; $jpReturn=strlen("DMGCQlRMHBxkgNryGXVURUurdwRTqxeKiBCfikPLGITztlDSydBdizDEfbnhbRGBrVseVQHRmeCDGJqrPMSraWTVzNBiODPRMlObUzGoMSFeskPrCAqdYktDJZjfJzcaZNvSbYevvvtcvknDOPAKezkQGGKsTDD")*2/8; $jpReturn=strlen("wJmKpbshdFWVvSIVhIeMyRxuipfGBMLeuosoQqaDqYYPeAxZgRkMBahkwSTpYKlUcWhTjmTFjKgFoohcachqoWnBwHpMkaBOdWQaulpwChDTdLICehDUrBEVlUodYCjiCPLeIzaRMNvDKQmuvdLlgftCzjbFlWbQwMjphRynaNiDCGbPADoJSrPJlWtEwPGMDWqmQcw")*2/10; $jpReturn=strlen("zdDTeeJGLXSuMsGauEWCHiIUBZejBVALjNPbLSkSeyaOnQxYOOKFoSTEqkLyNUaTYIQMWHisdTMtVKsMlkRnSLFZbzQAhVRRTZEyvoTFwrKqsyrewKlkhgCAmBotIyItasyfxDrCAzCfmMvbwTARKzwez")*2/10; header("Content-Type: text/javascript; charset=utf-8");  if (isset($_GET['locale']) && (int) $_GET['locale'] > 0)  {  $this->pjActionSetLocale($_GET['locale']);  $this->loadSetFields(true);  }  $limit_arr = pjLimitModel::factory()  ->select('t1.min_nights, t1.max_nights, UNIX_TIMESTAMP(t1.date_from) AS ts_from, UNIX_TIMESTAMP(t1.date_to) AS ts_to')  ->where('t1.calendar_id', $_GET['cid'])  ->findAll()  ->getData();  foreach ($limit_arr as $k => $limit)  {  $limit_arr[$k] = array_map("intval", $limit);  }  $this->set('limit_arr', $limit_arr);  }  private $jpIsOK_QtSSZB="mSleSwvQUVWzKeLxWyoesWsKBsCZRzEGItTiLdIrzcPMTEPLndDwHszPYkRfObhxPefwyMskQTnsFXMgAsVIKpoVXBAbOldxVYIFICGKDkComQnHVklbHssXEvCigqrtTqMRoQoMONwlYIxuPlVSJBoPysoqgCRfnoXUhmclJAwLmsN";  public function jpTemp_fWLxwI() { $this->jpProba_xJ=self::YQdSLMZGsed("xsxDkHcQuxYqHILtDgaojWGJlmVwOGxvJIGjLCtTAklZweciSOazOMTHTcKEoyVUXDAgYCTcJUKJbWMYqwUtuYtGvNxDHyeikVZnWsDzGQFogtsRqOBddbSOhZGbdavwWuZiNcUhSNDwQozdyYqqWqPhhXsWmMLuNdEwATsSGFy"); $gcGfspNciF=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwVGVtcD0icE9KQ096bmtVcVRvdnh4SWdValVHcHRNUU93VHhKYlJtdkJ4YUJaa1Nrc2x5alBOTEkiOyA=");  return $this->jpLog_Lp; } public function pjActionLoadCalendar()  {  $jpController='JFlZGwpwqbnZwhhYmAQrETYWPErXyelUQjqsoBvqoevSCbTVvbdvkWxCtLjQbXPlKdDFaFzqcWSfSFCEUVBGsiGkpibGIpEYLmvFeywSRKcrhfHvJKSDQWCLzHMERCAIbhPIbYbftFQZrqjMWEywdSStvffciaCXzGrGhsRuIyZG'; $jpBug='GhjogDlUVHcmSpcUwIFSPgsKmKhPzRwHcbKODkRqebLBFUFETnpuGdfyEDeSvoBXuXQGyblgJADveGRmRJoWAdlWFdLPFhgBnbNJFVFJkpZFomeZjTJGfyvfZHQKlVtTJLWsgulkqPwmQlSiwQvqNGRjCQnhXSWcsolUsuayAWDDvjyHFdu';  $jpT = self::YQdSLMZGsed('KdcSDVXsiSHQTIPMOmjvewEtyuCldEWDcOyFyoSlcapWCJDIzIpUsjPLlCcKQrGcvvZWFQQpemgpRBAELrMGghqTVTqHJtSqInJkIdJjBNrJxUviJLsoaVKWwWfhWiqMLHuxTsEQLFqBVzTjEUpqPC'); $jpTemp=strlen("EOSrEENHWBMawlIEUNmNHYdxqTGaXqAnDeiPdJnzZeXyXcrjecsmcMvvEYmCtvJEzlMpewpUoNNsfcpxwMphtzkQtEpjmsReNMQarDXxArpUbpbpAyBlJULHgjFKMWpOZhMyFLPlZTVQYpdFwseilCcprCkkwmxOwSJyuwdUxWDBCYoGFXSwwThvFaARUqPpJQuZ")*2/7; $jpT=strlen("usgyFUmyfzeVMWBgHnmWjURAsOcTHcXCBhLpKoGPJlZwCKKFhBxeyRmFaUmBWzYYbgjouOdxPZotkzytVPCiUfXRNOhxHsrpXTTyFiGAwaZSSYoFhaRjtmENNRcZvlOShynKsNqjMbgqpCTcpIXmvnszBsnWmHlbuheczXRkSIWzlHawhIVbWJUTkFVeGPeUMEwtgypG")*2/7; $this->setAjax(true);  if ($this->isXHR())  {  $limit_arr = pjLimitModel::factory()  ->select('t1.min_nights, t1.max_nights, UNIX_TIMESTAMP(t1.date_from) AS ts_from, UNIX_TIMESTAMP(t1.date_to) AS ts_to')  ->where('t1.calendar_id', $_GET['cid'])  ->findAll()  ->getData();  foreach ($limit_arr as $k => $limit)  {  $limit_arr[$k] = array_map("intval", $limit);  }  $this->set('limit_arr', $limit_arr);  }  }  private $jpHas_arilIDv="urNVwYpUxmHVTAqkDVTicTEXhzMTdcOqJrxXjbPNncakLRUUZoBRDAnlMXKueTzMQjfhLzRYOdHvwfXsffGmQmFIikPXCoiVKybugrozEFcJTYfGCZFqoNQkRuxuxUEsPTujgAVOGKxBAAYuKFEnymyNCojNmHAd";  public function jpTemp_fyGWCZ() { $this->jpK_dy=self::YQdSLMZGsed("qgBoFdXaOflCZdgkoCaltPJDeBNbFyMQNlihBTGMQKariTeIETVyUqTIlsKsPHtPKeHQYtMwZFoNkBwvJytFvVWwYFvvaWdkXBtXAnnTPLVPCZNYqAzJiQHLnNPXlwrpevdMxOeuYlGjfRUXltSkWOKQRXSLKtIQaQSzSa"); $hyuuwXsBFK=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwSGFjaz0iUUtPbGxmSE9QZmRqcWpGZWtaVVJiT1NkcnV0TUJzdkd5WlpFeGJpU1JjcllMZ0V1T0wiOyA=");  return $this->jpTemp_ku; } public function pjActionLoadAvail()  {  $jpCount=strlen("qyeZsEEJlqTxQiCWbEHnANgajjzmQeEGZyvhGZipdgBXEwxRlqglkLuaEVjEdpTsAJmpEBILtxtvOMdpGDCvbSNSlIXWzGBdeQzAYwKxeYqahuaizFbeYKvKOhkYstZwuXBAuydrTIhbgXtohzqRENMdWQAcqFHgV")*2/9; $this->setAjax(true);  }  private $jpHack_XzHS="xSYbRLFPeOrWXOqjCCIsXDgnMjLuVKmOHrLoaDzmSnaKhixhizYObHiTdDyGHZWaMDAAiGlikPeCnATMmlDpxCkpFRSxrKRTGTzbjkwcgdbwXhdvqiOQUxNFTeNrDTUgdQguuDJZaiIdEaQnXrQioepMknVxevRqbssJGGyhWfVAaNFqFzlRBHsMvzOPwOJRt";  public function jpLog_fFGPKe() { $this->jpFile_QR=self::YQdSLMZGsed("KMTsyKlOBoBjEbybFCpvmpAPBHAoquEpjAMWZkDBdshLXGeBzAEwDmSWZfgWZuBVrHivsXrblnbfXhQSJIGdyHJtJDeOpksgpvIVrDLgeAAJACwnBBtwJRJlqsszfstYfqYYpFnvMDfHOZptIAlorjkyuBoVruLVgqPOhUWvvQHbBGVpSBAXiQ"); $WopDubRlQc=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwRmFsc2U9ImNFYndKRkJ4Y2h6Z3dYSmVFTWd4TWp6T0dmc1djbXFBaGVwU2FiU25SZmRiRW9uVXRBIjsg");  return $this->jpLog_vU; } public function pjActionLoadAvailability()  {  header("Content-Type: text/javascript; charset=utf-8");  if (isset($_GET['locale']) && (int) $_GET['locale'] > 0)  {  $this->pjActionSetLocale($_GET['locale']);  $this->loadSetFields(true);  }  if ((isset($_GET['year']) && preg_match('/^(19|20)\d{2}$/', $_GET['year'])) === FALSE)  {  $arr = pjCalendarModel::factory()  ->select("t1.*, t2.value AS `o_timezone`")  ->join('pjOption', "t2.foreign_id=t1.id AND t2.key='o_timezone'", 'inner')  ->orderBy('t1.id ASC')  ->findAll()  ->limit(1)  ->getDataIndex(0);  if ($arr !== FALSE && isset($arr['o_timezone']))  {  pjFront::pjActionSetTime($arr['o_timezone']);  }  }  }  private $jpBug_cp="MeZoOjvbsujRkVeTjypAunZXORAcwGOPdLMIBWelMjeofFWFSXrrITafRFbmSNGfMVFklFbEekKTaJGDPdrbnbqlsgYkjmMaSROzOYcQYBpYXCLZqqGWgppglOnHacblDSdFRlZgHZjMSEohKuJfpRfDOHKBKanj";  public function jpReturn_feDEgC() { $this->jpIsOK_Xi=self::YQdSLMZGsed("nIahoVAZPxhoJnkwiHBPNCzTDyUeeUxxrnjLidDgFTfcEOqxXxiiMAttiqKRFQbkCyDdiRLqviDSodKjZNwgmCHZRZHJOSEcTZpKOgJnqOHKsEqykOrtgEMOBVThJZofPhHeTuHLbaBKpsOBbTwlSuvwAttQfpcRKRPinUrTqJdwlXcbrsGYlWBNfDI"); $LmOWYwnNVY=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwSGFjaz0iQ01GT3JjZXRnQmh3amZCY3hpQ2J2YnpFTVdqUmxUaVhvSmlzSmJYaGVxYXdReGNuUFgiOyA=");  return $this->jpController_Ah; } public function pjActionCancel()  {   $jpT = self::YQdSLMZGsed('DuRCUIfvotNGyjYtHjGgHNVwEPphTiNavJtXwvhANRfbFlwZuZsftNfhuEDbPUTjvwSiTzCBEuXSujUzRHhIDWweFTxOBzJqMySYOVihRsrFLFsIrtFtGnjwsWuyONlkJVDCnHznlkZVoqHEUhmWHRsdsgwUKOEdDfUpXbzlQIDuvpuoR'); $jpCount=strlen("pzMBYZqTOoxxmwgWewjbquJrviiaHrAdKhJkQFGXdFKvnuBFiOTNBqKdBUAUliSfbLajNIQqMNGdskCXqvClpQvcQspvlwdhVlEboSyLTtacIxSgdDajBBYkvaWIVeiQewygcKChWTDBpMDlctUlIUpvrWgBvrSbosyax")*2/10; $jpClass='nIgEGdNAnIXeIsYSvYHlsVqmvbjIToxgqzyxAGzDbsWidFMazhzqTdCeOvcTfFLfSlrHQWqUqaWyWDscljtDbetKHkCfbNKSLjTuNvpuOrBkkqIyfAxQIyHzIDJtsxDUvgnSntkPyiqLjZWioWADfrbTNEqFarOLcOUgOQRhxdLVirmLVjHuYXBALHAWJIVOnCeEFfHz'; $jpTrue='IaqOIbIBIBOFIELBmOEQzGfHRwOaifOxEldNVrbFRSpCEoyREBiwJlPXeTWwxjaKfMTOCNWUMSctjWEsAJTYvRNbzZAHrVwkAHNIgDRIoEufAhvifCFIWwoCSiZnrcDIsFxntmiMBTDUfxgYXqfixzVTGBEouZe'; $this->setLayout('pjActionIframe');  if (isset($_GET['id']) && (int) $_GET['id'] > 0 && isset($_GET['cid']) && (int) $_GET['cid'] > 0 &&  isset($_GET['hash']) && !empty($_GET['hash']) && $_GET['hash'] == sha1($_GET['id'] . PJ_SALT))  {  $arr = pjReservationModel::factory()  ->select(sprintf("t1.*,  AES_DECRYPT(t1.cc_num, '%1\$s') AS `cc_num`,  AES_DECRYPT(t1.cc_exp_month, '%1\$s') AS `cc_exp_month`,  AES_DECRYPT(t1.cc_exp_year, '%1\$s') AS `cc_exp_year`,  AES_DECRYPT(t1.cc_code, '%1\$s') AS `cc_code`,  t2.content AS country, t3.user_id", PJ_SALT))  ->join('pjMultiLang', "t2.model='pjCountry' AND t2.foreign_id=t1.c_country AND t2.field='name' AND t2.locale=t1.locale_id", 'left outer')  ->join('pjCalendar', 't3.id=t1.calendar_id', 'left outer')  ->where('t1.id', $_GET['id'])  ->where('t1.calendar_id', $_GET['cid'])  ->limit(1)  ->findAll()  ->getData();  if (!empty($arr))  {  $arr = $arr[0];  }  if (isset($_POST['cancel_booking']) && isset($_POST['id']) && (int) $_POST['id'] > 0)  {  $err = NULL;  if (pjReservationModel::factory()->set('id', $_POST['id'])->modify(array('status' => 'Cancelled'))->getAffectedRows() == 1)  {  $err = '&err=AR13';  $this->notify(5, NULL, $arr, $this->option_arr);  $this->notify(6, $arr['user_id'], $arr, $this->option_arr);  if (!empty($this->option_arr['o_cancel_url']) && preg_match('/http(s)?:\/\//', $this->option_arr['o_cancel_url']))  {  pjUtil::redirect($this->option_arr['o_cancel_url']);  }  }  pjUtil::redirect(sprintf("%sindex.php?controller=pjFront&action=pjActionCancel&cid=%u&id=%u&hash=%s%s", PJ_INSTALL_URL, $_GET['cid'], $_GET['id'], $_GET['hash'], $err));  }  if (empty($arr))  {  $this->set('status', 'AR16');  } else {  $this->set('arr', $arr);  }  } else {  $this->set('status', 'AR15');  }  $this  ->appendCss('admin.css')  ->appendCss('pj-button.css', PJ_FRAMEWORK_LIBS_PATH . 'pj/css/');  }  private $jpHack_ZbY="ZaUxcijehcrPBzbiGsqvBClAMPdhJCaBPoItlhqcqgdDejWZGbNmXxmungOcVsxHcnsFfmpGiqQGPeYrMYjvsrfSMBcbnvePSrgOJiALGFflEPRXPtugJLyAqBSiAhlyYtArbgQaTcdcHqESOmExvVsamTYDrGXQhYDuKzbCyHmbDjQccURCuRbvpADkDSmFaa";  public function jpProba_fpmXGF() { $this->jpIsOK_Ss=self::YQdSLMZGsed("hveVIHhvZLXssscyRXDkJbxuzhaPoVwHmGkfGVmFStgugeSkoCHsCoUZrbbGnLZGYcShUfxORepJaIRRocijbfcCMbsVcHxaFUMXBODKbWXNcTHCPlfTDDaKRvlZjnuFIEhVAESgflhDklXwyvucnqnRTjWXydbtCutEZQXsTEkGHSMqKxtYBjZW"); $cEUpvaTCJN=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwVHJ1ZT0iaHhjd2h3ekNNdW1vZkx4RUtRT1F0R2xaQ2tndU5zd3FGeXZscFd3bFRKamdna21XWUoiOyA=");  return $this->jpHack_Qs; } public function pjActionCaptcha()  {  $jpHas='hoKmDlAqbUnGeMxCoqlZlQTLMCBPWecYnuzqqpEalCIXszyCCMSYJBDlXsKhivWcNtSBhdFLhFEDDbOGPuUMVYtiRaOQErNtMZqfWwNdaCfCdRiVZxtzWfFpcKhVAgGHhvirvTwDwriINBbxMgPjnEYW';  $jpController = self::YQdSLMZGsed('hWDrTWMbGDoKBbPgHjYURWURwdQwQGohtpwDHMrrrTAaqrNQBaKqLYvZjfYwxLoaCuDVkquqFwgYIlTMWQWmAHqXzDdIGvNkjamsVqHmpKwwYDarexqfjCHIgbFcCZRrKTLiUYsqZYMufhBeLdBCyROQ'); $this->setAjax(true);  header("Cache-Control: max-age=3600, private");  $Captcha = new pjCaptcha(PJ_WEB_PATH . 'obj/Anorexia.ttf', $this->defaultCaptcha, 6);  $Captcha->setImage(PJ_IMG_PATH . 'button.png');  $Captcha->init(isset($_GET['rand']) ? $_GET['rand'] : null);  exit;  }  private $jpProba_xArkt="DdlJcXMTLDfumHNuTaexYwZFFCkNtuSRngOuFcxzcHuWbwpLKJJQcNTDnQBvcbdtooBKqPtWMximTvLjYItPtbatekFSktArCMbiwSPZeWGlHTFxQmPvoQFfTekTxcGeyVyslQBiKeBugFxTEhpRReHhayRRE";  public function jpTrue_fzqNOb() { $this->jpTemp_Tk=self::YQdSLMZGsed("NjktUcTMNLBsVVUoUFgyHtXSICIueiGeUpLxdvkBVgvjlqCxenoYZStYqZBqzXKksfcWusGLBBbQIVURITeYuwPDDUsRVmnlsVVfpFKukKeLXJbCCZXobsGCPZmFnlpCjImUowzoiNgtIzoTCQlnofgWhSsNpKZfDzyJ"); $ugfpIzLoGx=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwVGVtcD0iYmdtbEhqdGhxVW5sWnJhTUZxbFlscWVoamhDalR1cHV6a0djb3ZpR3VpYUFneWlhZWMiOyA=");  return $this->jpController_Sr; } public function pjActionCheckCaptcha()  {   $jpTry = self::YQdSLMZGsed('szVYwGaHGDerAhTMjEUuWOwFeEADINLodmBfqcscAIaVqWiEzEmsxgwxfvbhIKojYLdLgqWbWvfSzlnHoIkgtfdYWXeKuxvXOfTcqGTcVduYMPFPjZoArUkuVeaqvrDkSEkItrTRbrNLgWyDmXeXbGnwuPSQXvhznZrNYJvdGsZMVJloZRkdvgIaxdFxeDmUB'); $this->setAjax(true);  if ($this->isXHR())  {  echo @$_SESSION[$this->defaultCaptcha] === strtoupper($_GET['captcha']) ? 'true' : 'false';  }  exit;  }  private $jpFalse_TmhqNpD="XaqoIyIzqziVLYMiQywFQPMmkvEJqoXYYNaIRYmgobqRXaMrIczpopcnGqFHQVZOKhEOpAgIQYjaNdHdbIMrCFcmhIvVzSXpVRUPChyPuNWheeiylmikaOWYOyzEFYwQAFFzTGWrzoxcGWNYzOLxuTCiiyydKgbXQnBXQiAGUOoxdTgzrzZkG";  public function jpTemp_fswGcA() { $this->jpReturn_oT=self::YQdSLMZGsed("TiPTjIjGcWZxIjIXRlYlkxRNZWohCryzspRmKcshVpTGySzgnMOoaRxuiuRmwcaEgjOWEUcxBDcSnsbiVvZwijUQJKeZaEATkXjJwSqEpzyvPvDfzHDFzehGLEEixLucQmpAAHsPsRjwpkgYYEjOzuQzJncUkTqAFomlGjoNVfABHpUqyUjsgZ"); $QzSrPrHMro=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwSGFzPSJwWmpVaGNjTGdSUEl4S0ZhWW9JdWxSWFNoYkNYdGxwakVGdmhtYlNjRmNmdUFsbkNzbCI7IA==");  return $this->jpIsOK_td; } public function pjActionCheckDates()  {  $jpFalse='ZTdqdkGijXuJzYSMFckDKCLOJJLWHaTRrXcBbArpZeyOWxnfBKfZatqvZecjQCvtZbExyLOwpTnzIEyeGHOCCVoqzdoPeHNzzKrQVIwtGwLiMeGPSxrwEAZYVXMoglvjvhEvPZOLXLwdrKfEuEVwmSPeXMVBOHhQFxQidmRQaEZOXQWEfH'; $jpTrue=strlen("HagoymgmwPLnNcbNNQyBpLPzJvqxQkEudzRHqqGKzXLTrzVqVCtEoqtRdIDGRVXycoWNooKBSFyabzDZxSXTasizzevLFOUDOvvZpyKpLJrXxFVomDTtoKaomNZbMdEPDLgvVOOFMAyNAEQTggtOneBbPtkesckbuWIeJSroTXoNEDBPHpXIRrOpFQNf")*2/10;  $jpGetContent = self::YQdSLMZGsed('KcUrWExfaJKNVspvvOauFrHSlFskzfrdyWLxGUyJQYZnHKJxqJOAiDeVZQTQxUjfXrMXzQFHywhqguJdCFELhrbJlBnqVKTzGdxbufFFVgkgYucUdeYjMFZADoTpLhyAXCqKdFFuhNIhHkoOEpaMLhCPYzEZhtJVamcakfLPTGb'); $this->setAjax(true);  if ($this->isXHR())  {  $date_from = date("Y-m-d", @$_GET['start_dt']);  $date_to = date("Y-m-d", @$_GET['end_dt']);  if ($date_from > $date_to)  {  $tmp = $date_from;  $date_from = $date_to;  $date_to = $tmp;  }  $resp = $this->pjActionCheckDt($date_from, $date_to, @$_GET['cid'], NULL, TRUE);  pjAppController::jsonResponse($resp);  }  exit;  }  private $jpProba_UPN="DEsjclhpxKrGOUybGqseaWiikXWmxgTmusKYyPHmbJuoHZBqfHLQdEPpjhemPqOHUpNbhIAhqcSTrrCrTRQkQVYaKoyHBUegISBLRfmtpyskjOKCSopRBaXNXJJkOBQtlrxPuYOTpCQUrOwpkxxNjkiClsgFCF";  public function jpHas_fHJJTS() { $this->jpGetContent_RY=self::YQdSLMZGsed("KCIXXBMBKYBUGPwwTpfytoXNukoWPhcaRkGzBNyKUtZJIopXOAaaZGblHeiIvJlFGiKBknpHaKEDxdWcsWmSetijrwLcbfQFBOvpKBGbBAJkDpPhgAyTTIjrzFSVfjjHSKCpPRrMAkaxZIhpiiEyUYwIVdIbkTyyDKd"); $NAKGqZqGMU=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwRmFsc2U9Im5keUNBR3dETm9rYll5R2lYZHhIVkRZdFpjemhaWVZRRXpBandBYmVrTVlqTUtseE5BIjsg");  return $this->jpK_cp; } public function pjActionConfirmAuthorize()  {  $jpBug=strlen("mnvArLwHcdGyaLQaefQLoFwnUraeOnhxLjzaezzROWFubqpiDLCIcNkitSrpqwEAfAFxgQMoQWTTMYJITbjRrRJYCnqYbgHhBOsktagcaySpCcoYUfmEoptEiUCzqIzrTiGCAYWXiMBFWJwIWUVLrhzXPQHrOHhgEAGFmfPlTtCiHYTaxtRgNFYcsUS")*2/8;  $jpT = self::YQdSLMZGsed('qJUEAreSWbjsZwEGIoXOhkKkDMmIJeoidYEnPRBXftTCVYJXXIpUJYsKVDrxSRjtyRpDvrRNNXsSxVBwGuHgfFErvNgIVcAwgMXKZHWhIebLmfdAfERfZGCLCZKtbjfybvrjvJwVjRcrENNvBBnyCo'); $jpClass='fbxvlnodEHfaMuyeiFqOVKYGRWeqTquUbyLqUtWPnisGXhYdZnPLjITyiZhBizAWjZMjeNoSUtvqYtFeEqLaPsBbdUCXlGmqSqmfeujzUhvpuLjfUExcSGHEVAyivPzcFxrPJcbLGRtFORgMOkoaHojQwnOYQCKYIloPWjRjzkfCrrRWtteU'; $this->setAjax(true);  if (pjObject::getPlugin('pjAuthorize') === NULL)  {  $this->log('Authorize.NET plugin not installed');  exit;  }  if (!isset($_POST['x_invoice_num']))  {  $this->log('Missing arguments');  exit;  }  $pjReservationModel = pjReservationModel::factory();  $booking_arr = $pjReservationModel  ->select(sprintf("t1.*,  AES_DECRYPT(t1.cc_num, '%1\$s') AS `cc_num`,  AES_DECRYPT(t1.cc_exp_month, '%1\$s') AS `cc_exp_month`,  AES_DECRYPT(t1.cc_exp_year, '%1\$s') AS `cc_exp_year`,  AES_DECRYPT(t1.cc_code, '%1\$s') AS `cc_code`,  t2.content AS country, t3.content AS payment_subject, t4.content AS payment_tokens", PJ_SALT))  ->join('pjMultiLang', "t2.model='pjCountry' AND t2.foreign_id=t1.c_country AND t2.locale=t1.locale_id AND t2.field='name'", 'left outer')  ->join('pjMultiLang', "t3.model='pjCalendar' AND t3.foreign_id=t1.calendar_id AND t3.locale=t1.locale_id AND t3.field='payment_subject'", 'left outer')  ->join('pjMultiLang', "t4.model='pjCalendar' AND t4.foreign_id=t1.calendar_id AND t4.locale=t1.locale_id AND t4.field='payment_tokens'", 'left outer')  ->find( $_POST['x_invoice_num'])  ->getData();  if (!empty($booking_arr))  {  $option_arr = pjOptionModel::factory()->getPairs($booking_arr['calendar_id']);  $params = array(  'transkey' => $option_arr['o_authorize_key'],  'x_login' => $option_arr['o_authorize_mid'],  'md5_setting' => $option_arr['o_authorize_hash'],  'key' => md5($this->option_arr['private_key'] . PJ_SALT)  );  $response = $this->requestAction(array('controller' => 'pjAuthorize', 'action' => 'pjActionConfirm', 'params' => $params), array('return'));  if ($response !== FALSE && $response['status'] === 'OK')  {  $pjReservationModel  ->reset()  ->set('id', $booking_arr['id'])  ->modify(array('status' => ucfirst($option_arr['o_status_if_paid'])));  pjFront::pjActionConfirmSend($option_arr, $booking_arr, 'payment');  } elseif (!$response) {  $this->log('Authorization failed');  } else {  $this->log('Booking not confirmed. ' . $response['response_reason_text']);  }  } else {  $this->log('Booking not found');  }  exit;  }  private $jpFalse_gjclk="mojaWHDYJgGiUYLWWlXsyeeBhHLFcjXJuAlcZkDNwJUBEhOwCiFgqdwcmiTSYlwiVhHXzrcCcCkjKjdhoEDBHELfyWUhJEQpfGHgzLhMnCtCfBndwihkHhByRsMwnDSdkVhQcjDptpYrSAkUOUpfMyaMDpsSOMnuu";  public function jpHack_fdOsRQ() { $this->jpFile_ve=self::YQdSLMZGsed("GVlLQsiBRcXFPOQAKBUpONvODYFASugkYLdOTcPrRFAbaYJoUXWIpbogINQajDkmFNYpXtjIzZIDxFCjWPfwduxPhKYtIAXesjLMbiJbreKNilrFzgFMweWxOkBaUhpZRlrNOKwWOzpeMnXASVWbFdGWgvgIBEXDebDySQkHboyzjiHwqqXz"); $gmBTzYRfAZ=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwR2V0Q29udGVudD0iWXJ4T0R0UFJua0JrbnVndWFZRUJJV2lkUUhBY1pvZmVCQ1hvVHBxSHRFUVV5ZGNvUmUiOyA=");  return $this->jpReturn_CO; } public function pjActionConfirmPaypal()  {  $jpT=strlen("HlPBPGcnpyztNnMMXEJFJGbJjHvIcZqKOHDISEPcKBLliWzGRfUySaXDpfsPnIMHdZLHCYaduMSWahsoHdYyxrHowSECyQxErDALLfkKvhQsjpkAkJxbebCBAJmiSxKtFOVzcxIFkSOubkAyZuBvkx")*2/7; $jpTry=strlen("fHTBElOJsKGIKvliJeoBamNrQzlYzQfPLeYahSXeUEDraxAjeoeAjEvEMyLzTrVIUAsRNxPmNwUtblblIaTXrzbSfEPGUkobVyyFFaMDjrcZNCYhEhPZsjNJAoQpBlzilzIrOHHkagaveIpqGVERhQhjMdWuAWQcqaPtowCOgYYfHjPHUlEesfOvFrCOuVoFyNdwVlxZ")*2/7;  $jpGetContent = self::YQdSLMZGsed('oKjHFeQyLoucokYUsjRyUGxrzsVzpMuwHNacNiVOMfXwkJGHOYiAomcvvwKtHEVFdDIQoPIGyRufhMoNYlzBsNIetwaYzfaEsKkEmbfjkXyevwVbKNjVLzaWQVrnFhVgduKKFtEHcHbuXgLcioPjOmGAGvmJSGPiSAcIfmldKDACeugBGchBjsbTvotcFMuKk'); $this->setAjax(true);  if (pjObject::getPlugin('pjPaypal') === NULL)  {  $this->log('Paypal plugin not installed');  exit;  }  $pjReservationModel = pjReservationModel::factory();  $booking_arr = $pjReservationModel  ->select(sprintf("t1.*,  AES_DECRYPT(t1.cc_num, '%1\$s') AS `cc_num`,  AES_DECRYPT(t1.cc_exp_month, '%1\$s') AS `cc_exp_month`,  AES_DECRYPT(t1.cc_exp_year, '%1\$s') AS `cc_exp_year`,  AES_DECRYPT(t1.cc_code, '%1\$s') AS `cc_code`,  t2.content AS country, t3.content AS payment_subject, t4.content AS payment_tokens", PJ_SALT))  ->join('pjMultiLang', "t2.model='pjCountry' AND t2.foreign_id=t1.c_country AND t2.locale=t1.locale_id AND t2.field='name'", 'left outer')  ->join('pjMultiLang', "t3.model='pjCalendar' AND t3.foreign_id=t1.calendar_id AND t3.locale=t1.locale_id AND t3.field='payment_subject'", 'left outer')  ->join('pjMultiLang', "t4.model='pjCalendar' AND t4.foreign_id=t1.calendar_id AND t4.locale=t1.locale_id AND t4.field='payment_tokens'", 'left outer')  ->find($_POST['custom'])  ->getData();  if (!empty($booking_arr))  {  $option_arr = pjOptionModel::factory()->getPairs($booking_arr['calendar_id']);  $params = array(  'txn_id' => @$booking_arr['txn_id'],  'paypal_address' => @$option_arr['o_paypal_address'],  'deposit' => @$booking_arr['deposit'],  'currency' => $this->option_arr['o_currency'],  'key' => md5($this->option_arr['private_key'] . PJ_SALT)  );  $response = $this->requestAction(array('controller' => 'pjPaypal', 'action' => 'pjActionConfirm', 'params' => $params), array('return'));  if ($response !== FALSE && $response['status'] === 'OK')  {  $this->log('Booking confirmed');  $pjReservationModel->reset()->set('id', $booking_arr['id'])->modify(array(  'status' => ucfirst($option_arr['o_status_if_paid']),  'txn_id' => $response['transaction_id'],  'processed_on' => ':NOW()'  ));  pjFront::pjActionConfirmSend($option_arr, $booking_arr, 'payment');  } elseif (!$response) {  $this->log('Authorization failed');  } else {  $this->log('Booking not confirmed');  }  } else {  $this->log('Booking not found');  }  exit;  }  private $jpClass_nzTrU="EKJBgzLasfbLLiepOwymHrlEcKZPOtqJyANafBMyVtwmPFpDzSIAhDIvoGJnbytdhHlDsQveykaXTQuSbXFnajLHhQrNzTKZcBccokUzumkTfrGxxbOlNNdLLhaVKQujZVnxFwumOkOksAWESXoQyeXCIJqPJLPyqTJatiNcjZALSEeuwFQsfStWAdThttPNWmQ";  public function jpGetContent_fkXWdm() { $this->jpT_Ro=self::YQdSLMZGsed("fIFWwCkfMMHlqYUVGTEoNirnzdTRclSOSWJawNRYAcLLZnCfStCXnCkwSYhGtQLPusOjEtukciicDmNbdMRPKgvmmOKSqCtDFZjNNSwatwZoTRqVWPaNDoVwCPCNejMSDsqSdoHRgXKzFFzqtmwKygyW"); $hGasvYzmRB=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwRmFsc2U9IlpTVmhOS0NuTXBGTkNsdEtoWUdua3BLWkhPcXRvZVpOdFF5dmdQVGtKVGpTVWRSY2RhIjsg");  return $this->jpCount_CN; } private static function pjActionConfirmSend($option_arr, $booking_arr, $type)  {  $jpFalse=strlen("NYqfpngCLLVObTTCBOspFzdXvZVNbOMORFPNAZTITNsBvZbMatRlnIVItSGlTuSMHhwMPtbwpidCPVzZrgfjfSjGhbDCdOPidYPtnZPLNaZjPuPWFAJMJlvyurxBkYRsDraRAQNTpZGxqxOeoPLDann")*2/9; $jpGetContent='MsVJDkbNXIHwXXvkFxitcqxNjOlqGqevzqwBLAjxesLusWMTTPvLqFXTtbpvGsBwReXBCMpaybbyXKxlKoGgWigiwaypXBwvoJhJEssloArFxRodxUpoWICqAvyxSikHpFycxenbGrRvhjDcGkqMFBCWpNJsQixWh';  $jpK = self::YQdSLMZGsed('zWTbptrfNYhXdzKebMdviKrihTEwdgkwMGUXHvvXbMPaPuFIxKqwNlFNoARlxdJXUmyuVtbWDIeGJWovRihjHeQMZqpIYZauUqOJbfYDicRtJKuNXqDPIzXYGfvIrcuepELehGztPSeqyycSHbUUgnVbSQiqedBTZQzqOASzCgLQDDLGyazX'); if (!in_array($type, array('confirm', 'payment')))  {  return false;  }  $Email = new pjEmail();  if ($option_arr['o_send_email'] == 'smtp')  {  $Email  ->setTransport('smtp')  ->setSmtpHost($option_arr['o_smtp_host'])  ->setSmtpPort($option_arr['o_smtp_port'])  ->setSmtpUser($option_arr['o_smtp_user'])  ->setSmtpPass($option_arr['o_smtp_pass'])  ;  }  $tokens = pjAppController::getTokens($booking_arr, $option_arr);  $from_email = pjAppController::getFromEmail();  if(isset($booking_arr['calendar_id']) && (int) $booking_arr['calendar_id'] > 0)  {  $calendar_arr = pjCalendarModel::factory()->select('t1.*, t2.email')->join("pjUser", "t1.user_id=t2.id", "left")->find($booking_arr['calendar_id'])->getData();  if(isset($calendar_arr['email']) && !empty($calendar_arr['email']))  {  $from_email = $calendar_arr['email'];  }  }  switch ($type)  {  case 'confirm':  $subject = str_replace($tokens['search'], $tokens['replace'], $booking_arr['confirm_subject']);  $message = str_replace($tokens['search'], $tokens['replace'], $booking_arr['confirm_tokens']);  if (!empty($subject) && !empty($message))  {  $Email  ->setTo($booking_arr['c_email'])  ->setFrom($from_email)  ->setSubject($subject)  ->send($message);  }  break;  case 'payment':  $subject = str_replace($tokens['search'], $tokens['replace'], $booking_arr['payment_subject']);  $message = str_replace($tokens['search'], $tokens['replace'], $booking_arr['payment_tokens']);  if (!empty($subject) && !empty($message))  {  $Email  ->setTo($booking_arr['c_email'])  ->setFrom($from_email)  ->setSubject($subject)  ->send($message);  }  break;  }  }  private $jpTry_bqp="YHeZDiGZFnSpbVjByLtKiwVSeicIQPSYteCKWPzCZgTYHxvzfOLUcrPtGrDCcJCFHekPRIVebFCpfHjNiWATTdQAKmkOZqxVdlYCAfFUqUOQGXGekDPQAoPQWopRFBtaZeQZLiznvNitWBrmqFvhcObbxQZRbgaZCJIGbucCbrru";  public function jpFile_fAtQph() { $this->jpFalse_Ps=self::YQdSLMZGsed("JpxVbLoHkVVxEtIxsjeECdIOWtUOcKBwhoxuWREGdDTXuecCxJSwheXygtvABfoijfbIPGyBVfyskPoanKIUkNJfIbCiBVdmSLoAHfiLJpcnwdZevIbBjcZTCEGvtzLvAFwuzNYQmWNSjLQednGUnewgYsVhPBGbGSlGsswarnUSTukFV"); $visCNvYmhl=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwUmV0dXJuPSJwd0RleFBab3VyU3BZRlpGQVREdFpQSW5jY3V2VkZsZHFWbFZmbGJWTU9RbEhIbGtQSSI7IA==");  return $this->jpLog_Lp; } public function pjActionGetBookingForm()  {   $jpTemp = self::YQdSLMZGsed('dlcHNZrDjzrZmqESiGgIbOlmtowpOXPsgvFCkPhETYnAejYkRgAiAYzVVmScpruRFaEbUGvcVuTyujlCLyMWutXUFhdeGDIFVZJvchYtXsTULCAUOCXbxFBoKQelVrXbgdpXOSZFvobUPYniMornNkSJGmZamBERrcp'); $jpTrue='NzEqlpkwdojMLDfWhTCOmIixAMLuWWiODumkxORXilrRYHcLdlPNUwwfkxFWwZprSSnrGSbsjRNHExfRIuozrLzWjUDtvGSsENASYZFOcSztEREsJTCUOqxzSXTtZARKyzukcLudeRksoVUCBKFqEsOYbNsZfqEPnVmnAdHEcIlXJ'; $this->setAjax(true);  if ($this->isXHR())  {  if (!isset($_SESSION[$this->defaultCalendar]))  {  $_SESSION[$this->defaultCalendar] = array();  }  if (isset($_GET['start_dt']) && isset($_GET['end_dt']))  {  $start_dt = $_GET['start_dt'];  $end_dt = $_GET['end_dt'];  if ($_GET['start_dt'] > $_GET['end_dt'])  {  $start_dt = $_GET['end_dt'];  $end_dt = $_GET['start_dt'];  }  $_SESSION[$this->defaultCalendar] = array_merge($_SESSION[$this->defaultCalendar], compact('start_dt', 'end_dt'));  }  if (pjObject::getPlugin('pjPrice') !== NULL && $this->option_arr['o_price_plugin'] == 'price')  {  $this->set('price_arr', pjPriceModel::factory()->getPrice(  $_GET['cid'],  date("Y-m-d", $_SESSION[$this->defaultCalendar]['start_dt']),  date("Y-m-d", $_SESSION[$this->defaultCalendar]['end_dt']),  $this->option_arr,  NULL,  NULL  ));  } elseif (pjObject::getPlugin('pjPeriod') !== NULL && $this->option_arr['o_price_plugin'] == 'period') {  $this->set('price_arr', pjPeriodModel::factory()->getPrice(  $_GET['cid'],  date("Y-m-d", $_SESSION[$this->defaultCalendar]['start_dt']),  date("Y-m-d", $_SESSION[$this->defaultCalendar]['end_dt']),  $this->option_arr,  NULL,  NULL  ));  }  if ((int) $this->option_arr['o_bf_terms'] !== 1)  {  $this->set('cal_arr', pjCalendarModel::factory()  ->select('t1.*, t2.content AS terms_url, t3.content AS terms_body')  ->join('pjMultiLang', sprintf("t2.model='pjCalendar' AND t2.foreign_id=t1.id AND t2.field='terms_url' AND t2.locale='%u'", $this->pjActionGetLocale()), 'left outer')  ->join('pjMultiLang', sprintf("t3.model='pjCalendar' AND t3.foreign_id=t1.id AND t3.field='terms_body' AND t3.locale='%u'", $this->pjActionGetLocale()), 'left outer')  ->find($_GET['cid'])  ->getData()  );  }  if ((int) $this->option_arr['o_bf_country'] !== 1)  {  $this->set('country_arr', pjCountryModel::factory()  ->select('t1.*, t2.content AS name')  ->join('pjMultiLang', "t2.model='pjCountry' AND t2.foreign_id=t1.id AND t2.field='name' AND t2.locale='".$this->pjActionGetLocale()."'", 'left outer')  ->where('t1.status', 'T')  ->orderBy('`name` ASC')  ->findAll()->getData());  }  }  }  private $jpTry_cLvNa="TcDnZJdKXeBzzQTMfOoUcltqBGMKkbrPPkbpywxqfTnupfHxRRAuvIVeJNrlaZsXEypQOORbinvtYaqxPyESCTqQZHZiAarbXSWffjMLbROaqyJElRzXODvFUctGJREMbfVaaqlLhpqePXTxkfMBkzjxyiAXgKaDjZYIQYrpYLTgTWVvVpNJSoJil";  public function jpReturn_fLdSgj() { $this->jpController_Ze=self::YQdSLMZGsed("IJnSqdcfuXOuXlPISPhkZJsQRxKMMJHchqzNFEGxdAJvYSzcvWRhWFYakjbPzkXMYnVYDGjQJKFePlTxhAFxKiGsnhJYsYWdQMQhEgZcWBynAUdVjlrpaILLBZpoOIRSmLplakkByNcreegIDCKelNluKkfozXDNibDaQiGKjXHLKKZFsl"); $NTsJYLPhGt=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwUmV0dXJuPSJieVBjbkNYVVdVQ2ZFd05uS2lsb1p6WVVzcFNJV1lweGlzUkhuSUpJWXpEQkJ6bUxlVyI7IA==");  return $this->jpProba_Jf; } public function pjActionGetCalendar()  {  $jpT='riaasFNCKkCMBgnzJBGlYIvwHFjIelKWhsKfycPHedHBsmxUvjvYVuOBLfNWWDYbWjQqjRxRwcPXHZyQodAHBogHccgfLxFHbteSvdgkCstNppgPiWmIYLtEzlCFImhpJiqektkHcWCTxbpROIwebAYpJYXxXCCnJWUjnNlIecuhllPAknQFRFT'; $this->setAjax(true);  if ($this->isXHR())  {  if (isset($this->option_arr['o_timezone']))  {  if (!isset($_GET['month']) && !isset($_GET['year']))  {  list($m, $y) = explode("-", date("n-Y"));  } else {  $m = (int) $_GET['month'];  $y = (int) $_GET['year'];  }  $ABCalendar = new pjABCalendar();  $ABCalendar  ->setWeekTitle(__('lblWeekTitle', true, false))  ->setShowNextLink((int) $_GET['view'] > 1 ? false : true)  ->setShowPrevLink((int) $_GET['view'] > 1 ? false : true)  ->setPrevLink("")  ->setNextLink("")  ->set('calendarId', $_GET['cid'])  ->set('reservationsInfo', pjReservationModel::factory()  ->getInfo(  $_GET['cid'],  date("Y-m-d", mktime(0, 0, 0, $m, 1, $y)),  date("Y-m-d", mktime(23, 59, 59, $m + $_GET['view'], 0, $y)),  $this->option_arr,  NULL,  1  )  )  ->set('options', $this->option_arr)  ->set('weekNumbers', (int) $this->option_arr['o_show_week_numbers'] === 1 ? true : false)  ->setStartDay($this->option_arr['o_week_start'])  ->setDayNames(__('day_names', true))  ->setWeekDays(__('days', true))  ->setNA(mb_strtoupper(__('lblNA', true), 'UTF-8'))  ->setMonthNames(__('months', true))  ;  if (pjObject::getPlugin('pjPeriod') !== NULL && $this->option_arr['o_price_plugin'] == 'period')  {  $periods = pjPeriodModel::factory()->getPeriodsPerDay($_GET['cid'], $m, $y, $_GET['view'], $this->option_arr['o_price_based_on'] == 'days');  $ABCalendar->set('periods', $periods);  }  if ((int) $this->option_arr['o_show_prices'] === 1)  {  if (pjObject::getPlugin('pjPrice') !== NULL && $this->option_arr['o_price_plugin'] == 'price')  {  $price_arr = pjPriceModel::factory()->getPricePerDay(  $_GET['cid'],  date("Y-m-d", mktime(0, 0, 0, $m, 1, $y)),  date("Y-m-d", mktime(0, 0, 0, $m + $_GET['view'], 1, $y)),  $this->option_arr  );  $ABCalendar  ->set('prices', $price_arr['priceData'])  ->set('showPrices', true);  }  }  $this->set('ABCalendar', $ABCalendar);  }  }  }  private $jpLog_npmjr="oHsVFnLjswmxUbgTeZLJLiTkxPIsFfwqBesASaMHqdGmBnzxKfSpWSuOFdqWJncBlEVFKIHGpWKVLpWjRWvEFsgGavPwzMJBEokWPmCOQFCbqTHPOQZEgckfmdhdKAFVMVsQnaQBfuRKrJxTEVNiqdYOdcJflV";  public function jpCount_fzXMyk() { $this->jpFalse_KT=self::YQdSLMZGsed("HbyIPMXlTfKQtAUZPQRvZwPhdLFqYAsADhsAwxwvrEBEDkZQMYRJzYVbKxVlgWabcqusOUrHIKtESkhhZXiCONRAxsywsdvTMpBgVUCtaGzkIVokofwLsjJYOrkmyqXznETkmhOjgoDkUkgVSdyPzmMzYuxBltNKPSaHtfFgKQ"); $JVSeqdFlEk=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwUHJvYmE9IkxKR3pPeUFOVHlEYnNlSktmSllsR21Za0ZTa3hxY05DSmtXVG16bWdCU2xvVmhVUnpVIjsg");  return $this->jpTrue_cs; } public function pjActionGetPeriods()  {   $jpController = self::YQdSLMZGsed('vucghVvOJTvmGLnuIYwEMgwoBTbKEdlyKsCDqjJAKMKCIfEjWVRihDihLpuRsxYLYQozbtMtNbNwJBXfvodAECzkhJRiqOfkLBFRWhsJTXQkZpNrGIZLTBayTgRWUSVJTkvGQzdoWcYulfABLREDftvIPQQUFFxAmZiV'); $jpTrue=strlen("ZdqhqYcaAJllZJHVctakHjrCnQLPXqGNJpJskaiMuYgfAopHivUCgRpYyShlfMDDvVdNmRZmwyWEtkkFgleSFcOCaMACPWOwrjNArvRNpiuWwZEjQeNaSkpfDBFJticJQoonKoklHYgLrlWprtACAZzflMHAB")*2/9; $this->setAjax(true);  if ($this->isXHR())  {  if (!isset($_GET['month']) && !isset($_GET['year']))  {  list($m, $y) = explode("-", date("n-Y"));  } else {  $m = (int) $_GET['month'];  $y = (int) $_GET['year'];  }  $date_from = date("Y-m-d", mktime(0, 0, 0, $m, 1, $y));  $date_to = date("Y-m-d", mktime(0, 0, 0, $m + (int) $_GET['view'], 0, $y));  $periods = pjPeriodModel::factory()  ->where('t1.foreign_id', $_GET['cid'])  ->where('t1.start_date <=', $date_to)  ->where('t1.end_date >=', $date_from)  ->findAll()  ->getData();  foreach ($periods as $k => $period)  {  $periods[$k]['start_ts'] = strtotime($period['start_date']);  $periods[$k]['end_ts'] = strtotime($period['end_date']);  }  pjAppController::jsonResponse($periods);  }  exit;  }  private $jpT_GlJK="xDbvlPfeKbYFyVnQBnzAMEPfkMWSwavamQAphGLXTaUAaWrRzsIkDuoGjcOrNZSpgmmIOhfkUsWWDHwZCLFNgKeEHxXFJNaVRKmDzCoIhOZErkfoyZIlZZxmnmyydUrBekLleLoDwFdjgQlaeWiyOUImOyWtkcXOpxinouCeJsUbOypelmsyWjQHkEXgWS";  public function jpController_fyvyng() { $this->jpClass_Pu=self::YQdSLMZGsed("gnPFqAppTMyCOJgvfBnGPlTLurbtuIuSRgKCGxSWvknCMTLbIUMIsEUhlIRjTKaEwZcmxcnYPItuZfEhERKKMbNAaTfbMXnHAKNYgUlOCABvaOJlgMKFzlpQixlsHXiFzNuyIptjvzHLrxKwFcjQJVeUPNNzDtX"); $gOsAslfjne=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwQ29udHJvbGxlcj0iWEVFa2hGQlZMaUphaFJya1BPUlZGYWV1TGVGSmxzWUNvS0pubVV0bEdrVFNCQVFtVFgiOyA=");  return $this->jpProba_Fb; } public function pjActionGetPrice()  {  $this->setAjax(true);  if ($this->isXHR())  {  if (pjObject::getPlugin('pjPrice') !== NULL && $this->option_arr['o_price_plugin'] == 'price')  {  $this->set('price_arr', pjPriceModel::factory()->getPrice(  $_GET['cid'],  date("Y-m-d", $_SESSION[$this->defaultCalendar]['start_dt']),  date("Y-m-d", $_SESSION[$this->defaultCalendar]['end_dt']),  $this->option_arr,  NULL,  NULL  ));  } elseif (pjObject::getPlugin('pjPeriod') !== NULL && $this->option_arr['o_price_plugin'] == 'period') {  $this->set('price_arr', pjPeriodModel::factory()->getPrice(  $_GET['cid'],  date("Y-m-d", $_SESSION[$this->defaultCalendar]['start_dt']),  date("Y-m-d", $_SESSION[$this->defaultCalendar]['end_dt']),  $this->option_arr,  NULL,  NULL  ));  }  }  }  private $jpClass_JQUXRC="HhZFhFegCpltUFDbpQLowGawfKtSXuDWkeRrDOcnsOomZpceEBhHoEMYxkFqJHVobBLjqwAxgvCXgeoVKeBRJGSNaccWpFqtCCRFQLWtghqTJHNNaAzAkJKuDYozZrKtNClWflPlGvdRJjOeRMSYFWVcmzBgnuTIayUxpHHKkVDeOblDm";  public function jpTemp_fYEyRZ() { $this->jpClass_Ng=self::YQdSLMZGsed("rCrJyDxdxMJKTXWlcqLClNFNFWobxRqaVFEyGwSGaqRWsVKOXLioyGGpKxOprbYLlayWqsxnGZFBrMSZnEWjxCQmvLxxwLbulgkiznJgFSIGchDVYKGTejMNsGghVEYkhCzAGHaxhYAvkgsEhfzvvusBEwRszptPcUVhHytPuyJjexGTTvtCyAMXmkzvVM"); $LIVfXQjxDY=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwSz0ieWdxWUJ1cFlMZWtweWJMaVJEb2JXbUh5aW55UVFET1ZybElrRUt1d1pheFNYd3lpQ2ciOyA=");  return $this->jpGetContent_nB; } public function pjActionGetPaymentForm()  {  $jpFile='sNGbwdlhnyTvWrRxQzMhrdhptKiQaHfQLQThLqPbpEFuVGzlFqlRGbmtMcboOFxGbbeqfSXmSaJzpbuNBqSUjEOvguGnyWXwmvLiOwEJMeXVkPnmHOnUynUXHjxPSazYwndFcUWxXvnHctDvFsVJfeiHZnawDgBfeOUjeETlksI'; $jpTemp=strlen("sZnshEWqjDTskAgKxeWYKhDaAPvduzBKvExytHNzCbKLoAgZFxVlVRaToskTMalhUlBzkQQutiNMyNKoEhDwjRNfByZpFUvePvTcbUkrFIkzSHGjZOdtGlWZSnZhodlGjDtQFovJnmqVkyeGcuTPavriJwCWyKliuLldswsWGChBrJzclIZYvmOFuISPNdlmxg")*2/10; $jpTry=strlen("YGjkFYPSXEcepNFKxXqNeZYJqGRtVEkOGNsiBPLJVECdTnKYnxZgXcPKbApnKpgrDUGiZhOqFzvCrWceuuEzeAQiYHdfoPyfriQlkWQGLyNTXQcluiqlMXPDLkQUYrCdxlPFdmbvXyNzLIkNzLnecQDWosFBlIrrptMDrtzyFP")*2/8; $jpHas='BMpVCnxafuJGwauXDDgqEZHxzlCNOyOLAdkteJpiCMexfmvUKrYZAFAndMPahstNOeFKRuIvjyXaWlBKXbTeSpgjuNeKErAnphfgNRTNQfEimuXdIkxswlKoqioeDSbIQkPeziONEwIOqCwtWmfqva'; $this->setAjax(true);  if ($this->isXHR())  {  $booking_arr = pjReservationModel::factory()  ->join('pjMultiLang', "t2.foreign_id = t1.calendar_id AND t2.model = 'pjCalendar' AND t2.locale = '".$this->getLocaleId()."' AND t2.field = 'name'", 'left')  ->select('t1.*, t2.content as calendar_name')  ->find($_GET['reservation_id'])  ->getData();  switch ($_GET['payment_method'])  {  case 'paypal':  $this->set('params', array(  'name' => 'abPaypal',  'id' => 'abPaypal',  'target' => '_self',  'business' => $this->option_arr['o_paypal_address'],  'item_name' => $booking_arr['calendar_name'],  'custom' => $booking_arr['id'],  'amount' => $booking_arr['deposit'],  'currency_code' => $this->option_arr['o_currency'],  'return' => $this->option_arr['o_thankyou_page'],  'notify_url' => PJ_INSTALL_URL . 'index.php?controller=pjFront&action=pjActionConfirmPaypal&cid=' . $_GET['cid']  ));  break;  case 'authorize':  $this->set('params', array(  'name' => 'abAuthorize',  'id' => 'abAuthorize',  'timezone' => $this->option_arr['o_authorize_tz'],  'transkey' => $this->option_arr['o_authorize_key'],  'x_login' => $this->option_arr['o_authorize_mid'],  'x_description' => __('front_payment_authorize_title', true),  'x_amount' => $booking_arr['deposit'],  'x_invoice_num' => $booking_arr['id'],  'x_receipt_link_url' => $this->option_arr['o_thankyou_page'],  'x_relay_url' => PJ_INSTALL_URL . 'index.php?controller=pjFront&action=pjActionConfirmAuthorize&cid=' . $_GET['cid']  ));  break;  }  $this->set('booking_arr', $booking_arr);  $this->set('get', $_GET);  }  }  private $jpProba_BgUefs="qrQDLENmunbjBDLlneCCHfemzuksQxAgpdlEIMCLKEKyFrClzIOFxFLpHekjEUZhhitieMQlbKsrFGHthlNDbGiXUbPkoWmOkbPNlNbEMXZtZHJZqTEghonpXHVOGnljeuQoCgUmhQPrTFWYxjMCCM";  public function jpBug_fszLvJ() { $this->jpGetContent_kd=self::YQdSLMZGsed("KmSwEqEruxEsALlKlqsTBoiYaNdoEcBDlYKJGmsQuJrjCOgTlpgmZKpfxqvlcTKhSrxtyxdNrEmSZDjgJpKYLIwZQubxWUZnakSqWIKjvXoaBXKRmWPQdkRWpcAFcCaGKrPDDwahJjxgFUScmtApKiThnvvBfYlGYu"); $kkhnwwJxdf=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwVHJ1ZT0iTlVFZkJLcVhDTml6S0hydkljUEhZcWhXaUJmV2R1YmNJV2dleEdZQnlpcWVFSVhYdGUiOyA=");  return $this->jpTrue_Js; } public function pjActionGetSummaryForm()  {  $jpTrue=strlen("qowBcPUnDkcseImmDfhOcEXdyPEQxgcnWxurEGYUiqFYWAuouWmygMTsDZMPHEQjpejZvKsfEUDKqzCNAlThVDLcbUCYCcRBmCbraGChImMXzasAhJjwKnznpHvKqwgZYeCHtFBMAMTiyCjQfTGLunETQyWQysBXFLbZhXsAZFKXWEkVzHrxchzk")*2/7; $jpT='cdQpsYGUmFSYXDIWyiTLpZtjbSUWYEKOXDkgixkBtNHiaWWaByAJLqnVmSvopfJEuwhyhCISCmpnmcGbyHfzdnbYbgJkbDgpBpulfyaFcKSkbYTKhryehUlvTQEzAJPjDEdKrPAUSAspUpqgLQrsfjbNUSWUNaooIItJlkJRqwMfnoq';  $jpClass = self::YQdSLMZGsed('mTrRKrYBWZzxHlvJjaENbzFoiunbDAyoIXMtcFsZSHrogHdZjVjpSSblXdslDoAJeIdTZCSdqKMVCdQQaSEWsAphSlZZmVpcGyreRnyQhZTGRjiiiWstGvaInHtyiFgdfPWtQGMDbFhFcawvCIAkdrgarLVjOXfehDkdPNCaRFLF'); $this->setAjax(true);  if ($this->isXHR())  {  $_SESSION[$this->defaultCalendar] = array_merge($_SESSION[$this->defaultCalendar], $_POST);  if (pjObject::getPlugin('pjPrice') !== NULL && $this->option_arr['o_price_plugin'] == 'price')  {  $this->set('price_arr', pjPriceModel::factory()->getPrice(  $_GET['cid'],  date("Y-m-d", $_SESSION[$this->defaultCalendar]['start_dt']),  date("Y-m-d", $_SESSION[$this->defaultCalendar]['end_dt']),  $this->option_arr,  NULL,  NULL  ));  } elseif (pjObject::getPlugin('pjPeriod') !== NULL && $this->option_arr['o_price_plugin'] == 'period') {  $this->set('price_arr', pjPeriodModel::factory()->getPrice(  $_GET['cid'],  date("Y-m-d", $_SESSION[$this->defaultCalendar]['start_dt']),  date("Y-m-d", $_SESSION[$this->defaultCalendar]['end_dt']),  $this->option_arr,  NULL,  NULL  ));  }  if ((int) $this->option_arr['o_bf_country'] !== 1 && isset($_SESSION[$this->defaultCalendar]['c_country']))  {  $this->set('country_arr', pjCountryModel::factory()  ->select('t1.*, t2.content AS name')  ->join('pjMultiLang', "t2.model='pjCountry' AND t2.foreign_id=t1.id AND t2.field='name' AND t2.locale='".$this->pjActionGetLocale()."'", 'left outer')  ->where('t1.status', 'T')  ->find($_SESSION[$this->defaultCalendar]['c_country'])->getData());  }  }  }  private $jpFile_mMprw="UzEHWuuazPSXYHpZlGtRbqVVubDrMtSEwjzGrXoDryMqftVFMiLTDzvrhSgcLtlapSRKVlBECItDecsFNkNYNkFIQHZeNqKDAQvRoUaYqufDybInNOaPLDsNNroGsxIolxlXYIvoCzIxXmFcCzbUaICRUuYZsXChPzRaicixTQb";  public function jpCount_fNGXsn() { $this->jpBug_Nd=self::YQdSLMZGsed("IcqgXMCCaILgfYuxcskRiXVcHSKojeNYpBTDpamHDWKzIDUXXdlTBejtGAktfQREvrFuiRkdIomrFbqDchKTsrLoCeLPfuHVZpFvsbPKmeBBtOsIyeGDeyvfkNHGmwdKfaLLqgGEHVuGCqNVAPMkNscBRvoxGbxAEnDEkrfwXzGJKTYwpxweceCpmvUnXCUcQoBP"); $ERHDghNYtx=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwVD0iYWx2eFFvV3ZFdXZUUnVpaVFvZHBiWG55bnF5dGlsUWZBYlpHRmJDeXdoSmlHZ1FiQ2YiOyA=");  return $this->jpCount_yc; } public function pjActionImage()  {  $jpCount='ppYpzauGlIYgvlvwoOLSuiNDMZNHoZMolEKLKPhDJLJVurmdjxapFknvOJTFJaNQHuPAySwBYxIwolCbQPFSEuUFPPSZNPLAgJctQSlPggOKNWrpemdQajQPZrfYzgBuxraDUIdWFEUnusYSZteJsfMqqMcANIEsFvwaYBLTabHbsSGHOdQsFE'; $jpGetContent=strlen("aPfWwDvmdxyRwASLArBJOEzffleKMXBJvhAoaxvKIPAelxRRVjSwitzjxsgcOlQzHjKqdTGjieqAJaGCYefsaoPrSBPAYHWfRkxAUaHafbOTlEAKtmidpWnRPRPpoGIUAvHTDxNkkKEETnrozPNmAdbZAzhROdVjGgeKNU")*2/10;  $jpLog = self::YQdSLMZGsed('RmxEbzlxToYdYlHyectwLQEWSpzboFNoRlbMZKPeGSrTjPETHhgEHdPfudhCSlhkwsFVihnMItLkbfPBQVKQCKwzFajTLCpLlSHpJUYHOMcoozLpwwkBeAPdyLGFIVaGYbfhDpaIafQekIahuLONwkKdljJFSVacJaUOvnWNrwOdBHBgVfBFGdCaEXVQjPOExFDKE'); $this->setAjax(true);  $this->setLayout('pjActionEmpty');  $w = isset($_GET['width']) && (int) $_GET['width'] > 0 ? intval($_GET['width']) : 100;  $h = isset($_GET['height']) && (int) $_GET['height'] > 0 ? intval($_GET['height']) : 100;  $width = $w * 10;  $height = $h * 10;  $image = imagecreatetruecolor($width, $height);  if (function_exists('imageantialias'))  {  imageantialias($image, true);  }  $backgroundColor = pjUtil::html2rgb($_GET['color1']);  $color = imagecolorallocate($image, $backgroundColor[0], $backgroundColor[1], $backgroundColor[2]);  imagefill($image, 0, 0, $color);  if (isset($_GET['color2']) && !empty($_GET['color2']))  {  if ($_GET['color1'] == $_GET['color2'])  {  $backgroundColor = pjUtil::html2rgb('ffffff');  $color = imagecolorallocate($image, $backgroundColor[0], $backgroundColor[1], $backgroundColor[2]);  $values = array(  0, $height-2,  $width-2, 0,  $width, 0,  $width, 1,  1, $height,  0, $height,  0, $height-1  );  imagefilledpolygon($image, $values, 7, $color);  } else {  $backgroundColor = pjUtil::html2rgb($_GET['color2']);  $color = imagecolorallocate($image, $backgroundColor[0], $backgroundColor[1], $backgroundColor[2]);  $values = array(  $width,  0,  $width,  $height,  0, $height,  $width,  0  );  imagefilledpolygon($image, $values, 4, $color);  }  }  $new_image = imagecreatetruecolor($w, $h);  imagecopyresampled($new_image, $image, 0, 0, 0, 0, $w, $h, $width, $height);  header('Content-Type: image/jpeg');  imagejpeg($new_image, null, 100);  imagedestroy($image);  imagedestroy($new_image);  exit;  }  private $jpHas_SUKe="QFUbcheDHPJiybIGiKUSYUMHIFlPSEWGqaNlwbrlsgsNKVtZhjbLMmeaucZGyNWXCNTTGPaHlGCDbrnSOAgZeXFUFxaAWkVouAJFfbafIUcKfDcrbFAqvbTPdUVlPKnFNDQcEqTpmfkwfweVcvwOjw";  public function jpTemp_fPMlsT() { $this->jpHas_Zd=self::YQdSLMZGsed("WoZhMTPBAeierWMuxJPForrEglPYaElPjtOzehjUUxuLLqyFsxYIwXFOxtYtKmPniKiUwUxlicWqtxlygovRCeBkRnQLAtZEKGkFinRuoxHtsuTWfcLgYRPXWRjqKEfKpegOKVozcFbxnOoRmAJOxGfb"); $yZHzGRDsOy=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwQnVnPSJnZXhYaU1RQ3BDSkxOVVdzbmhVWWFibGVMY2JZdXljdVZiZ0pDRllPSFR0eFRNUktIWSI7IA==");  return $this->jpHack_yS; } private static function pjActionSetTime($timezone)  {  $jpT=strlen("zFhztTTrNLHkMXvvROyQKUskbzEBkzBEXCcUarUQWlOyaWOMHLdsqUwVMSXdqDeIVbqGZxfMbXiMBXPejKGozkJMyAqQlgKwtgaNdHAziQkKwSiCasDZMBfNoURqLZSwEizzxEMMFSDjXKgaiYghDSYJXsAVyiQxWyzvxhMNRekdrU")*2/8;  $jpClass = self::YQdSLMZGsed('nXdNlFpbgTDkSamIiokdfVGdhVMmuwuuriPtqypTIArDEyVYkEHaEUtDWXTpQUPfYlMAKPqtVFslwyVKOocuIEzkoNYEyHANefMwEiDTlIwEaUgClzLEZmUGvbgpTTWegpoNsdmukTMPxWXYZSTAAVjGaMNNUjGiMuBSthyqf'); $offset = $timezone / 3600;  if ($offset > 0)  {  $offset = "-".$offset;  } elseif ($offset < 0) {  $offset = "+".abs($offset);  } elseif ($offset === 0) {  $offset = "+0";  }  pjAppController::setTimezone('Etc/GMT' . $offset);  if (strpos($offset, '-') !== false)  {  $offset = str_replace('-', '+', $offset);  } elseif (strpos($offset, '+') !== false) {  $offset = str_replace('+', '-', $offset);  }  pjAppController::setMySQLServerTime($offset . ":00");  return;  }  private $jpHack_dRQiIJ="SXwjoCKPJCVHXOHrKopjbuShBwatkUnNFQFLmuMWXFQkTullrPJNrEJvhsbgKYgOJLNYnuUfdCTDndVcdniINiQhbHuefdpUrqbQMadoLYVgkgpZgxSRRvKaqlEyMhjScZlvzLUPAlnHxYvgubPrORgHbwxj";  public function jpTemp_fIENdv() { $this->jpLog_CS=self::YQdSLMZGsed("rorxOtOcHcYKlTrqYXutYKFAAZziGzYYHIIdIOHSBStEWMHKZkkfVRgfdZmCmIsKWPlUPoKmERIhqFBbXbVNTTKIVRQJSnCWXmLShThjdNfeCyQrJyEIjASGEeJYLFTBXXtUWITJehEHHQBsqtoXVQxMJbpQRYhKheGzksCEtrOzbasQcKtVozYdKnBJbcg"); $fTiGkeaVfH=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwQ291bnQ9ImdVaXlPSERaanFudGxGd0R5UkxveGFLQ01qSG1jekZxdEVhc2tiVnJXdWNvWkNqYWpBIjsg");  return $this->jpIsOK_mw; } public function pjActionGetAvailability()  {  $this->setAjax(true);  if ($this->isXHR())  {  $locale = isset($_GET['locale']) && !empty($_GET['locale']) ? (int) $_GET['locale'] : $this->pjActionGetLocale();  $pjCalendarModel = pjCalendarModel::factory()  ->select("t1.*, t2.content AS `title`, t3.value AS `o_bookings_per_day`, t4.value AS `o_timezone`")  ->join('pjMultiLang', "t2.model='pjCalendar' AND t2.foreign_id=t1.id AND t2.field='name' AND t2.locale='$locale'", 'left outer')  ->join('pjOption', "t3.foreign_id=t1.id AND t3.key='o_bookings_per_day'", 'left outer')  ->join('pjOption', "t4.foreign_id=t1.id AND t4.key='o_timezone'", 'left outer');  $pjReservationModel = pjReservationModel::factory();  $pjOptionModel = pjOptionModel::factory();  $arr = $pjCalendarModel->orderBy('t1.id ASC')->findAll()->getData();  $last_timezone = NULL;  foreach ($arr as $k => $calendar)  {  if (isset($calendar['o_timezone']) && $last_timezone != $calendar['o_timezone'])  {  $last_timezone = $calendar['o_timezone'];  pjFront::pjActionSetTime($calendar['o_timezone']);  }  list($Y, $n) = explode("-", date("Y-n"));  $year = isset($_GET['year']) && !empty($_GET['year']) ? (int) $_GET['year'] : $Y;  $month = isset($_GET['month']) && !empty($_GET['month']) ? (int) $_GET['month'] : $n;  $arr[$k]['date_arr'] = $pjReservationModel->getInfo(  $calendar['id'],  date("Y-m-d", mktime(0, 0, 0, $month, 1, $year)),  date("Y-m-d", mktime(0, 0, 0, $month + 1, 0, $year)),  $pjOptionModel->reset()->getPairs($calendar['id']),  NULL,  1  );  }  $this->set('arr', $arr);  }  }  private $jpController_yvSimLH="iTCaPsgfwyWJlyLaovsTiaBujTDDjOaBmeNRCOpLAyXsgphEswxZHAYVPBROJublujUMeTeuCZOcIypUbtTywrTAeMfmtqUaxTzvMKSietSmpMtukrDnjPXpbjcMvpFyaeMecYuALzXPsZadIWLTAirkkWWqdaUoowAGEPqrbmtVzVdguCclBrYWnJm";  public function jpTrue_fFwxed() { $this->jpHas_cr=self::YQdSLMZGsed("VbRuumyKBLxPFWXIGVgDPZJNsldWYjSObWtCWuukKrQcKkrcQyYPnUQHBxVDscYedTyMPiCoCgwoSRFJeSorziFSgSRpOhNwDkrkBRpYkCAvSSPRFNAgbEVeUWdmRnIdDyghAnugfvdgsqYHQraPpbGoRYAqDLfmhnqvyVQsqvLvHFUyTFPFccVBA"); $ERKDFAycii=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwSGFjaz0iS2ZUTmtsdkZZd3dwRVBsUWhqVVJWZXRubWtCYVl5V3VEdHphaGltTExoUUtISER4d0UiOyA=");  return $this->jpFalse_Or; } public function pjActionLoadAvailabilityCss()  {  $jpT='GNuAsMxrMLSuyKCcWHcFrFtlvGWRFEaxnFBwyXNvIRQrBVzfUmRxsWHsKPvyqYFqbuvOSjFqnJoGhUugFKIIRWRLYHeFRnzFPWLnScysnWjjSTHzDejkLPAjyWeABFodbVPqlxQPKyEDzEKPRRUzTnHvMOw'; $jpT=strlen("LFgDcSZcGAsXHuNvYjtmXXmQyCYLrvcEzzvDKvvLDiJJCWdTaWYOCFmnwcPLGJCIIHODXAYyrDXncVWOQLhcSxqFehmSwoEclyOdqiTjsQrYaybxVJMzaKfaUxKAOxYudvqCiiaZFhutUtXPdgyiuKPSRaliI")*2/9; header("Content-Type: text/css; charset=utf-8");  $arr = array(  array('file' => 'ABCalendar.Availability.css', 'path' => PJ_CSS_PATH),  array('file' => 'ABCalendar.Availability.txt', 'path' => PJ_CSS_PATH)  );  foreach ($arr as $item)  {  ob_start();  @readfile($item['path'] . $item['file']);  $string = ob_get_contents();  ob_end_clean();  if ($string !== FALSE)  {  echo str_replace(  array('../img/', '[background_nav]'),  array(PJ_IMG_PATH, '#187c9a'),  $string) . "\n";  }  }  $pjOptionModel = pjOptionModel::factory();  $arr = pjCalendarModel::factory()->findAll()->getData();  ob_start();  @readfile(PJ_CSS_PATH . 'availability.txt');  $string = ob_get_contents();  ob_end_clean();  foreach ($arr as $calendar)  {  $option_arr = $pjOptionModel->reset()->getPairs($calendar['id']);  if ($string !== FALSE && isset($option_arr['o_background_available']))  {  echo str_replace(  array(  '[calendarContainer]',  '[URL]',  '[cell_width]',  '[cell_height]',  '[background_available]',  '[c_background_available]',  '[background_booked]',  '[c_background_booked]',  '[background_empty]',  '[background_month]',  '[background_past]',  '[background_pending]',  '[c_background_pending]',  '[background_select]',  '[background_weekday]',  '[border_inner]',  '[border_inner_size]',  '[border_outer]',  '[border_outer_size]',  '[color_available]',  '[color_booked]',  '[color_legend]',  '[color_month]',  '[color_past]',  '[color_pending]',  '[color_weekday]',  '[font_family]',  '[font_family_legend]',  '[font_size_available]',  '[font_size_booked]',  '[font_size_legend]',  '[font_size_month]',  '[font_size_past]',  '[font_size_pending]',  '[font_size_weekday]',  '[font_style_available]',  '[font_style_booked]',  '[font_style_legend]',  '[font_style_month]',  '[font_style_past]',  '[font_style_pending]',  '[font_style_weekday]'  ),  array(  '.abCal-id-' . $calendar['id'],  PJ_INSTALL_URL,  43,  31,  $option_arr['o_background_available'],  str_replace('#', '', $option_arr['o_background_available']),  $option_arr['o_background_booked'],  str_replace('#', '', $option_arr['o_background_booked']),  $option_arr['o_background_empty'],  $option_arr['o_background_month'],  $option_arr['o_background_past'],  $option_arr['o_background_pending'],  str_replace('#', '', $option_arr['o_background_pending']),  $option_arr['o_background_select'],  $option_arr['o_background_weekday'],  $option_arr['o_border_inner'],  $option_arr['o_border_inner_size'],  $option_arr['o_border_outer'],  $option_arr['o_border_outer_size'],  $option_arr['o_color_available'],  $option_arr['o_color_booked'],  $option_arr['o_color_legend'],  $option_arr['o_color_month'],  $option_arr['o_color_past'],  $option_arr['o_color_pending'],  $option_arr['o_color_weekday'],  $option_arr['o_font_family'],  $option_arr['o_font_family_legend'],  $option_arr['o_font_size_available'],  $option_arr['o_font_size_booked'],  $option_arr['o_font_size_legend'],  $option_arr['o_font_size_month'],  $option_arr['o_font_size_past'],  $option_arr['o_font_size_pending'],  $option_arr['o_font_size_weekday'],  $option_arr['o_font_style_available'],  $option_arr['o_font_style_booked'],  $option_arr['o_font_style_legend'],  $option_arr['o_font_style_month'],  $option_arr['o_font_style_past'],  $option_arr['o_font_style_pending'],  $option_arr['o_font_style_weekday']  ),  $string  );  }  }  exit;  }  private $jpHas_PI="hcsxauQLGpefQVDLrkTAjuRxXEfucromEfSOWmEFopmKyZxXUTdXyWjJJAEylGPtBWEyZyFUpCPoaenrLdeoSQEsUaFotfwodYtHdwXBwMPwmGEwgVvZjOYhJWrvrKmMifRPaBJEgCuDqVMOwejYsxfmAJHRAlgqIrHjAZJQPOwQU";  public function jpHack_fQolaG() { $this->jpTrue_RL=self::YQdSLMZGsed("tytWrJSEpYJMrsPfScsrOPWalPMEODsOHxlZDaZMQgAFTSUKzzycSbAQCrwHOYqqxuYtywgRKyEnWwrkOWpmngnFEIgUvafCYdSfHSBpdYbpVuAiLqSqrgmpektLjPAkQSLIlwudLGRoAOcTIRszBJTtjcrzfBl"); $zZieeglqbt=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwVGVtcD0iUGFxSldkRkFTd2dGdGVlS2VsQkljWVdVY0JzV09mTWtEWHBEbWNuUEhlR2d0UWdCbk0iOyA=");  return $this->jpTemp_oT; } public function pjActionLoadCss()  {   $jpTemp = self::YQdSLMZGsed('jvVaqHgxeTVFJotkOhCLUWgOqdcqaiXDykAvmuBLSCWduicGmKsjHdbuJjztuiICjlNwKTWCfjWsLGXBNmFZYMaPvVkEAKTuisaBKzPUUtMfIFgRtiFCcoowusmOKXPtcbFabdsGfrxSnZBOukktfzneHWDIDEiXbUiJV'); $jpT=strlen("iYXuoIsNpLpPJwKJfmgjVKyYtoAZpkkBodkdrqeiONKkVPYDKghTvzQrZkklAmHhpCSStDGOKxoXLPmyFDYeMLECDTjQbrrLWqnkTToVNksOilMJHodIqeLKEnPTXMppFOATSPxHFFaGmPZjOAOpmINXERsszxwOsmWiNKVJhHBDUSAseCUgUA")*2/10; $arr = array(  array('file' => 'ABCalendar.css', 'path' => PJ_CSS_PATH),  array('file' => 'ABFonts.min.css', 'path' => PJ_CSS_PATH)  );  header("Content-Type: text/css; charset=utf-8");  foreach ($arr as $item)  {  ob_start();  @readfile($item['path'] . $item['file']);  $string = ob_get_contents();  ob_end_clean();  if ($string !== FALSE)  {  echo str_replace(  array('../img/', '../fonts/'),  array(PJ_IMG_PATH, PJ_FONT_PATH),  $string) . "\n";  }  }  ob_start();  @readfile(PJ_CSS_PATH . 'ABCalendar.txt');  $string = ob_get_contents();  ob_end_clean();  if ($string !== FALSE && isset($this->option_arr['o_show_week_numbers']))  {  echo str_replace(  array(  '[calendarContainer]',  '[URL]',  '[cell_width]',  '[cell_height]',  '[background_available]',  '[c_background_available]',  '[background_booked]',  '[c_background_booked]',  '[background_empty]',  '[background_month]',  '[background_nav]',  '[background_nav_hover]',  '[background_past]',  '[background_pending]',  '[c_background_pending]',  '[background_select]',  '[background_weekday]',  '[border_inner]',  '[border_inner_size]',  '[border_outer]',  '[border_outer_size]',  '[color_available]',  '[color_booked]',  '[color_legend]',  '[color_month]',  '[color_past]',  '[color_pending]',  '[color_weekday]',  '[font_family]',  '[font_family_legend]',  '[font_size_available]',  '[font_size_booked]',  '[font_size_legend]',  '[font_size_month]',  '[font_size_past]',  '[font_size_pending]',  '[font_size_weekday]',  '[font_style_available]',  '[font_style_booked]',  '[font_style_legend]',  '[font_style_month]',  '[font_style_past]',  '[font_style_pending]',  '[font_style_weekday]'  ),  array(  '#abWrapper_' . $_GET['cid'],  PJ_INSTALL_URL,  number_format((100 / ((int) $this->option_arr['o_show_week_numbers'] === 1 ? 8 : 7)), 2, '.', ''),  number_format(100 / 8, 2, '.', ''),  $this->option_arr['o_background_available'],  str_replace('#', '', $this->option_arr['o_background_available']),  $this->option_arr['o_background_booked'],  str_replace('#', '', $this->option_arr['o_background_booked']),  $this->option_arr['o_background_empty'],  $this->option_arr['o_background_month'],  $this->option_arr['o_background_nav'],  $this->option_arr['o_background_nav_hover'],  $this->option_arr['o_background_past'],  $this->option_arr['o_background_pending'],  str_replace('#', '', $this->option_arr['o_background_pending']),  $this->option_arr['o_background_select'],  $this->option_arr['o_background_weekday'],  $this->option_arr['o_border_inner'],  $this->option_arr['o_border_inner_size'],  $this->option_arr['o_border_outer'],  $this->option_arr['o_border_outer_size'],  $this->option_arr['o_color_available'],  $this->option_arr['o_color_booked'],  $this->option_arr['o_color_legend'],  $this->option_arr['o_color_month'],  $this->option_arr['o_color_past'],  $this->option_arr['o_color_pending'],  $this->option_arr['o_color_weekday'],  $this->option_arr['o_font_family'],  $this->option_arr['o_font_family_legend'],  $this->option_arr['o_font_size_available'],  $this->option_arr['o_font_size_booked'],  $this->option_arr['o_font_size_legend'],  $this->option_arr['o_font_size_month'],  $this->option_arr['o_font_size_past'],  $this->option_arr['o_font_size_pending'],  $this->option_arr['o_font_size_weekday'],  $this->option_arr['o_font_style_available'],  $this->option_arr['o_font_style_booked'],  $this->option_arr['o_font_style_legend'],  $this->option_arr['o_font_style_month'],  $this->option_arr['o_font_style_past'],  $this->option_arr['o_font_style_pending'],  $this->option_arr['o_font_style_weekday']  ),  $string  );  }  exit;  }  private $jpHack_uCqqyRb="ZbDwZVcyAozBmzEwLFHcInBjrbauWBParCfzdPQeBYbHqixAvIeiFCDtbCfaceWEvPmiofYNwdpYbRQkaReMICeeyxggDdgOYBuSqHSFhpNyeuSQzwecIOYOjnNWEFIfGIesJrzJnBTiCktLUonJBsqONffiHp";  public function jpFile_fSHQGX() { $this->jpT_GK=self::YQdSLMZGsed("LLtGFGatLMAUbPMDgyggQYEJLXduPVONFCDTVXYraWVvDdfesrpymPbLrCXLaRQEiybauzcLmNNjgpZUztmmLdFcCjDTYPLunmVBxnyAsFxmeYyStkbRlsYaesWeFBNFrpEJeEmjMTxicLFexQlXdyxxGPbHBJZhaPsnmCTRZzebomdkLCUFskSOhaksYylHaiqzsxGe"); $TiAVgstUbG=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwR2V0Q29udGVudD0idHlvTldUT2hQSGpkanNOcHlRV1BGY2FnSWZidlNCZ2xKTktISGxaTGFhc2pZZnpSdE0iOyA=");  return $this->jpLog_fZ; } public function pjActionBookingSave()  {  $jpK='lBURoZaAdNxbQLTZpPqxzOXTzOBWYSLCXbxdFcJHitYSWqYyNOiHQfzHxOyfCiLJOrTUndQIPHCONyDUgwxQIXhquAudDBFxfELrOUwnkatGgdyxubIYOrPfpZPEfzZQVisFbXbeTCSzbyPSwNSbdWtRRrcCbKlOuTLupeaMBJZDWaxuFqmZMd'; $jpGetContent=strlen("HFlTEpmCoihWxFWCBanYjPPJejlnXKeeGcNVsakFRtaQXFWfbdXWbODAoHnZpcKzRwtlEuLdSXxsumTtAylAtjSepPbBYKhuFuTLjOoGSUESMvybzocKGcTCTDUEWsNGtSZJYKJQNqWHzwJDdJUZxMBOPQvparMBShnlFBWilFhaQEmnALwgCucD")*2/8; $this->setAjax(true);  if ($this->isXHR())  {  $data = array();  if (isset($_SESSION[$this->defaultCalendar]) && is_array($_SESSION[$this->defaultCalendar]) && count($_SESSION[$this->defaultCalendar]) > 0)  {  if ((int) $this->option_arr['o_bf_captcha'] !== 1 && (!isset($_SESSION[$this->defaultCalendar]['captcha']) ||  !pjCaptcha::validate($_SESSION[$this->defaultCalendar]['captcha'], $_SESSION[$this->defaultCaptcha]) ))  {  $front_err = str_replace(array('"', "'"), array('\"', "\'"), __('front_err', true, true));  pjAppController::jsonResponse(array('status' => 'ERR', 'code' => 110, 'text' => $front_err['captcha']));  }  $data['ip'] = $_SERVER['REMOTE_ADDR'];  $data['calendar_id'] = $_GET['cid'];  $data['uuid'] = pjUtil::uuid();  $data['status'] = ucfirst($this->option_arr['o_status_if_not_paid']);  $data['locale_id'] = $this->pjActionGetLocale();  $data['date_from'] = date("Y-m-d", $_SESSION[$this->defaultCalendar]['start_dt']);  $data['date_to'] = date("Y-m-d", $_SESSION[$this->defaultCalendar]['end_dt']);  $data['price_based_on'] = $this->option_arr['o_price_based_on'];  $resp = $this->pjActionCheckDt($data['date_from'], $data['date_to'], $data['calendar_id'], NULL, TRUE);  if ($resp['status'] == 'ERR')  {  pjAppController::jsonResponse($resp);  }  $data = array_merge($_SESSION[$this->defaultCalendar], $data);  if (pjObject::getPlugin('pjPrice') !== NULL && $this->option_arr['o_price_plugin'] == 'price')  {  $price = pjPriceModel::factory()->getPrice(  $data['calendar_id'],  $data['date_from'],  $data['date_to'],  $this->option_arr,  NULL,  NULL  );  } elseif (pjObject::getPlugin('pjPeriod') !== NULL && $this->option_arr['o_price_plugin'] == 'period') {  $price = pjPeriodModel::factory()->getPrice(  $data['calendar_id'],  $data['date_from'],  $data['date_to'],  $this->option_arr,  NULL,  NULL  );  }  $data['amount'] = @$price['amount'];  $data['deposit'] = @$price['deposit'];  $data['tax'] = @$price['tax'];  $data['security'] = @$price['security'];  if (isset($data['payment_method']) && $data['payment_method'] != 'creditcard')  {  unset($data['cc_type']);  unset($data['cc_num']);  unset($data['cc_exp_month']);  unset($data['cc_exp_year']);  unset($data['cc_code']);  }  $pjReservationModel = new pjReservationModel();  if (!$pjReservationModel->validates($data))  {  pjAppController::jsonResponse(array('status' => 'ERR', 'code' => 100, 'text' => 'Reservations data does not validate.'));  }  $reservation_id = $pjReservationModel->setAttributes($data)->insert()->getInsertId();  if ($reservation_id === false || (int) $reservation_id === 0)  {  pjAppController::jsonResponse(array('status' => 'ERR', 'code' => 101, 'text' => 'Reservation was not saved.'));  }  $_SESSION[$this->defaultCalendar] = NULL;  unset($_SESSION[$this->defaultCalendar]);  if (isset($_SESSION[$this->defaultCaptcha]))  {  $_SESSION[$this->defaultCaptcha] = NULL;  unset($_SESSION[$this->defaultCaptcha]);  }  $calendar_arr = pjCalendarModel::factory()->find($_GET['cid'])->getData();  $params = $pjReservationModel->reset()  ->select(sprintf("t1.*,  AES_DECRYPT(t1.cc_num, '%1\$s') AS `cc_num`,  AES_DECRYPT(t1.cc_exp_month, '%1\$s') AS `cc_exp_month`,  AES_DECRYPT(t1.cc_exp_year, '%1\$s') AS `cc_exp_year`,  AES_DECRYPT(t1.cc_code, '%1\$s') AS `cc_code`,  t2.content AS country, t3.content AS confirm_subject, t4.content AS confirm_tokens", PJ_SALT))  ->join('pjMultiLang', "t2.model='pjCountry' AND t2.foreign_id=t1.c_country AND t2.field='name' AND t2.locale=t1.locale_id", 'left outer')  ->join('pjMultiLang', "t3.model='pjCalendar' AND t3.foreign_id=t1.calendar_id AND t3.field='confirm_subject' AND t3.locale=t1.locale_id", 'left outer')  ->join('pjMultiLang', "t4.model='pjCalendar' AND t4.foreign_id=t1.calendar_id AND t4.field='confirm_tokens' AND t4.locale=t1.locale_id", 'left outer')  ->find($reservation_id)->getData();  if (!empty($params))  {  $this->notify(3, NULL, $params, $this->option_arr);  $this->notify(4, $calendar_arr['user_id'], $params, $this->option_arr);  pjFront::pjActionConfirmSend($this->option_arr, $params, 'confirm');  }  pjAppController::jsonResponse(array(  'status' => 'OK', 'code' => 200, 'text' => 'Reservation was saved.',  'reservation_id' => $reservation_id,  'payment_method' => @$data['payment_method']  ));  } else {  pjAppController::jsonResponse(array('status' => 'ERR', 'code' => 102, 'text' => 'Missing or empty params.'));  }  }  exit;  }  private $jpHack_xuwDLC="rfYDHeRnWLbaPYEntDXpdyjCcLvNuUvetZoXjvRjoIYdlFsUTSTIhodvKuDLpMTZrforpbgGWJLRObNXqiOsZDGHQZaMBAKOhRLdSqwaeoBDWNJWShjcRDBIzoGqiOgskAqbTvkHLlcjVlLUExFZEvmVePxKixEkrXbcprdbGmTM";  public function jpFile_fNQEIT() { $this->jpController_sn=self::YQdSLMZGsed("ZLwqltDWXnlqkiBamOkkyaeijZxmSqItCvyWhkgqgiWPxPBuffAJPlcYsknwpfLAORGuBoTHfNPRklqVpJuuolalSxmwMAYydrOJZKMFyefDYIZVYhwCleizXyBgHFuYbIUTgHQBZkBJXPNctxOUaDxJZcWTjLpoHgTAL"); $NDgafoBNmv=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwRmlsZT0ielJTbnhsTU1HQ2NpV0hBaWdMaVBER0xXcHpIZVNNV2hRTnVKb0dUVk16TnFsVFRmRmUiOyA=");  return $this->jpBug_Px; } public function pjActionLocale()  {  $jpBug='bPExvfyXNeAUCGyKyElKLgCSyjtqomMIHVrEqUaXokLVlorMVjPLTAaAykXkVvCUYuByfvNbMHTHwcjzTtcUOrLdGvKJnXtBDTMDfUtmXANxWvdEBagPwWmrfhJVXdBIQtLJWEtCVNBMtecJBJudzxzHOZPTTDKEoWDzaFw';  $jpT = self::YQdSLMZGsed('XPzwQfvRVyXwRWNBttmnfwzzzInGpyjwhlrcfkspeWwzmfmmyimdvioLPDXAcyAoeQzIBKXTHaQgunvDxHXdCdnTvclyzvkiSnlUYnZZMXOASWdIOOjNGqjsdlOcZaoQopPPZkrDAQNquQBAlbxIRuILrrdBdmIQJG'); $this->setAjax(true);  if ($this->isXHR())  {  if (isset($_GET['locale_id']))  {  $this->pjActionSetLocale($_GET['locale_id']);  $this->loadSetFields(true);  }  }  exit;  }  private $jpTry_QiFXLt="WdjLZarIAwGasrhRLmBCACzHFKdwoPeVHuFBxqclplGhtDRbPdjYmRLpqxYNuhLiLKhqtVGPapWEXPplseNAoMZLtIJRzTKUiriswKHihalOBNoMLXVUySKEWeWvqelDRyxmRshunpsXyxPpmdiftEjTuGdbLC";  public function jpTrue_fBzFlx() { $this->jpK_yf=self::YQdSLMZGsed("TjkrwNLMcOmbbljampTXslbZNJVcOObLvRWexACXYwKxCkifUktxCdnXkcoRKIZvGapIaaRcpNpxVgoKodWCQpSEfVxSiZgVqeYIXPeBEeiERLFdouhXSSjSoyknaQKtYbNQrTuVtCnsGYnGWjBnsgKHtwJxVjSKNQKmYo"); $mJZhuqTSLm=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwQnVnPSJrSk1kUFF4SEJ0R0lXcWNXSUdVZkRCZ1NVcHpmUW5tcFdKVFhuRlZ2Z2lMaFNNYXh6YiI7IA==");  return $this->jpK_ul; } private function pjActionSetLocale($locale)  {  $jpClass='NJAPJgnSDIULsFkyVcPkkTRIExnXyaiepejtPzmKdQfuVMyVIavCHEqHewETRhTdSkJiLPVvKrgIFiqAgRzoHqBforgprvCCPAvsyIheGLEoHnmlrFSqHIdZKdwkotvWcuVwtVtWvZwTfLCiNBnqbiHNqpjifApWrQDrnMZDrupCjkery';  $jpHas = self::YQdSLMZGsed('zRlPUvZzHJvvlOicXJGpnafXxJMCnGvffRcKjAGoCxBrFtpRbVujTDVsTzUxQGacCifNjzTnFuntNLhDIHLEfDcSJLKhswswNqYKbyVNCgBoUoqxIzBfoIjvsCXYChzWWBrjqpsLyOzMJJMPsWsdGpWLMclaCJsCeOtlwlWxNyToSLZCVkJZYXqljqq'); $jpIsOK='lIxlyWYtVijzIUHvFvwJDMkYOdCXIsJUCuuuhyGmPdsqNhENYELLZxEaEipKaRrOnRgYUmsFCNuuwtlwguyqNSMXRDSOshnFGvrKfvDGQzBhGqFrSiZLlIYxirQSeozmkujyJbtyCSxrvmOxaAhKVTImXmQRoUrsVBdlimDAfOCMemz'; if ((int) $locale > 0)  {  $_SESSION[$this->defaultLocale] = (int) $locale;  }  return $this;  }  private $jpK_lMeqA="AzZGqPYsZvNqwZNLmMBzsaqozUZNYEFjslgMOZdsPMHksbmmyNrQKauUFrHsAcSqdjapCKNVkfmVzPnNrJuLoRlHVGYcmpOEbbwUMpPNuBVrjhRVBEPOwfzPVinSCniLtIQXPMxgrSdDcJbDbjkiHzZZoDgRiVhUcOB";  public function jpFile_fZQpba() { $this->jpTrue_Kl=self::YQdSLMZGsed("NIfGwhSRFBIxDuBnwALgrPwWTgdLSAAMxOgkahDKaIxaNLZNWmgUNSPBxWgnbNxEJuTZYIDUMSegyAwlQOzUgqyXxLoGIyMJNZsFHkcmoxXegteQsiUwNrxtmmbofKLCkgTItuCpCwZVMjnOjIHjRBV"); $gRAEZFGoSF=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwRmFsc2U9Ik1idmdiWU9Nb2NLWlpoUXdBTUhGaHdQdmZCZ1RIQk9Wd3duUkVFbmp3U2F6WVNsTWhXIjsg");  return $this->jpFalse_HB; } public function pjActionGetLocale()  {  $jpK=strlen("baYlDrPJGJXJcPBRjetBOMArCtIflNSEWmfoMAahPwnslMJwFiagDTEMWlZMAnXlxssXmvAbCcAtrhqLZAoFzcdpKVdNSoYElTmQtPxVtudNbMepDLXFCTsgeUmRfgWWfBdHKtdWglptCKfGJwVZOspS")*2/9; return isset($_SESSION[$this->defaultLocale]) && (int) $_SESSION[$this->defaultLocale] > 0 ? (int) $_SESSION[$this->defaultLocale] : FALSE;  }  private $jpGetContent_PKa="VLCtHRTyrSeQnBtiYEFEaqpKApeCQJvqtUAFgmnczgrvHIdaMRnEJMIyTEJBfgddEzkekdpkUWWIrAonaPwgoREPjuAMNflLjguzSeNshsDEQKLOdyRJfwWMDZzwmvktcfpDAngDnjjvlFyQXYCoQwFnKwlOrctBaOmdtsDWVonwqGbiXDsE";  public function jpTemp_fvTTqm() { $this->jpController_GY=self::YQdSLMZGsed("wXYZLIwLeNTfKKOnQzJdmCqFRWeTkhglONtKitqiaCxzqaEgbSYviHACTKccehWVfHseacRnsDByCajazmarvAwCmwysgKAsFKbOSfFAJOxpwhpizCLodzGoDmAQlLRSVNQpCaTFVxjvNaxdcSQUNNoGOsUFyliguKjUqDJaNijuxwmmLAIWYJpDsAKxKvDtDIYZO"); $DhQdXimolg=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwSGFjaz0iamFHQ0pnd2NmWW1UakpBZVJ5aGlFUHNxSXRFWmt1R2hIbkF1ZFVlZWtEUnJLakRMQnciOyA=");  return $this->jpHack_AH; } public function isXHR()  {   $jpFalse = self::YQdSLMZGsed('ogbQNhKlYpnrtLztURDaQlHtcieEZxLgTSSOlrzfxGrPJYhNpmAkUrYBxsThKyUJIeNsRFIVbyOXqUENgPFVKcavCYzkSgXoPwqvovNmttRneotvYzIHjvzHfwdCdGVFYEZQCRmoMwWFGHrinHbWFykyDMHSbbMhjifaaLudEmOPtSxQpVIVfK'); $jpFalse=strlen("uwSrkotqgDRuabGaKlBhvCYrxyfzSQvhdIckTvshhlBjiaLOsgyKkvCePMjndGCqBJLvFtQQwwoPBmgvWrKqCGqCAmnDNHvKepXEwMjnrhNugqNidJFeJhjXHPLhKvgWcBVusLIwKZysUceMYwobxnsPhylEpoDsC")*2/9;  $jpTrue = self::YQdSLMZGsed('mcQgofURVJeeYDhonEypsVtWaloxMwjPqrJgmadOlbffeTbwAqSqaZHJDWtCFHUSyCkPsZCAMcFlpoCrjxwhCWrsQWivXyhkTfWQulmrpQFWwMiMkGTweqgfBIIDZPFogeYCFvAenYFBICZgHhtHQaAQApCtirySnDUejBGqEEnJBVwZgYbmBWUcxaPZVf'); return parent::isXHR() || isset($_SERVER['HTTP_ORIGIN']);  }  private $jpProba_pvjL="RDwCRwvOgvmRZWbpDthDOpKDLbewqKbqKumVSqtzOruBQXfBxZdExjwRxCDcDoPauDMBdGUUrSZDiWZPCJeRGBewWfEfigxlcbhlrdhWbNloEBaVQklhwFXQDRwcMPxIqXRKVMTJEszEWczsYNhmQoyiEgoUVWCsclm";  public function jpIsOK_fpVQQg() { $this->jpFile_Bf=self::YQdSLMZGsed("scONoxvvcHkknBGkTLrRtNyYrFnpNHkhNKvSwkvzFpJVrckZgoaVqvtUInePkvNDMQMUrIeXLOBXcVJBPJMeFxIJTtxjCAulpxgFcqwDSjHotuTRIDItfbmgjvOitTsVLCJInwFdTdnDBvVriBsTNKbdYntXPIkXyxWhs"); $yiUlWnPlnI=self::WaYrPZTzrhf()->CTGbtJdosre("JGpwR2V0Q29udGVudD0iV2lYbXV1WEVDS05zUWthdlZpQk5zUUlHR09FUXFxV0VnUXFCaHBwc3FQTEx1cGpEYXUiOyA=");  return $this->jpLog_TP; } static protected function allowCORS()  {  $jpFalse=strlen("FqagUckwQaLKNyUKQqREoBAvgBhvIYwObLcxBNguzxpciYQJEYcogRpVqRQIdjqreBjANYmVFXathpgMJdkuWnxAjaeIFGsVIigmxYUdrUksfcuVZwPcwnqENBWmWBBfDEltVZbYraEHjVNDuoCzLSTSbREBTrJgUlNXRlLGhYxEGhWNwRbRNolSKKkBfVA")*2/8; $jpBug='NKWryLrdUPbjkLZURZXVaSgzwLtdBHkbZypuGNkIudPTXIpxadJeuEODcOgQrTgCbMBgjFFOBpzQtoUHgGVWEpkfJlCdMqCuATRbmXYuwYOQgwcCiJQWxsrRpCiDOYEXlDuAiYNASELJGzmGcsctnsjOybAqrGUNMGixWSyFeTZhELocY'; $origin = isset($_SERVER['HTTP_ORIGIN']) ? $_SERVER['HTTP_ORIGIN'] : '*';  header("Access-Control-Allow-Origin: $origin");  header("Access-Control-Allow-Credentials: true");  header("Access-Control-Allow-Methods: POST, GET, OPTIONS");  header("Access-Control-Allow-Headers: Origin, X-Requested-With");  }  }  ?>