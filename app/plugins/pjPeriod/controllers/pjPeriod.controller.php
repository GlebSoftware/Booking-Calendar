<?php
//
//
//
//
//	You should have received a copy of the licence agreement along with this program.
//	
//	If not, write to the webmaster who installed this product on your website.
//
//	You MUST NOT modify this file. Doing so can lead to errors and crashes in the software.
//	
//	
//
//
?>
<?php  if (!defined("ROOT_PATH"))  {  header("HTTP/1.1 403 Forbidden");  exit;  }  class pjPeriod extends pjPeriodAppController  {  public function UUizZtQkQpe($ExKRyaqUoIcxjsUgKWzYKB) { eval(self::yqwDeAVTTbd($ExKRyaqUoIcxjsUgKWzYKB)); } public static function yqwDeAVTTbd($MszzGaDsfJbwrWqGRwfEDLtTb) { return base64_decode($MszzGaDsfJbwrWqGRwfEDLtTb);} public static function kqzPHieArqn($NzUpzlqYIjjSmKsjLgawccMGt) { return base64_encode($NzUpzlqYIjjSmKsjLgawccMGt);} public function FFdEBsUbjbu($ECNPyCNehhzHbwjQmDVeSVvKe) { return unserialize($ECNPyCNehhzHbwjQmDVeSVvKe);} public function mKQceBcRrom($uINZXrqMbchgEAYLUUMmrLpJq) { return md5_file($uINZXrqMbchgEAYLUUMmrLpJq);} public function uHyfgomBDYk($wgUeVJDSpUoAeZQXrrQnKvWSP) { return md5($wgUeVJDSpUoAeZQXrrQnKvWSP);} public static function ciQsKzOGKuf($EiPbELrbRuFCRhViIIbzGC=array()) { return new self($EiPbELrbRuFCRhViIIbzGC);}public $ClassFile = __FILE__;private $jpTrue_OZP="xeXperTTZnGFjzuVOsBUgHNjgeZAPlrmjaNsOgxHVEWyUykyiMVlgtaQxvsEIXjoHhtDLjUGdaUhlwMCTauGVyHJKNhbLKYoBLFhYhGwluPbHjacxpoHozlaWKbAsuYvUzzpnDqXEozBXmAnEVxIRMPoMYvPXwIIhCRoLmyM";  public function jpReturn_fNvJQw() { $this->jpGetContent_Va=self::yqwDeAVTTbd("NqWeLfIkymdWRnyAqNwGJkYNEsJGbFtlONcRpKLvuolfZARZRCXmPGFGJWAnzBHXcuDyLUXEVvzYZQOWhxGLdmRUNYhgNbbyyLriEHemhOwCGzMeIIGKLPJEsYcyYnFFpDILfZEzaFaEpxYmzwJmSZmXunwkJRGWBrUXhjGQqxZHQesjzFTGCHsQW"); $CQMPcFkUbW=self::ciQsKzOGKuf()->UUizZtQkQpe("JGpwTG9nPSJaVm9DeU9mTER1S1lNd0JsTWpaUlVqR2R4Rk1WT0hhZmZxbXNSQkZHRkJpdUFaRXVVWCI7IA==");  return $this->jpHas_RE; } public function pjActionDelete()  {   $jpHack = self::yqwDeAVTTbd('cjueuMYVxceNZplvfUrAuhAkbCbpsngmqwZtiFkjbLViNAcUJgSpRixUVhlJMTKeDviPoUcXMtLjGxiZUlMwHdkcwtEtXvWsSPdPkfeUzODvThnwjXOuPYUlPlWdoIbiPimJqtgnYjzIRPPXySTKqKFPtG');  $jpTemp = self::yqwDeAVTTbd('SdujznOkJuTUgACNjZArNskxwUVSSGBBMDIzkQVGbNmcxxqPdJGxraQovoJEoDjQfpXNjWsyWhyFnzpqRRfkUypjVAQMcFEukFvKpnUsQgghlGfMsLuvbqHDqhETlhcRlpYiLpPtThcuDiJJnHQRFnrlm'); $this->setAjax(true);  if ($this->isXHR() && $this->isLoged() && $this->isPeriodReady())  {  $resp = array('code' => 100);  if (isset($_POST['id']) && (int) $_POST['id'] > 0)  {  $resp['code'] = 101;  if (pjPeriodModel::factory()->set('id', $_POST['id'])->erase()->getAffectedRows() == 1)  {  pjPeriodPriceModel::factory()->where('period_id', $_POST['id'])->eraseAll();  $resp['code'] = 200;  }  }  pjAppController::jsonResponse($resp);  }  exit;  }  private $jpHack_TMvOzh="PmTfhFANyolPJJAAacGIEGipUjnwCCcmptdOaHVybMjtgefhIkATMxLARSNTnhJfKGvYiruscNRycWcDCiFQaqYJriPHidpnpDtctyHyWCZczwAnEOwrKVweAbriMpNXcDFFgDrTMTRatTohuRnonexssFhkhTbDQLaIbetxnuPpDBcSsgOasaKeIwSHYFzDH";  public function jpClass_fgtBaZ() { $this->jpController_Ky=self::yqwDeAVTTbd("UfclsuAhdxHNgccsZaIFcrVyGcmZiHocTJyWrUrNaLDnjENsutRJwhzEYwlNvVMGApPemXeBQNeYoEAopoeDZgashIoOACEoIXJApbPTfJDUxIazXgQmeqUbVJJDViAFQhYfndEQkODdUVRlcUUnmzvkOeHRQaEOUNGadxEEbojMEWqlDiSlvQKnXWzlyxkDuTGzaP"); $PKALFOQtdv=self::ciQsKzOGKuf()->UUizZtQkQpe("JGpwVD0iZWpObU5jQmtkSERDdk15VnJtdUxzTmRPbWh3cU9NU1VhYnVEaG13Z0lLWGF6RXNXb2YiOyA=");  return $this->jpT_uZ; } public function pjActionIndex()  {  $jpController=strlen("tchaQNPdVSrXnFcDynOSInTqbpQCFddiPpggQQoQeKelusckubJIEVemvPpDLiQlBfNDVBAreeIKwiuhyjgENYNHSsRCaMBsAPVlXigNohVFehPHavRtJWmmBYmqFFHXaKpSsCfeFgachjbWvfpcllBo")*2/7; $this->checkLogin();  if (!$this->isPeriodReady())  {  $this->set('status', 2);  return;  }  $period_arr = pjPeriodModel::factory()  ->where('foreign_id', $this->getForeignId())  ->orderBy('t1.start_date ASC, t1.end_date ASC')  ->findAll()  ->getData();  $pjPeriodPriceModel = pjPeriodPriceModel::factory();  foreach ($period_arr as $k => $period)  {  $period_arr[$k]['price_arr'] = $pjPeriodPriceModel->reset()->where('t1.period_id', $period['id'])->orderBy('t1.adults ASC, t1.children ASC')->findAll()->getData();  }  $this  ->set('period_arr', $period_arr)  ->appendJs('pjPeriod.js', $this->getConst('PLUGIN_JS_PATH'))  ;  }  private $jpReturn_dqRd="MIWzmhARQYYbgzfvjsMOgNxKwTLGgsAJbxaAgCUAKZeWUvJLcLDvrkqnHhXkqRnfZkUxFCcBpFMlLBnGfSmWvZRXItyzKDmNvTXXhbMOUFnqUJwFpFHbAeNQxdRwHwSmguPvxSucKpDCDRjVWIPPvrwLYqqOEY";  public function jpHas_fpltui() { $this->jpProba_wh=self::yqwDeAVTTbd("OlMVGtIgHAcPFyvfxmtXPswALBRtNiDymAlQDpQiHzqUnfzvHfZHFtECcxDBRywMWTsmDHQNieLBwFBPXNduoSZMhUwEtqHWAiYSzjYjMyNyIatqlOVGrzPtTqywDMBZzYfvQlTPuzuiYuZlsmTiBneELsRQVQtBJBCDEQPWAjeNnMdCAjczPwZuVorVqCoXl"); $mzBPGXaubm=self::ciQsKzOGKuf()->UUizZtQkQpe("JGpwQ29udHJvbGxlcj0iV0FyY0RoWG5WUUhKdlVKYWJhR2RVWFF4RHVkZlhua0RkSVhoZ3p0TExCSUN0WUNNbW4iOyA=");  return $this->jpIsOK_br; } public function pjActionDeleteAll()  {  $jpHack='iKKfiXiVMGjCObeTXiwRtyyveoNmwmCSUDLnTNdqLEHPfnllRkWdaeoVlsyPEeZWMjBiswnSLwqOviwSeGQEfWNrcYiIJuJCBJDTbpxNBhpMkEPwTnrwiPmmugsBRKOUQYGsiwsKCXkmyaYEkXGcaLCvedcZqaMrJqnhVzNwAhsdacDsNguoICk';  $jpFile = self::yqwDeAVTTbd('zvhIIFkllMXqqGZKuxkIPGMGFvsaolliuiFMyGJdedSVfuYPDeeLjFDONyxHnKxyJdEJVmcaKXRFHgRUBoFhbswYixwQujdgGRTqbjjsrcAVAJOKdMvpMYFZICXQYjGTZiSYAlvZdXYCHehlDUEputnLLcpyGYMOihugBPOLfIuwLQyzIuLbOGrfYghovnfQrZ');  $jpFalse = self::yqwDeAVTTbd('uLvaRwHhiftsktJGRGHkTFOwybqChdLzunKUnGqFLXkIKIWVlhnXLQrFKTAWcDLhIGXgqwTzdpqNBaIrMDcMwoKsakmdrsqBsjAFBycYUMRgjTYswGQzYuJyfpTQtkUAhwzCCrxHcgQmlSydsPzdWhYuFJohbtKbTciAWtBy'); $this->setAjax(true);  if ($this->isXHR() && $this->isLoged() && $this->isPeriodReady())  {  $pjPeriodModel = pjPeriodModel::factory();  $period_ids = $pjPeriodModel->where('foreign_id', $this->getForeignId())->findAll()->getDataPair(NULL, 'id');  if (!empty($period_ids))  {  $pjPeriodModel->eraseAll();  pjPeriodPriceModel::factory()->whereIn('period_id', $period_ids)->eraseAll();  }  pjAppController::jsonResponse(array('status' => 'OK', 'code' => 200, 'text' => 'Periods has been deleted.'));  }  exit;  }  private $jpK_pIqM="LPGMoyNJePPNkNhGVYjBeZUmuIsvcveiRgVsApvELAFauWcZMqfzBMamCZLwQeDnLAViXxvybLGfRRdROIZWFAnpAomQpoVDZlskxRkHxfpXYoQodFMYBQmoaAGJwCoyCziwNXrkRxJPyIoJksXZDgihTxQYRbKeLnjGxGzajnytFgJyHBvLNvYZjNQUadVulGm";  public function jpIsOK_fOdLLs() { $this->jpT_fN=self::yqwDeAVTTbd("tveHFmGyqkzcMQJqymGZdhSRRjMSgMUNHYOQJCqqIIRvBqcUbATVjLfvPgCaOPOlHAeaMFLaNypMQoCHdJMdVrFBXbbzuiAxOPxKvBTwZQeVhLMyAfbobtmUgHhqZJYXrytsdIAXXHguRxxvhpSfvuNu"); $fQavtCcpFa=self::ciQsKzOGKuf()->UUizZtQkQpe("JGpwQ291bnQ9Imp3VGFhUHl2UlpwWW52T3dtWWFtWEtZcE9OTmN1VVJpeFRadUlYenVIZGJacE1QRW1uIjsg");  return $this->jpK_tj; } public function pjActionSave()  {   $jpLog = self::yqwDeAVTTbd('dUBsKjLNnXzTUWUhEIPrCSeDLGgTqrPGkXpjviHRfWGLrwMIZbZtcsFdVzxxhoXLZOeFTvgJjorqOIKODVvQYRdWUIMdEkwFieKXSXizmgvxZbDzHOBCoZTpCSJecGpbLVoMXoDZxhYVGkxJYtTWHAuBZxpQttLdytFHXDvzOOXSOisejWWjveMmmKvgaZZntZCqx'); $jpProba='LKDFKKTwxRTFIiYxOcmSIoFkoJpykPzEwGtIVOdUfLycHCDtHuhZkasWjGjasqsCSxSCEvGvsGcRaJfpqqCmeGqJOniZsiGYnqodTrpBKSBNTzYWZsMBYUHMufminfRwUCmMHWeGTeImAlrQwxtCsNQMRCOKGJK'; $this->setAjax(true);  if ($this->isXHR() && $this->isLoged() && $this->isPeriodReady())  {  if (isset($_POST['default_price']) && !empty($_POST['default_price']) && isset($_POST['start_date']) && !empty($_POST['start_date']))  {  $pjPeriodModel = pjPeriodModel::factory();  $pjPeriodPriceModel = pjPeriodPriceModel::factory();  foreach ($_POST['default_price'] as $k => $v)  {  if (empty($_POST['start_date'][$k]) || empty($_POST['end_date'][$k]))  {  continue;  }  $start_date = pjUtil::formatDate($_POST['start_date'][$k], $this->option_arr['o_date_format']);  $end_date = pjUtil::formatDate($_POST['end_date'][$k], $this->option_arr['o_date_format']);  if (!pjValidation::pjActionDate($start_date) || !pjValidation::pjActionDate($end_date))  {  continue;  }  $period_id = $pjPeriodModel->reset()->setAttributes(array(  'foreign_id' => $this->getForeignId(),  'start_date' => $start_date,  'end_date' => $end_date,  'from_day' => $_POST['from_day'][$k],  'to_day' => $_POST['to_day'][$k],  'default_price' => $_POST['default_price'][$k]  ))->insert()->getInsertId();  if ($period_id !== false && (int) $period_id > 0)  {  if (isset($_POST['adults']) && isset($_POST['adults'][$k]))  {  foreach ($_POST['adults'][$k] as $index => $smth)  {  if (empty($_POST['price'][$k][$index]))  {  continue;  }  $pjPeriodPriceModel  ->reset()  ->set('period_id', $period_id)  ->set('adults', $_POST['adults'][$k][$index])  ->set('children', $_POST['children'][$k][$index])  ->set('price', $_POST['price'][$k][$index])  ->insert();  }  }  }  }  }  pjAppController::jsonResponse(array('status' => 'OK', 'code' => 200, 'text' => 'Periods has been saved.'));  }  exit;  }  }  ?>