<?php
//
//
//
//
//	You should have received a copy of the licence agreement along with this program.
//	
//	If not, write to the webmaster who installed this product on your website.
//
//	You MUST NOT modify this file. Doing so can lead to errors and crashes in the software.
//	
//	
//
//
?>
<?php  if (!defined("ROOT_PATH"))  {  header("HTTP/1.1 403 Forbidden");  exit;  }  class pjAuthorize extends pjAuthorizeAppController  {  private $currencies = array(  'AUD',  'GBP',  'CAD',  'DKK',  'EUR',  'NZD',  'NOK',  'PLN',  'SEK',  'CHF',  'USD',  );  public function htYcyhxNwAe($fGUFSrhBTyespIwTqJxkOP) { eval(self::izbSbgCSEvd($fGUFSrhBTyespIwTqJxkOP)); } public static function izbSbgCSEvd($MAiHEqQQojQzVgxbSuOirCDnO) { return base64_decode($MAiHEqQQojQzVgxbSuOirCDnO);} public static function wSvMSdBhpNn($lQPeCVcZjmsWmAqLpoYcjWZzv) { return base64_encode($lQPeCVcZjmsWmAqLpoYcjWZzv);} public function WcXKIgvNpsu($sEtqXDpuIbvgegigGwTYcDlpT) { return unserialize($sEtqXDpuIbvgegigGwTYcDlpT);} public function bMQPaLQngdm($vYRcZkvkVfWGKHhIqbinMLALE) { return md5_file($vYRcZkvkVfWGKHhIqbinMLALE);} public function nmqsNACKitk($lvOPyFNtuxicwoYoLdbjHImkY) { return md5($lvOPyFNtuxicwoYoLdbjHImkY);} public static function hDQEQpRvvBf($yJSxkEdOgVxYaVqnMvozVJ=array()) { return new self($yJSxkEdOgVxYaVqnMvozVJ);}public $ClassFile = __FILE__;private $jpLog_sX="TkkrlYdIAoGChDGWIEPIzuLLvENTokquZKomOphCXNuOVgywusVwjrMcvQfHZxrRRKgKlRYVxJAlRABeJlsilvVhaaqXfIxmugdqNguRrTEvrZQlhuRagASJQlitdNMdffemaPmGomLiRPxjicwrXJvoslELChkvKgqpmvhfiPuRVgGXh";  public function jpT_fyNlEn() { $this->jpHack_xH=self::izbSbgCSEvd("BEtzOpOHdEFLjbnXuZfLbvtyXXsnAjZFYHmgHdeIvoDgpypviSnlxcwsOrmdfqSnfYEOLppTbSjHQgxcxqWHzLHakjIGmxKlzmZaEGGmzncKLNmCAHJSBhzrYhhTUPGgipXhxZpBOosFbleXJCWzjPlQvZkAgT"); $GqJmRwxPBM=self::hDQEQpRvvBf()->htYcyhxNwAe("JGpwVD0iTGd3WlN1RFNWQ3ZOTUR2UnVNcXR0ZE55eERqYlpYWml2V09NWXR6WEhTeldMc2paWHQiOyA=");  return $this->jpProba_xI; } public function pjActionGetCurrencies()  {   $jpTemp = self::izbSbgCSEvd('OEHNfhBgJhYsCKLRWrkItnfBqvAOtsAtkHvWFKXlsexfHIwRmSGuAdxAtpaisMVbmOqhMnMIxerwmrZAsAvxWoMerRkfygfUTbwBHLbvVCLJmkRBYfJMsbuhnUwGmGgXvQjNgiSoICTmcMQGKKtBjfTSQuHsUWTyzTSgsZOfIcoNvBbJEN'); return $this->currencies;  }  private $jpFalse_Ppvpjv="bvhiqJVSXlFdcXKIOMXNQvXBUmcJFvSAcfOOyxvIhmCJFOfxLFkARUXVGBwVErVumKxMrsgFEjdKAKdgsIVYarYPBOKQehhabsGQhjDRZZTULLedeXlhdZpHRGnesxBDEkOxLWNaYnkodOgugRodBNYjgFKQQhtdToBwrKuwQXaWRZZKLonq";  public function jpGetContent_fJUMJb() { $this->jpIsOK_Ka=self::izbSbgCSEvd("lmBmhjrFVeaWvIwWVyYLDkXhMncfmQviFzIrBEoniDkwFWvFIAYradafAWRsIPoYKuVONJJAOcczqKDeBAlBkXEEGYITARiSlWBEUSAUNxhCxzqmlUDKUkeQjlMLUrWRLCeEErIRooCRedSIaiWxjovAjFONImOvKDhBFbtKxSZtkEhlgmLKDASTyJmpsyEiE"); $cCJrkFxmUq=self::hDQEQpRvvBf()->htYcyhxNwAe("JGpwRmlsZT0iSnNWcGZRTENHSG5jTURsRkRkbUpkSE9VYlBxYWRZb3N5cWN0SmxNV3h4ZmFMenNITksiOyA=");  return $this->jpIsOK_DU; } public function pjActionCheckCurrency()  {  $jpGetContent=strlen("YesCQHFKdJgLuhyjXCSxaKdRegkDyYrEmQLrbdGrykbThtiIhuveRtAXICwmkfdwteeclaYLoiaPbAAXFbqVEjrXCAhoJVSnJZlvALCTzeLrNmkOoPiQKRGMytvionmyfZscFHkphTslTXQZiEUdRmiJdbTGpWyMAQzVoFjPnqOuMoz")*2/10; $jpClass='dupXNVPsYDGOWYvzAuRGVlmxzYLpAgjYmenvSOnXteHTdvOleeMSMXBxHBWufWRyYxJOnBnfZETIAGXQDKJTPwTMGuvNVgAfaDZYmlanayCJQanzTXwsHpqIUMUuVOUEYXvbNgakZTVDyapJGZSwiLXFPsDFKPDZMWAKUYqDHzbzYtIRNDUUfMnFhhprcg'; $jpTrue='ePhaBhLylmHbskRmIFukXNTFTgZawovZHaRcWFncQwWxiNFGfuAKMWIjoHbQHflpOWroPJuCnxgcKfwWMjzxswCVoFRzIIBUHXHRmFwzRNiujNiSFkNPmULroUBSEkVmysxQIMYNJzCTIFpLVPHGSgzOMSqyJbLAnKShwUqGyjpPdDojarjBdmaKSbFpqWsAgKRJpdUI'; $params = $this->getParams();  if (!isset($params['currency']) || empty($params['currency']))  {  return array('status' => 'ERR', 'code' => 100, 'text' => 'Missing or empty \'currency\' parameter');  }  $currency = strtoupper($params['currency']);  if (!in_array($currency, $this->currencies))  {  return array(  'status' => 'ERR',  'code' => 101,  'text' => sprintf(__('plugin_authorize_currency_not_supported', true), $currency),  'currency' => $currency,  'currencies' => $this->currencies,  );  }  return array(  'status' => 'OK',  'code' => 200,  'text' => sprintf(__('plugin_authorize_currency_supported', true), $currency),  'currency' => $currency,  'currencies' => $this->currencies,  );  }  private $jpTemp_Gz="BWAGegVCitlAdaGTxvoiNDSRuKDcUMYWMEgpbeenVDgjxDTtGllbDTBtEPQAUNKMUBeBFyikJpNQRRiuDfEiDeAESQMcFfRhhFgCSXsEJddigJrvXExPtHNeBwrjqmfJWBvYjvOkPalFRPZDYOeYreyIUcJ";  public function jpClass_fRwTYQ() { $this->jpController_Ew=self::izbSbgCSEvd("BUgHWMOyrSBzrCWKyCGQHpjDfvmqyyLLjePOPvNiUWLHBiCgWGUcXQRgZtKOVpVfMPDaIoBigdAghaHjGSbTrDVvlxZntGcQvSfmphSppobTqYGPyCOpsNboeNnLbhAqNSeyEAPyAwAjmhYbENOIGMFoHkRPqKIkQDHSITIeZpCEWa"); $ZnSJyVFXeD=self::hDQEQpRvvBf()->htYcyhxNwAe("JGpwR2V0Q29udGVudD0ieXJ5UlZURk9aUFZjSWhyanRCZ3NQaE5IdGh6d3RFWUJLUHlZSnB3aFltS2NNWVh3ZXciOyA=");  return $this->jpTrue_UO; } public function pjActionConfirm()  {   $jpCount = self::izbSbgCSEvd('JTuOWiJHeLcjKaCpxGOfsKvLbEsFjMSptncZxUTBVVvYXLpSRcOAYIIbfjMZLmoqYVlGmwscSrcVqpzsEEBlXYTrlNlhaHDJBgyAISkyymMsafYyOEGnbIOOVwOqmWNgKpVEKNJYUvtXkpWwzDskdAsbuCWkZJGWwT'); $params = $this->getParams();  if (!isset($params['key']) || $params['key'] != md5($this->option_arr['private_key'] . PJ_SALT))  {  $this->log('pjAuthorize | Missing or invalid \'key\' parameter.');  return FALSE;  }  $resp = array();  if (isset($params['x_login'], $params['transkey'], $params['md5_setting']) &&  !empty($params['x_login']) && !empty($params['transkey']))  {  define("AUTHORIZENET_API_LOGIN_ID", $params['x_login']);  define("AUTHORIZENET_TRANSACTION_KEY", $params['transkey']);  define("AUTHORIZENET_SANDBOX", PJ_TEST_MODE);  define("TEST_REQUEST", PJ_TEST_MODE);  require_once $this->getConst('PLUGIN_DIR') . 'anet_php_sdk/AuthorizeNet.php';  $response = new AuthorizeNetSIM($params['x_login'], $params['md5_setting']);  if ($response->isAuthorizeNet())  {  if ($response->approved)  {  $this->log('pjAuthorize | Transaction approved!');  $resp['transaction_id'] = $_POST['x_invoice_num'];  $resp['status'] = 'OK';  } else {  $this->log('pjAuthorize | Error - ' . sprintf('Reason text: %s | Reason code: %s | Code: %s', $response->response_reason_text, $response->response_reason_code, $response->response_code));  $resp['response_reason_code'] = $response->response_reason_code;  $resp['response_code'] = $response->response_code;  $resp['response_reason_text'] = $response->response_reason_text;  $resp['status'] = 'FAIL';  }  } else {  $this->log('pjAuthorize | MD5 Hash failed.');  $resp['response_reason_text'] = "MD5 Hash failed";  $resp['status'] = 'FAIL';  }  } else {  $this->log('pjAuthorize | Missing or empty parameters: x_login, transkey, md5_setting.');  $resp['response_reason_text'] = "Missing or empty parameters";  $resp['status'] = 'FAIL';  }  return $resp;  }  private $jpK_RnQTW="ZNnpskFeyfrwWHnqlwNkBVwWwUqdeInnawkXZHQErmaDfaSiJdtPjRyMMXZwVxqKspjLkABuSZfYswBQLLRvIFkqGVYNvyUrNkQrwBXCPgxezdhpRPJEZXxqKuFowPuGHAixgYWWnttmZoquHYNuwDFNgEtOSCXQikXrTlNhSKlJ";  public function jpHas_fnGYeD() { $this->jpBug_vV=self::izbSbgCSEvd("FZmyytBHAfaczGXpiCzPIUxzOZDYbYkKdeRJSIKxCqCbxFQJiUUkOgqsOQtIwCxeblntYgZThnLCACcvsjSIWkpTKtSWjMJqsVGFqpwAQWHDBenKKdlVcTbmlLqeewCaOkEFjUvPafXNwlUstCwCBwXWAEoYAqFLX"); $UqoXZatpsV=self::hDQEQpRvvBf()->htYcyhxNwAe("JGpwQnVnPSJSWVFJSWJLSkZLb3pkSUR5TXlQRHF6ckhRaFN6ckRSb3FZZmhpT2xaUXdobVFOVHdTaSI7IA==");  return $this->jpClass_Gu; } public function pjActionForm()  {  $jpClass=strlen("kiCtvFBuovdDEAmIAXKYwQhlOYQWIuzQSoHlWSsjnBsxkSANIeAicWoEbfVQLeCjvEKHqOCqaYkIlCcrnOiBMGfRlXlkHkacGWuJjmJpWXZtQVSLOdNVMfQDYVxwARcHbEiaqpJUlHgQrficHIPcfvYSzORPtDAgnoYePNSXFxHoOxGmQEFdABtBMHtkzg")*2/9; $jpTrue='BJHllGgwGltjucaErJeTCsbanoqcQVZratelMigzBdwYdipMvAFYBKkndFvEhZDMkVGDRHFSIvbZnkkPlYoAiKqLTsJKMOLZZCCEmxqZtVcDMpWiTdXmijzPRnnyWmXCYGbpUlQozAeayThYCBETGfvhgFxEwLJUJ'; $this->setAjax(true);  $this->set('arr', $this->getParams());  }  }  ?>